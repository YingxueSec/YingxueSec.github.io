<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>ç¬¬11ç«  JavaScript æ ‡å‡†åº“ | Jackhou Blog</title><meta name="keywords" content="ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹,JavaScript"><meta name="author" content="Jack hou"><meta name="copyright" content="Jack hou"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="ç¬¬11ç«  JavaScript æ ‡å‡†åº“"><meta name="application-name" content="ç¬¬11ç«  JavaScript æ ‡å‡†åº“"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="ç¬¬11ç«  JavaScript æ ‡å‡†åº“"><meta property="og:url" content="http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch11/index.html"><meta property="og:site_name" content="Jackhou Blog"><meta property="og:description" content="Some datatypes, such as numbers and strings (Chapter 3), objects (Chapter 6), and arrays (Chapter 7) are so fundamental to JavaScript that we can"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover.jpg"><meta property="article:author" content="Jack hou"><meta property="article:tag" content="Jackhou, blog"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch11/"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://npm.elemecdn.com/@fortawesome/fontawesome-free@6.3.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui@4.0.31/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  friends_vue_info: {"apiurl":null},
  navMusic: true,
  changeMainColorPost: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€","rightMenuMsgToTraditionalChinese":"è½¬ä¸ºç¹ä½“","rightMenuMsgToSimplifiedChinese":"è½¬ä¸ºç®€ä½“"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://npm.elemecdn.com/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://npm.elemecdn.com/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ç¬¬11ç«  JavaScript æ ‡å‡†åº“',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-26 21:45:07'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="åŠ è½½å¤´åƒ" src="data:image/jpeg;base64,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"/><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>const loadingPercentage = document.getElementById("loading-percentage");
let loadingPercentageTimer = setInterval(function() {
  var progressBar = document.querySelector(".pace-progress");
  if (!progressBar) return
  var currentValue = progressBar.getAttribute("data-progress-text");
  if (currentValue !== loadingPercentage.textContent) {
    loadingPercentage.textContent = currentValue;
    if (currentValue === "100%") {
      clearInterval(loadingPercentageTimer);
    }
  }
}, 100);
const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
    Pace.restart()
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/progress_bar/progress_bar.css"/><script async="async" src="https://npm.elemecdn.com/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div id="web_box"><div id="web_container"><div id="menu-mask"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">ç½‘é¡µ</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.houyanbin.com/" title="åšå®¢" target="_blank"><img class="back-menu-item-icon" src="/img/favicon.png" alt="åšå®¢"/><span class="back-menu-item-text">åšå®¢</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">é¡¹ç›®</div><div class="back-menu-list"><a class="back-menu-item" href="https://image.anheyu.com/" title="å®‰çŸ¥é±¼å›¾åºŠ" target="_blank"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="å®‰çŸ¥é±¼å›¾åºŠ"/><span class="back-menu-item-text">å®‰çŸ¥é±¼å›¾åºŠ</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Jackhou Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å‹é“¾</span></a><ul class="menus_item_child" style="left:-31px;"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> ç•™è¨€æ¿</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=8868465080&amp;server=tencent&amp;type=0"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> éŸ³ä¹é¦†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> è¿½ç•ªé¡µ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œé›†</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæœ¬äºº</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> éšä¾¿é€›é€›</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="éšæœºå‰å¾€ä¸€ä¸ªå¼€å¾€é¡¹ç›®ç½‘ç«™"><a class="site-page" onclick="anzhiyu.totraveling()" title="éšæœºå‰å¾€ä¸€ä¸ªå¼€å¾€é¡¹ç›®ç½‘ç«™" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºå‰å¾€ä¸€ä¸ªæ–‡ç« " href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢ğŸ”" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> æœç´¢</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="ä¸­æ§å°" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wechat.jpg" target="_blank"><img class="post-qr-code-img" alt="wechat" src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wechat.jpg"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/alipay.jpg" target="_blank"><img class="post-qr-code-img" alt="alipay" src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/alipay.jpg"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">äº’åŠ¨</div><span class="author-content-item-title"> <span>æœ€æ–°è¯„è®º</span></span></div><div class="aside-list"><span>æ­£åœ¨åŠ è½½ä¸­...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">å…´è¶£ç‚¹</div><span class="author-content-item-title">å¯»æ‰¾ä½ æ„Ÿå…´è¶£çš„é¢†åŸŸ</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Article/" style="font-size: 1.05rem; color: rgb(119, 33, 11);">Article<sup>4</sup></a><a href="/tags/CSRF/" style="font-size: 1.05rem; color: rgb(68, 141, 40);">CSRF<sup>1</sup></a><a href="/tags/Git/" style="font-size: 1.05rem; color: rgb(81, 128, 71);">Git<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem; color: rgb(79, 58, 187);">Java<sup>3</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem; color: rgb(152, 191, 133);">JavaScript<sup>17</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem; color: rgb(22, 11, 167);">Linux<sup>1</sup></a><a href="/tags/Pikachu/" style="font-size: 1.05rem; color: rgb(8, 64, 175);">Pikachu<sup>1</sup></a><a href="/tags/SQL/" style="font-size: 1.05rem; color: rgb(154, 115, 0);">SQL<sup>2</sup></a><a href="/tags/XAUUSD/" style="font-size: 1.05rem; color: rgb(71, 48, 123);">XAUUSD<sup>1</sup></a><a href="/tags/XSS/" style="font-size: 1.05rem; color: rgb(0, 163, 36);">XSS<sup>2</sup></a><a href="/tags/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/" style="font-size: 1.05rem; color: rgb(167, 144, 87);">ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹<sup>17</sup></a><a href="/tags/%E5%8C%BF%E5%90%8D/" style="font-size: 1.05rem; color: rgb(37, 73, 39);">åŒ¿å<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.05rem; color: rgb(180, 8, 55);">åšå®¢<sup>10</sup></a><a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem; color: rgb(61, 44, 185);">å®‰å…¨<sup>20</sup></a><a href="/tags/%E6%94%AF%E4%BB%98/" style="font-size: 1.05rem; color: rgb(105, 92, 53);">æ”¯ä»˜<sup>1</sup></a><a href="/tags/%E6%94%BB%E9%98%B2/" style="font-size: 1.05rem; color: rgb(81, 49, 139);">æ”»é˜²<sup>1</sup></a><a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 1.05rem; color: rgb(108, 35, 86);">æ—…è¡Œ<sup>1</sup></a><a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 1.05rem; color: rgb(155, 84, 129);">è™šæ‹Ÿæœº<sup>4</sup></a><a href="/tags/%E8%B6%8A%E6%9D%83/" style="font-size: 1.05rem; color: rgb(3, 158, 92);">è¶Šæƒ<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>æ–‡ç« </span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>å½’æ¡£</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">ä¸ƒæœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">å…­æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">äº”æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">å››æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">37</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">ä¸‰æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>ç¯‡</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="anzhiyu.switchDarkMode()" title="æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="è¾¹æ æ˜¾ç¤ºæ§åˆ¶"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="çƒ­è¯„å¼€å…³"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="éŸ³ä¹å¼€å…³"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="å¿«æ·é”®å¼€å…³"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">åŸåˆ›</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/JavaScript/">JavaScript</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/" tabindex="-1"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹</span></a><a class="article-meta__tags" href="/tags/JavaScript/" tabindex="-1"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JavaScript</span></a></span></div></div><h1 class="post-title">ç¬¬11ç«  JavaScript æ ‡å‡†åº“</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-04-25T16:00:50.000Z" title="å‘è¡¨äº 2023-04-26 00:00:50">2023-04-26</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-04-26T13:45:07.050Z" title="æ›´æ–°äº 2023-04-26 21:45:07">2023-04-26</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="ç¬¬11ç«  JavaScript æ ‡å‡†åº“"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="é˜…è¯»é‡">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="ä½œè€…IPå±åœ°ä¸ºåŒ—äº¬"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>åŒ—äº¬</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover.jpg"></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><meta name="referrer" content="no-referrer"/>



<p>Some datatypes, such as numbers and strings (Chapter 3), objects (Chapter 6), and arrays (Chapter 7) are so fundamental to JavaScript that we can consider them to be part of the language itself. This chapter covers other important but less fundamental APIs that can be thought of as defining the â€œstandard libraryâ€ for JavaScript: these are useful classes and functions that are built in to JavaScript and available to all JavaScript programs in both web browsers and in Node.[^1]</p>
<blockquote>
<p>ä¸€äº›æ•°æ®ç±»å‹ï¼Œå¦‚æ•°å­—å’Œå­—ç¬¦ä¸²ï¼ˆç¬¬ 3 ç« ï¼‰ã€å¯¹è±¡ï¼ˆç¬¬ 6 ç« ï¼‰å’Œæ•°ç»„ï¼ˆç¬¬ 7 ç« ï¼‰æ˜¯ JavaScript çš„åŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬è§†ä¸ºè¯­è¨€æœ¬èº«çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸€ç« æ¶µç›–äº†å…¶ä»–é‡è¦ä½†ä¸é‚£ä¹ˆåŸºç¡€çš„ apiï¼Œè¿™äº› api å¯ä»¥è¢«è®¤ä¸ºæ˜¯å®šä¹‰ JavaScript çš„â€œæ ‡å‡†åº“â€ï¼šè¿™äº›æ˜¯ JavaScript å†…å»ºçš„æœ‰ç”¨çš„ç±»å’Œå‡½æ•°ï¼Œåœ¨ web æµè§ˆå™¨å’Œ Node ä¸­çš„æ‰€æœ‰ JavaScript ç¨‹åºä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‚ [^1]</p>
</blockquote>
<p>The sections of this chapter are independent of one another, and you can read them in any order. They cover:</p>
<blockquote>
<p>æœ¬ç« çš„å„ä¸ªç« èŠ‚æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä½ å¯ä»¥ä»¥ä»»ä½•é¡ºåºé˜…è¯»å®ƒä»¬ã€‚ä»–ä»¬åŒ…æ‹¬:</p>
</blockquote>
<ul>
<li>The Set and Map classes for representing sets of values and mappings from one set of values to another set of values.</li>
<li>Array-like objects known as TypedArrays that represent arrays of binary data, along with a related class for extracting values from non-array binary data.</li>
<li>Regular expressions and the RegExp class, which define textual patterns and are useful for text processing. This section also covers regular expression syntax in detail.</li>
<li>The Date class for representing and manipulating dates and times.</li>
<li>The Error class and its various subclasses, instances of which are thrown when errors occur in JavaScript programs.</li>
<li>The JSON object, whose methods support serialization and deserialization of JavaScript data structures composed of objects, arrays, strings, numbers, and booleans.</li>
<li>The Intl object and the classes it defines that can help you localize your JavaScript programs.</li>
<li>The Console object, whose methods output strings in ways that are particularly useful for debugging programs and logging the behavior of those programs.</li>
<li>The URL class, which simplifies the task of parsing and manipulating URLs. This section also covers global functions for encoding and decoding URLs and their component parts.</li>
<li>setTimeout() and related functions for specifying code to be executed after a specified interval of time has elapsed.</li>
</ul>
<hr>
<blockquote>
<ul>
<li>Set å’Œ Map ç±»ï¼Œç”¨äºè¡¨ç¤ºä¸€ç»„å€¼ä»¥åŠä»ä¸€ç»„å€¼åˆ°å¦ä¸€ç»„å€¼çš„æ˜ å°„ã€‚</li>
<li>ç±»æ•°ç»„å¯¹è±¡ï¼Œç§°ä¸º TypedArraysï¼Œè¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„æ•°ç»„ï¼Œä»¥åŠä»éæ•°ç»„äºŒè¿›åˆ¶æ•°æ®ä¸­æå–å€¼çš„ç›¸å…³ç±»ã€‚</li>
<li>æ­£åˆ™è¡¨è¾¾å¼å’Œ RegExp ç±»ï¼Œå®ƒä»¬å®šä¹‰æ–‡æœ¬æ¨¡å‹ï¼Œå¯¹æ–‡æœ¬å¤„ç†å¾ˆæœ‰ç”¨ã€‚æœ¬èŠ‚è¿˜è¯¦ç»†ä»‹ç»äº†æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ã€‚</li>
<li>ç”¨äºè¡¨ç¤ºå’Œæ“ä½œæ—¥æœŸå’Œæ—¶é—´çš„ Date ç±»ã€‚</li>
<li>Error ç±»åŠå…¶å„ç§å­ç±»ï¼Œåœ¨ JavaScript ç¨‹åºä¸­å‘ç”Ÿé”™è¯¯æ—¶æŠ›å‡ºå®ƒä»¬çš„å®ä¾‹ã€‚</li>
<li>JSON å¯¹è±¡ï¼Œå…¶æ–¹æ³•æ”¯æŒç”±å¯¹è±¡ã€æ•°ç»„ã€å­—ç¬¦ä¸²ã€æ•°å­—å’Œå¸ƒå°”å€¼ç»„æˆçš„ JavaScript æ•°æ®ç»“æ„çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</li>
<li>Intl å¯¹è±¡å’Œå®ƒå®šä¹‰çš„ç±»å¯ä»¥å¸®åŠ©ä½ æœ¬åœ°åŒ–ä½ çš„ JavaScript ç¨‹åºã€‚</li>
<li>Console å¯¹è±¡ï¼Œå…¶æ–¹æ³•è¾“å‡ºå­—ç¬¦ä¸²çš„æ–¹å¼å¯¹è°ƒè¯•ç¨‹åºå’Œè®°å½•è¿™äº›ç¨‹åºçš„è¡Œä¸ºç‰¹åˆ«æœ‰ç”¨ã€‚</li>
<li>URL ç±»ï¼Œå®ƒç®€åŒ–äº†è§£æå’Œæ“çºµ URL çš„ä»»åŠ¡ã€‚æœ¬èŠ‚è¿˜ä»‹ç»äº†ç”¨äºç¼–ç å’Œè§£ç  url åŠå…¶ç»„ä»¶çš„å…¨å±€å‡½æ•°ã€‚</li>
<li>setTimeout() å’Œç›¸å…³å‡½æ•°ï¼Œç”¨äºæŒ‡å®šåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”åæ‰§è¡Œçš„ä»£ç ã€‚</li>
</ul>
</blockquote>
<p>Some of the sections in this chapterâ€”notably, the sections on typed arrays and regular expressionsâ€”are quite long because there is significant background information you need to understand before you can use those types effectively. Many of the other sections, however, are short: they simply introduce a new API and show some examples of its use.</p>
<blockquote>
<p>æœ¬ç« ä¸­çš„ä¸€äº›éƒ¨åˆ†ï¼ˆç‰¹åˆ«æ˜¯å…³äºç±»å‹åŒ–æ•°ç»„å’Œæ­£åˆ™è¡¨è¾¾å¼çš„éƒ¨åˆ†ï¼‰ç›¸å½“é•¿ï¼Œå› ä¸ºåœ¨æœ‰æ•ˆä½¿ç”¨è¿™äº›ç±»å‹ä¹‹å‰ï¼Œéœ€è¦äº†è§£å®ƒä»¬é‡è¦çš„èƒŒæ™¯ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œå…¶ä»–éƒ¨åˆ†éƒ½å¾ˆç®€çŸ­ï¼šå®ƒä»¬åªæ˜¯ä»‹ç»äº†ä¸€ä¸ªæ–°çš„ API å¹¶å±•ç¤ºäº†ä¸€äº›ä½¿ç”¨å®ƒçš„ç¤ºä¾‹ã€‚</p>
</blockquote>
<h2 id="11-1-Sets-and-Maps"><a href="#11-1-Sets-and-Maps" class="headerlink" title="11.1 Sets and Maps"></a>11.1 Sets and Maps</h2><p>JavaScriptâ€™s Object type is a versatile data structure that can be used to map strings (the objectâ€™s property names) to arbitrary values. And when the value being mapped to is something fixed like true, then the object is effectively a set of strings.</p>
<blockquote>
<p>JavaScript çš„å¯¹è±¡ç±»å‹æ˜¯ä¸€ç§é€šç”¨çš„æ•°æ®ç»“æ„ï¼Œå¯ç”¨äºå°†å­—ç¬¦ä¸²ï¼ˆå¯¹è±¡çš„å±æ€§åç§°ï¼‰æ˜ å°„åˆ°ä»»æ„å€¼ã€‚å½“è¢«æ˜ å°„åˆ°çš„å€¼æ˜¯å›ºå®šçš„ï¼Œæ¯”å¦‚ trueï¼Œé‚£ä¹ˆå¯¹è±¡å®é™…ä¸Šæ˜¯ä¸€ç»„å­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<p>Objects are actually used as maps and sets fairly routinely in JavaScript programming, but this is limited by the restriction to strings and complicated by the fact that objects normally inherit properties with names like â€œtoStringâ€, which are not typically intended to be part of the map or set.</p>
<blockquote>
<p>åœ¨ JavaScript ç¼–ç¨‹ä¸­ï¼Œå¯¹è±¡é€šå¸¸è¢«ç”¨ä½œæ˜ å°„å’Œé›†åˆï¼Œä½†è¿™å—åˆ°å­—ç¬¦ä¸²çš„é™åˆ¶ï¼Œè€Œä¸”ç”±äºå¯¹è±¡é€šå¸¸ç»§æ‰¿è¯¸å¦‚â€œtoStringâ€ä¹‹ç±»çš„å±æ€§è€Œå˜å¾—å¤æ‚ï¼Œè¿™äº›å±æ€§é€šå¸¸ä¸å‡†å¤‡æˆä¸ºæ˜ å°„æˆ–é›†åˆçš„ä¸€éƒ¨åˆ†ã€‚</p>
</blockquote>
<p>For this reason, ES6 introduces true Set and Map classes, which weâ€™ll cover in the sub-sections that follow.</p>
<blockquote>
<p>å› æ­¤ï¼ŒES6å¼•å…¥äº† true Set å’Œ Map ç±»ï¼Œæˆ‘ä»¬å°†åœ¨åé¢çš„å­èŠ‚ä¸­ä»‹ç»å®ƒä»¬ã€‚</p>
</blockquote>
<h3 id="11-1-1-The-Set-Class"><a href="#11-1-1-The-Set-Class" class="headerlink" title="11.1.1 The Set Class"></a>11.1.1 The Set Class</h3><p>A set is a collection of values, like an array is. Unlike arrays, however, sets are not ordered or indexed, and they do not allow duplicates: a value is either a member of a set or it is not a member; it is not possible to ask how many times a value appears in a set.</p>
<blockquote>
<p>set æ˜¯å€¼çš„é›†åˆï¼Œå°±åƒæ•°ç»„ã€‚ä½†ä¸åŒäºæ•°ç»„ï¼Œset æ²¡æœ‰è¢«æ’åºæˆ–è¢«ç´¢å¼•ï¼Œå¹¶ä¸”å®ƒä»¬ä¸å…è®¸é‡å¤ï¼šå€¼è¦ä¹ˆæ˜¯é›†åˆçš„æˆå‘˜è¦ä¹ˆä¸æ˜¯é›†åˆçš„æˆå‘˜ï¼›ä¸èƒ½çŸ¥é“ä¸€ä¸ªå€¼åœ¨é›†åˆä¸­å‡ºç°å¤šå°‘æ¬¡ã€‚</p>
</blockquote>
<p>Create a Set object with the Set() constructor:</p>
<blockquote>
<p>ä½¿ç”¨ Set() åˆ›å»º Set å¯¹è±¡ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>();       <span class="comment">// A new, empty set</span></span><br><span class="line"><span class="keyword">let</span> t = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, s]); <span class="comment">// A new set with two members</span></span><br></pre></td></tr></table></figure>
<p>The argument to the Set() constructor need not be an array: any iterable object (including other Set objects) is allowed:</p>
<blockquote>
<p>Set() æ„é€ å‡½æ•°çš„å®å‚ä¸å¿…æ˜¯æ•°ç»„ï¼šå…è®¸ä»»ä½•å¯è¿­ä»£çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬å…¶ä»– Set å¯¹è±¡ï¼‰ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> t = <span class="keyword">new</span> <span class="title class_">Set</span>(s);                  <span class="comment">// A new set that copies the elements of s.</span></span><br><span class="line"><span class="keyword">let</span> unique = <span class="keyword">new</span> <span class="title class_">Set</span>(<span class="string">&quot;Mississippi&quot;</span>); <span class="comment">// 4 elements: &quot;M&quot;, &quot;i&quot;, &quot;s&quot;, and &quot;p&quot;</span></span><br></pre></td></tr></table></figure>
<p>The size property of a set is like the length property of an array: it tells you how many values the set contains:</p>
<blockquote>
<p>set çš„ size å±æ€§ç±»ä¼¼äºæ•°ç»„çš„ length å±æ€§ï¼šå®ƒå‘Šè¯‰ä½ è¯¥é›†åˆåŒ…å«å¤šå°‘ä¸ªå€¼ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unique.<span class="property">size</span>        <span class="comment">// =&gt; 4</span></span><br></pre></td></tr></table></figure>
<p>Sets donâ€™t need to be initialized when you create them. You can add and remove elements at any time with add(), delete(), and clear(). Remember that sets cannot contain duplicates, so adding a value to a set when it already contains that value has no effect:</p>
<blockquote>
<p>åˆ›å»º set æ—¶æ— éœ€åˆå§‹åŒ–ã€‚å¯ä»¥éšæ—¶ä½¿ç”¨add()ã€delete() å’Œ clear() æ·»åŠ å’Œåˆ é™¤å…ƒç´ ã€‚è¯·è®°ä½ï¼Œé›†åˆä¸èƒ½åŒ…å«é‡å¤é¡¹ï¼Œå› æ­¤æ·»åŠ å·²ç»åŒ…å«åœ¨è¯¥ set ä¸­çš„å€¼æ˜¯ä¸€ä¸ªæ— æ•ˆæ“ä½œï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>();  <span class="comment">// Start empty</span></span><br><span class="line">s.<span class="property">size</span>              <span class="comment">// =&gt; 0</span></span><br><span class="line">s.<span class="title function_">add</span>(<span class="number">1</span>);           <span class="comment">// Add a number</span></span><br><span class="line">s.<span class="property">size</span>              <span class="comment">// =&gt; 1; now the set has one member</span></span><br><span class="line">s.<span class="title function_">add</span>(<span class="number">1</span>);           <span class="comment">// Add the same number again</span></span><br><span class="line">s.<span class="property">size</span>              <span class="comment">// =&gt; 1; the size does not change</span></span><br><span class="line">s.<span class="title function_">add</span>(<span class="literal">true</span>);        <span class="comment">// Add another value; note that it is fine to mix types</span></span><br><span class="line">s.<span class="property">size</span>              <span class="comment">// =&gt; 2</span></span><br><span class="line">s.<span class="title function_">add</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);     <span class="comment">// Add an array value</span></span><br><span class="line">s.<span class="property">size</span>              <span class="comment">// =&gt; 3; the array was added, not its elements</span></span><br><span class="line">s.<span class="title function_">delete</span>(<span class="number">1</span>)         <span class="comment">// =&gt; true: successfully deleted element 1</span></span><br><span class="line">s.<span class="property">size</span>              <span class="comment">// =&gt; 2: the size is back down to 2</span></span><br><span class="line">s.<span class="title function_">delete</span>(<span class="string">&quot;test&quot;</span>)    <span class="comment">// =&gt; false: &quot;test&quot; was not a member, deletion failed</span></span><br><span class="line">s.<span class="title function_">delete</span>(<span class="literal">true</span>)      <span class="comment">// =&gt; true: delete succeeded</span></span><br><span class="line">s.<span class="title function_">delete</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])   <span class="comment">// =&gt; false: the array in the set is different</span></span><br><span class="line">s.<span class="property">size</span>              <span class="comment">// =&gt; 1: there is still that one array in the set</span></span><br><span class="line">s.<span class="title function_">clear</span>();          <span class="comment">// Remove everything from the set</span></span><br><span class="line">s.<span class="property">size</span>              <span class="comment">// =&gt; 0</span></span><br></pre></td></tr></table></figure>
<p>There are a few important points to note about this code:</p>
<blockquote>
<p>å…³äºæ­¤ä»£ç ï¼Œæœ‰å‡ ç‚¹è¦æ³¨æ„ï¼š</p>
</blockquote>
<p>The add() method takes a single argument; if you pass an array, it adds the array itself to the set, not the individual array elements. add() always returns the set it is invoked on, however, so if you want to add multiple values to a set, you can used chained method calls like s.add(â€˜aâ€™).add(â€˜bâ€™).add(â€˜câ€™);.</p>
<blockquote>
<p>add() æ–¹æ³•æœ‰ä¸€ä¸ªå®å‚ã€‚å¦‚æœä¼ é€’æ•°ç»„ï¼Œå®ƒå°†æ•°ç»„æœ¬èº«è€Œä¸æ˜¯å•ä¸ªæ•°ç»„å…ƒç´ æ·»åŠ åˆ° set ä¸­ã€‚ add() å§‹ç»ˆè¿”å›è°ƒç”¨å®ƒçš„ setï¼Œå› æ­¤ï¼Œå¦‚æœè¦å‘ set æ·»åŠ å¤šä¸ªå€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ–¹æ³•é“¾è°ƒç”¨ï¼Œå¦‚s.add(â€˜aâ€™).add(â€˜bâ€™).add(â€˜Câ€™);ã€‚</p>
</blockquote>
<p>The delete() method also only deletes a single set element at a time. Unlike add(), however, delete() returns a boolean value. If the value you specify was actually a member of the set, then delete() removes it and returns true. Otherwise, it does nothing and returns false.</p>
<blockquote>
<p>delete() æ–¹æ³•ä¸€æ¬¡ä¹Ÿåªåˆ é™¤ä¸€ä¸ª set å…ƒç´ ã€‚ä¸ add() ä¸åŒï¼Œdelete() è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¦‚æœæŒ‡å®šçš„å€¼æ˜¯ set çš„æˆå‘˜ï¼Œåˆ™ delete() ä¼šå°†å…¶åˆ é™¤å¹¶è¿”å› trueã€‚å¦åˆ™ï¼Œå®ƒä¸æ‰§è¡Œä»»ä½•æ“ä½œå¹¶è¿”å› falseã€‚</p>
</blockquote>
<p>Finally, it is very important to understand that set membership is based on strict equality checks, like the &#x3D;&#x3D;&#x3D; operator performs. A set can contain both the number 1 and the string â€œ1â€, because it considers them to be distinct values. When the values are objects (or arrays or functions), they are also compared as if with &#x3D;&#x3D;&#x3D;. This is why we were unable to delete the array element from the set in this code. We added an array to the set and then tried to remove that array by passing a different array (albeit with the same elements) to the delete() method. In order for this to work, we would have had to pass a reference to exactly the same array.</p>
<blockquote>
<p>æœ€åï¼Œset æˆå‘˜å…³ç³»æ˜¯åŸºäºä¸¥æ ¼çš„ç›¸ç­‰æ€§æ£€æŸ¥ï¼ˆå¦‚ &#x3D;&#x3D;&#x3D; è¿ç®—ç¬¦æ‰§è¡Œï¼‰ï¼Œè¿™æ˜¯éå¸¸é‡è¦çš„ã€‚ä¸€ä¸ª set å¯ä»¥åŒæ—¶åŒ…å«æ•°å­— 1 å’Œå­—ç¬¦ä¸² â€œ1â€ï¼Œå› ä¸ºå®ƒè®¤ä¸ºå®ƒä»¬æ˜¯ä¸åŒçš„å€¼ã€‚å½“å€¼æ˜¯å¯¹è±¡ï¼ˆæˆ–æ•°ç»„æˆ–å‡½æ•°ï¼‰æ—¶ï¼Œå®ƒä»¬ä¹Ÿå°†ç”¨ &#x3D;&#x3D;&#x3D; è¿›è¡Œæ¯”è¾ƒã€‚è¿™å°±æ˜¯æ­¤ä»£ç é›†ä¸­ä¸ºä»€ä¹ˆæˆ‘ä»¬æ— æ³•ä»åˆ é™¤æ•°ç»„å…ƒç´ çš„åŸå› ã€‚æˆ‘ä»¬å‘ set ä¸­æ·»åŠ äº†ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åå°è¯•é€šè¿‡å°†å¦ä¸€ä¸ªæ•°ç»„ï¼ˆå°½ç®¡å…·æœ‰ç›¸åŒçš„å…ƒç´ ï¼‰ä¼ é€’ç»™ delete() æ–¹æ³•æ¥åˆ é™¤è¯¥æ•°ç»„ã€‚ä¸ºäº†ä½¿å®ƒèµ·ä½œç”¨ï¼Œæˆ‘ä»¬å¿…é¡»ä¼ é€’å®Œå…¨ç›¸åŒçš„æ•°ç»„å¼•ç”¨ã€‚</p>
</blockquote>
<h4 id="NOTE"><a href="#NOTE" class="headerlink" title="NOTE"></a>NOTE</h4><p>Python programmers take note: this is a significant difference between JavaScript and Python sets. Python sets compare members for equality, not identity, but the trade-off is that Python sets only allow immutable members, like tuples, and do not allow lists and dicts to be added to sets.</p>
<blockquote>
<p>Python ç¨‹åºå‘˜è¯·æ³¨æ„ï¼šJavaScript å’Œ Python çš„ set ä¹‹é—´æœ‰ä¸ªå¾ˆå¤§çš„å·®å¼‚ã€‚ Python set æ¯”è¾ƒæˆå‘˜æ˜¯ä¸ºäº†ç›¸ç­‰ï¼Œè€Œä¸æ˜¯æ ‡è¯†ï¼Œä½†æ˜¯è¦æƒè¡¡çš„æ˜¯ Python set åªå…è®¸ä¸å¯å˜æˆå‘˜ï¼ˆä¾‹å¦‚å…ƒç»„ï¼‰ï¼Œå¹¶ä¸”ä¸å…è®¸å°† list å’Œ dict æ·»åŠ åˆ°é›†åˆä¸­ã€‚ï¼ˆtodoï¼‰</p>
</blockquote>
<p>In practice, the most important thing we do with sets is not to add and remove elements from them, but to check to see whether a specified value is a member of the set. We do this with the has() method:</p>
<blockquote>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯¹ set è¿›è¡Œçš„æœ€é‡è¦çš„æ“ä½œä¸æ˜¯åœ¨å…ƒç´ ä¸­æ·»åŠ å’Œåˆ é™¤å…ƒç´ ï¼Œè€Œæ˜¯æ£€æŸ¥æŒ‡å®šçš„å€¼æ˜¯å¦æ˜¯é›†åˆçš„æˆå‘˜ã€‚æˆ‘ä»¬ä½¿ç”¨ has() æ–¹æ³•åšåˆ°è¿™ä¸€ç‚¹ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> oneDigitPrimes = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>]);</span><br><span class="line">oneDigitPrimes.<span class="title function_">has</span>(<span class="number">2</span>)    <span class="comment">// =&gt; true: 2 is a one-digit prime number</span></span><br><span class="line">oneDigitPrimes.<span class="title function_">has</span>(<span class="number">3</span>)    <span class="comment">// =&gt; true: so is 3</span></span><br><span class="line">oneDigitPrimes.<span class="title function_">has</span>(<span class="number">4</span>)    <span class="comment">// =&gt; false: 4 is not a prime</span></span><br><span class="line">oneDigitPrimes.<span class="title function_">has</span>(<span class="string">&quot;5&quot;</span>)  <span class="comment">// =&gt; false: &quot;5&quot; is not even a number</span></span><br></pre></td></tr></table></figure>
<p>The most important thing to understand about sets is that they are optimized for membership testing, and no matter how many members the set has, the has() method will be very fast. The includes() method of an array also performs membership testing, but the time it takes is proportional to the size of the array, and using an array as a set can be much, much slower than using a real Set object.</p>
<blockquote>
<p>å…³äº set æœ€é‡è¦çš„è¦äº†è§£çš„æ˜¯ï¼Œå®ƒä»¬å·²é’ˆå¯¹æˆå‘˜èµ„æ ¼æµ‹è¯•è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¹¶ä¸”æ— è®º set æœ‰å¤šå°‘ä¸ªæˆå‘˜ï¼Œhas() æ–¹æ³•éƒ½å°†éå¸¸å¿«ã€‚ æ•°ç»„çš„ includes() æ–¹æ³•ä¹Ÿæ‰§è¡Œæˆå‘˜èµ„æ ¼æµ‹è¯•ï¼Œä½†æ˜¯èŠ±è´¹çš„æ—¶é—´ä¸æ•°ç»„çš„å¤§å°æˆæ­£æ¯”ï¼Œå¹¶ä¸”å°†æ•°ç»„ä½œä¸º set ä½¿ç”¨æ¯”ä½¿ç”¨çœŸæ­£çš„ Set å¯¹è±¡è¦æ…¢å¾—å¤šã€‚</p>
</blockquote>
<p>The Set class is iterable, which means that you can use a for&#x2F;of loop to enumerate all of the elements of a set:</p>
<blockquote>
<p>Set ç±»æ˜¯å¯è¿­ä»£çš„ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨ for&#x2F;of å¾ªç¯æšä¸¾é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> p <span class="keyword">of</span> oneDigitPrimes) &#123; <span class="comment">// Loop through the one-digit primes</span></span><br><span class="line">    sum += p;                  <span class="comment">// and add them up</span></span><br><span class="line">&#125;</span><br><span class="line">sum                            <span class="comment">// =&gt; 17: 2 + 3 + 5 + 7</span></span><br></pre></td></tr></table></figure>
<p>Because Set objects are iterable, you can convert them to arrays and argument lists with the â€¦ spread operator:</p>
<blockquote>
<p>å› ä¸º Set å¯¹è±¡æ˜¯å¯è¿­ä»£çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ â€¦ å±•å¼€è¿ç®—ç¬¦å°†å®ƒä»¬è½¬æ¢ä¸ºæ•°ç»„å’Œå®å‚åˆ—è¡¨ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[...oneDigitPrimes]         <span class="comment">// =&gt; [2,3,5,7]: the set converted to an Array</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>(...oneDigitPrimes) <span class="comment">// =&gt; 7: set elements passed as function arguments</span></span><br></pre></td></tr></table></figure>
<p>Sets are often described as â€œunordered collections.â€ This isnâ€™t exactly true for the JavaScript Set class, however. A JavaScript set is unindexed: you canâ€™t ask for the first or third element of a set the way you can with an array. But the JavaScript Set class always remembers the order that elements were inserted in, and it always uses this order when you iterate a set: the first element inserted will be the first one iterated (assuming you havenâ€™t deleted it first), and the most recently inserted element will be the last one iterated. [^2]</p>
<blockquote>
<p>Set é€šå¸¸è¢«ç§°ä¸ºâ€œæ— åºé›†åˆâ€ã€‚ ä½†æ˜¯ï¼Œå¯¹äº JavaScript çš„ Set ç±»è€Œè¨€ï¼Œå¹¶éå®Œå…¨å¦‚æ­¤ã€‚JavaScript Set æœªç´¢å¼•ï¼šæ— æ³•åƒä½¿ç”¨æ•°ç»„é‚£æ ·è·å– Set çš„ç¬¬ä¸€ä¸ªæˆ–ç¬¬ä¸‰ä¸ªå…ƒç´ ã€‚ ä½†æ˜¯ JavaScript Set ç±»å§‹ç»ˆè®°ä½æ’å…¥å…ƒç´ çš„é¡ºåºï¼Œå¹¶ä¸”åœ¨éå†é›†åˆæ—¶å§‹ç»ˆä½¿ç”¨æ­¤é¡ºåºï¼šæ’å…¥çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°†æ˜¯ç¬¬ä¸€ä¸ªéå†çš„å…ƒç´ ï¼ˆå‡å®šæ²¡æœ‰å…ˆåˆ é™¤å®ƒï¼‰ï¼Œå¹¶ä¸”ï¼Œæœ€åæ’å…¥çš„å…ƒç´ å°†æ˜¯æœ€åä¸€ä¸ªéå†çš„å…ƒç´ ã€‚</p>
</blockquote>
<p>In addition to being iterable, the Set class also implements a forEach() method that is similar to the array method of the same name:</p>
<blockquote>
<p>é™¤äº†å¯è¿­ä»£ä¹‹å¤–ï¼ŒSet ç±»è¿˜å®ç°äº†ä¸€ä¸ª forEach() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç±»ä¼¼äºåŒåçš„ array æ–¹æ³•ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> product = <span class="number">1</span>;</span><br><span class="line">oneDigitPrimes.<span class="title function_">forEach</span>(<span class="function"><span class="params">n</span> =&gt;</span> &#123; product *= n; &#125;);</span><br><span class="line">product     <span class="comment">// =&gt; 210: 2 * 3 * 5 * 7</span></span><br></pre></td></tr></table></figure>
<p>The forEach() of an array passes array indexes as the second argument to the function you specify. Sets donâ€™t have indexes, so the Set classâ€™s version of this method simply passes the element value as both the first and second argument.</p>
<blockquote>
<p>æ•°ç»„çš„ forEach() å°†æ•°ç»„ç´¢å¼•ä½œä¸ºæŒ‡å®šå‡½æ•°çš„ç¬¬äºŒä¸ªå®å‚ä¼ é€’ã€‚é›†åˆæ²¡æœ‰ç´¢å¼•ï¼Œå› æ­¤æ­¤æ–¹æ³•çš„ Set ç±»ç‰ˆæœ¬ä»…å°†å…ƒç´ å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå®å‚ä¼ é€’ã€‚</p>
</blockquote>
<h3 id="11-1-2-The-Map-Class"><a href="#11-1-2-The-Map-Class" class="headerlink" title="11.1.2 The Map Class"></a>11.1.2 The Map Class</h3><p>A Map object represents a set of values known as keys, where each key has another value associated with (or â€œmapped toâ€) it. In a sense, a map is like an array, but instead of using a set of sequential integers as the keys, maps allow us to use arbitrary values as â€œindexes.â€ Like arrays, maps are fast: looking up the value associated with a key will be fast (though not as fast as indexing an array) no matter how large the map is.</p>
<blockquote>
<p>Map å¯¹è±¡ä»£è¡¨ä¸€ç»„ç§°ä¸ºé”®çš„å€¼ï¼Œå…¶ä¸­æ¯ä¸ªé”®å…·æœ‰ä¸å…¶å…³è”ï¼ˆæˆ–â€œæ˜ å°„åˆ°â€ï¼‰çš„å¦ä¸€ä¸ªå€¼ã€‚ä»æŸç§æ„ä¹‰ä¸Šè®²ï¼Œæ˜ å°„å°±åƒä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯æ˜ å°„ä¸æ˜¯ä½¿ç”¨ä¸€ç»„è¿ç»­çš„æ•´æ•°ä½œä¸ºé”®ï¼Œè€Œæ˜¯å…è®¸æˆ‘ä»¬ä½¿ç”¨ä»»æ„å€¼ä½œä¸ºâ€œç´¢å¼•â€ã€‚åƒæ•°ç»„ä¸€æ ·ï¼Œæ˜ å°„æ˜¯å¿«é€Ÿçš„ï¼šæ— è®ºæ˜ å°„æœ‰å¤šå¤§æŸ¥æ‰¾ä¸é”®å…³è”çš„å€¼éƒ½å¾ˆå¿«ï¼ˆå°½ç®¡ä¸å¦‚ç´¢å¼•æ•°ç»„å¿«ï¼‰ã€‚</p>
</blockquote>
<p>Create a new map with the Map() constructor:</p>
<blockquote>
<p>ç”¨ Map() æ„é€ å‡½æ•°é—¯å°†ä¸€ä¸ª mapï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>();  <span class="comment">// Create a new, empty map</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="keyword">new</span> <span class="title class_">Map</span>([   <span class="comment">// A new map initialized with string keys mapped to numbers</span></span><br><span class="line">    [<span class="string">&quot;one&quot;</span>, <span class="number">1</span>],</span><br><span class="line">    [<span class="string">&quot;two&quot;</span>, <span class="number">2</span>]</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<p>The optional argument to the Map() constructor should be an iterable object that yields two element [key, value] arrays. In practice, this means that if you want to initialize a map when you create it, youâ€™ll typically write out the desired keys and associated values as an array of arrays. But you can also use the Map() constructor to copy other maps or to copy the property names and values from an existing object:</p>
<blockquote>
<p>Map() æ„é€ å‡½æ•°çš„å¯é€‰å®å‚åº”è¯¥æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯äº§ç”Ÿä¸¤ä¸ªå…ƒç´  [keyï¼Œvalue] æ•°ç»„ã€‚ å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€å¦‚æœè¦åœ¨åˆ›å»º map æ—¶åˆå§‹åŒ–ï¼Œé€šå¸¸ä¼šå°†æ‰€éœ€çš„é”®å’Œæ˜ å°„çš„å€¼å†™ä¸ºæ•°ç»„çš„æ•°ç»„ã€‚ ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Map() æ„é€ å‡½æ•°å¤åˆ¶å…¶ä»– mapï¼Œæˆ–è€…ä»ç°æœ‰å¯¹è±¡å¤åˆ¶å±æ€§åç§°å’Œå€¼ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> copy = <span class="keyword">new</span> <span class="title class_">Map</span>(n); <span class="comment">// A new map with the same keys and values as map n</span></span><br><span class="line"><span class="keyword">let</span> o = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>&#125;; <span class="comment">// An object with two properties</span></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Map</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(o)); <span class="comment">// Same as new map([[&quot;x&quot;, 1], [&quot;y&quot;, 2]])</span></span><br></pre></td></tr></table></figure>
<p>Once you have created a Map object, you can query the value associated with a given key with get() and can add a new key&#x2F;value pair with set(). Remember, though, that a map is a set of keys, each of which has an associated value. This is not quite the same as a set of key&#x2F;value pairs. If you call set() with a key that already exists in the map, you will change the value associated with that key, not add a new key&#x2F;value mapping. In addition to get() and set(), the Map class also defines methods that are like Set methods: use has() to check whether a map includes the specified key; use delete() to remove a key (and its associated value) from the map; use clear() to remove all key&#x2F;value pairs from the map; and use the size property to find out how many keys a map contains.</p>
<blockquote>
<p>åˆ›å»º Map å¯¹è±¡åï¼Œå¯ä»¥ç”¨ get() æŸ¥è¯¢ç»™å®šé”®çš„å€¼ï¼Œå¹¶å¯ä»¥ç”¨ set() æ·»åŠ æ–°çš„é”®å€¼å¯¹ã€‚ä½†æ˜¯è¯·è®°ä½ï¼Œmap æ˜¯ä¸€ç»„é”®ï¼Œæ¯ä¸ªé”®æ˜ å°„ä¸€ä¸ªå€¼ã€‚è¿™ä¸ä¸€ç»„é”®å€¼å¯¹ä¸å¤ªç›¸åŒã€‚å¦‚æœè°ƒç”¨ set() æ·»åŠ ä¸€ä¸ª map ä¸­å·²å­˜åœ¨çš„é”®çš„é”®å€¼å¯¹ï¼Œä¼šæ”¹å˜è¿™ä¸ªé”®æ˜ å°„çš„å€¼ï¼Œè€Œä¸æ˜¯æ·»åŠ ä¸€ä¸ªæ–°çš„é”®å€¼å¯¹æ˜ å°„ã€‚é™¤äº† get() å’Œ set()ï¼ŒMap ç±»ä¹Ÿå®šä¹‰äº†ç±»ä¼¼äº Set çš„æ–¹æ³•ï¼šä½¿ç”¨ has() åˆ¤æ–­ map æ˜¯å¦åŒ…å«æŒ‡å®šé”®ï¼›ä½¿ç”¨ delete() åˆ é™¤ map ä¸­çš„ä¸€ä¸ªé”®ï¼ˆå’Œå®ƒæ˜ å°„çš„å€¼ï¼‰ï¼›ä½¿ç”¨ clear() æ¥ç§»é™¤ map ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹ï¼›ä½¿ç”¨ size å±æ€§çŸ¥é“ map ä¸­åŒ…å«å¤šå°‘ä¸ªé”®ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>();   <span class="comment">// Start with an empty map</span></span><br><span class="line">m.<span class="property">size</span>               <span class="comment">// =&gt; 0: empty maps have no keys</span></span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&quot;one&quot;</span>, <span class="number">1</span>);     <span class="comment">// Map the key &quot;one&quot; to the value 1</span></span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&quot;two&quot;</span>, <span class="number">2</span>);     <span class="comment">// And the key &quot;two&quot; to the value 2.</span></span><br><span class="line">m.<span class="property">size</span>               <span class="comment">// =&gt; 2: the map now has two keys</span></span><br><span class="line">m.<span class="title function_">get</span>(<span class="string">&quot;two&quot;</span>)         <span class="comment">// =&gt; 2: return the value associated with key &quot;two&quot;</span></span><br><span class="line">m.<span class="title function_">get</span>(<span class="string">&quot;three&quot;</span>)       <span class="comment">// =&gt; undefined: this key is not in the set</span></span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&quot;one&quot;</span>, <span class="literal">true</span>);  <span class="comment">// Change the value associated with an existing key</span></span><br><span class="line">m.<span class="property">size</span>               <span class="comment">// =&gt; 2: the size doesn&#x27;t change</span></span><br><span class="line">m.<span class="title function_">has</span>(<span class="string">&quot;one&quot;</span>)         <span class="comment">// =&gt; true: the map has a key &quot;one&quot;</span></span><br><span class="line">m.<span class="title function_">has</span>(<span class="literal">true</span>)          <span class="comment">// =&gt; false: the map does not have a key true</span></span><br><span class="line">m.<span class="title function_">delete</span>(<span class="string">&quot;one&quot;</span>)      <span class="comment">// =&gt; true: the key existed and deletion succeeded</span></span><br><span class="line">m.<span class="property">size</span>               <span class="comment">// =&gt; 1</span></span><br><span class="line">m.<span class="title function_">delete</span>(<span class="string">&quot;three&quot;</span>)    <span class="comment">// =&gt; false: failed to delete a nonexistent key</span></span><br><span class="line">m.<span class="title function_">clear</span>();           <span class="comment">// Remove all keys and values from the map</span></span><br></pre></td></tr></table></figure>
<p>Like the add() method of Set, the set() method of Map can be chained, which allows maps to be initialized without using arrays of arrays:</p>
<blockquote>
<p>åƒ Set çš„ add() æ–¹æ³•ä¸€æ ·ï¼ŒMap çš„ set() æ–¹æ³•ä¹Ÿå¯ä»¥é“¾å¼ä½¿ç”¨ï¼Œè¿™å…è®¸åœ¨ä¸ä½¿ç”¨æ•°ç»„çš„æƒ…å†µä¸‹åˆå§‹åŒ– mapï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>().<span class="title function_">set</span>(<span class="string">&quot;one&quot;</span>, <span class="number">1</span>).<span class="title function_">set</span>(<span class="string">&quot;two&quot;</span>, <span class="number">2</span>).<span class="title function_">set</span>(<span class="string">&quot;three&quot;</span>, <span class="number">3</span>);</span><br><span class="line">m.<span class="property">size</span>        <span class="comment">// =&gt; 3</span></span><br><span class="line">m.<span class="title function_">get</span>(<span class="string">&quot;two&quot;</span>)  <span class="comment">// =&gt; 2</span></span><br></pre></td></tr></table></figure>
<p>As with Set, any JavaScript value can be used as a key or a value in a Map. This includes null, undefined, and NaN, as well as reference types like objects and arrays. And as with the Set class, Map compares keys by identity, not by equality, so if you use an object or array as a key, it will be considered different from every other object and array, even those with exactly the same properties or elements:</p>
<blockquote>
<p>ä¸ Set ä¸€æ ·ï¼Œä»»ä½• JavaScript çš„å€¼éƒ½å¯ä»¥è¢«ç”¨ä½œ Map çš„é”®æˆ–å€¼ã€‚åŒ…æ‹¬ nullã€undefined å’Œ NaNï¼Œä¹ŸåŒ…æ‹¬åƒå¯¹è±¡å’Œæ•°ç»„è¿™ç§å¼•ç”¨ç±»å‹ã€‚å¹¶ä¸”å’Œ Set ç±»ä¸€æ ·ï¼ŒMap é€šè¿‡æ ‡è¯†æ¥æ¯”è¾ƒï¼Œä¸æ˜¯é€šè¿‡ç›¸ç­‰ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦ä½¿ç”¨å¯¹è±¡æˆ–æ•°ç»„ä½œä¸ºé”®ï¼Œå®ƒä»¬ä¼šè¢«è®¤ä¸ºä¸åŒäºä»»ä½•å…¶ä»–çš„å¯¹è±¡å’Œæ•°ç»„ï¼Œå³ä½¿é‚£äº›å±æ€§æˆ–å…ƒç´ å®Œå…¨ç›¸åŒçš„å¼•ç”¨ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>();   <span class="comment">// Start with an empty map.</span></span><br><span class="line">m.<span class="title function_">set</span>(&#123;&#125;, <span class="number">1</span>);        <span class="comment">// Map one empty object to the number 1.</span></span><br><span class="line">m.<span class="title function_">set</span>(&#123;&#125;, <span class="number">2</span>);        <span class="comment">// Map a different empty object to the number 2.</span></span><br><span class="line">m.<span class="property">size</span>               <span class="comment">// =&gt; 2: there are two keys in this map</span></span><br><span class="line">m.<span class="title function_">get</span>(&#123;&#125;)            <span class="comment">// =&gt; undefined: but this empty object is not a key</span></span><br><span class="line">m.<span class="title function_">set</span>(m, <span class="literal">undefined</span>); <span class="comment">// Map the map itself to the value undefined.</span></span><br><span class="line">m.<span class="title function_">has</span>(m)             <span class="comment">// =&gt; true: m is a key in itself</span></span><br><span class="line">m.<span class="title function_">get</span>(m)             <span class="comment">// =&gt; undefined: same value we&#x27;d get if m wasn&#x27;t a key</span></span><br></pre></td></tr></table></figure>
<p>Map objects are iterable, and each iterated value is a two-element array where the first element is a key and the second element is the value associated with that key. If you use the spread operator with a Map object, youâ€™ll get an array of arrays like the ones that we passed to the Map() constructor. And when iterating a map with a for&#x2F;of loop, it is idiomatic to use destructuring assignment to assign the key and value to separate variables:</p>
<blockquote>
<p>Map æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œæ¯ä¸€ä¸ªè¿­ä»£å€¼æ˜¯ä¸¤ä¸ªå…ƒç´ æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯é”®ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯é”®æ˜ å°„çš„å€¼ã€‚å¦‚æœå¯¹ Map å¯¹è±¡ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªæ•°ç»„çš„æ•°ç»„ï¼Œå°±åƒä¼ é€’ç»™ Map() æ„é€ å‡½æ•°çš„å®å‚ã€‚å½“ä½¿ç”¨ for&#x2F;of å¾ªç¯éå†ä¸€ä¸ª map æ—¶ï¼Œå¸¸ä½¿ç”¨è§£æ„èµ‹å€¼å°†é”®å’Œå€¼èµ‹å€¼ç»™å±•å¼€å˜é‡ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="string">&quot;x&quot;</span>, <span class="number">1</span>], [<span class="string">&quot;y&quot;</span>, <span class="number">2</span>]]);</span><br><span class="line">[...m]    <span class="comment">// =&gt; [[&quot;x&quot;, 1], [&quot;y&quot;, 2]]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [key, value] <span class="keyword">of</span> m) &#123;</span><br><span class="line">    <span class="comment">// On the first iteration, key will be &quot;x&quot; and value will be 1</span></span><br><span class="line">    <span class="comment">// On the second iteration, key will be &quot;y&quot; and value will be 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Like the Set class, the Map class iterates in insertion order. The first key&#x2F;value pair iterated will be the one least recently added to the map, and the last pair iterated will be the one most recently added.</p>
<blockquote>
<p>ä¸ Set ç±»ä¸€æ ·ï¼ŒMap ç±»æŒ‰ç…§æ’å…¥é¡ºåºè¿›è¡Œéå†ã€‚éå†çš„ç¬¬ä¸€ä¸ªé”®å€¼å¯¹å°†æ˜¯æœ€æ—©æ·»åŠ åˆ° map ä¸­çš„ï¼Œè€Œéå†çš„æœ€åä¸€ä¸ªé”®å€¼å¯¹å°†æ˜¯æœ€æ–°æ·»åŠ çš„ã€‚</p>
</blockquote>
<p>If you want to iterate just the keys or just the associated values of a map, use the keys() and values() methods: these return iterable objects that iterate keys and values, in insertion order. (The entries() method returns an iterable object that iterates key&#x2F;value pairs, but this is exactly the same as iterating the map directly.)</p>
<blockquote>
<p>å¦‚æœåªæƒ³éå† map ä¸­çš„é”®æˆ–è€…æ˜ å°„çš„å€¼ï¼Œä½¿ç”¨ keys() å’Œ values() æ–¹æ³•ï¼šå®ƒä»¬è¿”å›æŒ‰ç…§æ’å…¥é¡ºåºæ’åˆ—çš„é”®æˆ–å€¼å¯è¿­ä»£å¯¹è±¡ã€‚ï¼ˆentries() æ–¹æ³•è¿”å›ä¸€ä¸ªè¿­ä»£å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è¿­ä»£é”®å€¼å¯¹ï¼Œä½†è¿™ä¸ç›´æ¥è¿­ä»£ map å®Œå…¨ç›¸åŒã€‚ï¼‰</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[...m.<span class="title function_">keys</span>()]     <span class="comment">// =&gt; [&quot;x&quot;, &quot;y&quot;]: just the keys</span></span><br><span class="line">[...m.<span class="title function_">values</span>()]   <span class="comment">// =&gt; [1, 2]: just the values</span></span><br><span class="line">[...m.<span class="title function_">entries</span>()]  <span class="comment">// =&gt; [[&quot;x&quot;, 1], [&quot;y&quot;, 2]]: same as [...m]</span></span><br></pre></td></tr></table></figure>
<p>Map objects can also be iterated using the forEach() method that was first implemented by the Array class.</p>
<blockquote>
<p>Map å¯¹è±¡ä¹Ÿå¯ä»¥ä½¿ç”¨ forEach() æ–¹æ³•è¿›è¡Œéå†ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">m.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;  <span class="comment">// note value, key NOT key, value</span></span><br><span class="line">    <span class="comment">// On the first invocation, value will be 1 and key will be &quot;x&quot;</span></span><br><span class="line">    <span class="comment">// On the second invocation, value will be 2 and key will be &quot;y&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>It may seem strange that the value parameter comes before the key parameter in the code above, since with for&#x2F;of iteration, the key comes first. As noted at the start of this section, you can think of a map as a generalized array in which integer array indexes are replaced with arbitrary key values. The forEach() method of arrays passes the array element first and the array index second, so, by analogy, the forEach() method of a map passes the map value first and the map key second.</p>
<blockquote>
<p>ä¸Šé¢çš„ä»£ç ä¸­ value å‚æ•°ä½äº key å‚æ•°ä¹‹å‰ï¼Œè¿™ä¼¼ä¹å¾ˆå¥‡æ€ªï¼Œå› ä¸ºå¯¹äº for&#x2F;of è¿­ä»£ï¼Œkey æ”¾åœ¨å‰é¢ã€‚å¦‚æœ¬èŠ‚å¼€å¤´æ‰€è¿°ï¼Œå¯ä»¥å°†æ˜ å°„è§†ä¸ºé€šç”¨æ•°ç»„ï¼Œå…¶ä¸­æ•´æ•°æ•°ç»„ç´¢å¼•è¢«æ›¿æ¢ä¸ºä»»æ„é”®å€¼ã€‚æ•°ç»„çš„ forEach() æ–¹æ³•é¦–å…ˆä¼ é€’æ•°ç»„å…ƒç´ ï¼Œç„¶åä¼ é€’æ•°ç»„ç´¢å¼•ï¼Œå› æ­¤ï¼Œä»¥æ­¤ç±»æ¨ï¼Œmap çš„ forEach() æ–¹æ³•é¦–å…ˆä¼ é€’ map çš„å€¼ï¼Œç„¶åä¼ é€’ map é”®ã€‚</p>
</blockquote>
<h3 id="11-1-3-WeakMap-and-WeakSet"><a href="#11-1-3-WeakMap-and-WeakSet" class="headerlink" title="11.1.3 WeakMap and WeakSet"></a>11.1.3 WeakMap and WeakSet</h3><p>The WeakMap class is a variant (but not an actual subclass) of the Map class that does not prevent its key values from being garbage collected. Garbage collection is the process by which the JavaScript interpreter reclaims the memory of objects that are no longer â€œreachableâ€ and cannot be used by the program. A regular map holds â€œstrongâ€ references to its key values, and they remain reachable through the map, even if all other references to them are gone. The WeakMap, by contrast, keeps â€œweakâ€ references to its key values so that they are not reachable through the WeakMap, and their presence in the map does not prevent their memory from being reclaimed.</p>
<blockquote>
<p>WeakMap ç±»æ˜¯ Map ç±»çš„å˜ä½“ï¼ˆä½†ä¸æ˜¯çœŸæ­£çš„å­ç±»ï¼‰ï¼Œå®ƒä¸ä¼šé˜»æ­¢å…¶é”®å€¼è¢«åƒåœ¾å›æ”¶ã€‚åƒåœ¾å›æ”¶æ˜¯ JavaScript è§£é‡Šå™¨å›æ”¶ä¸å†â€œå¯è®¿é—®â€å¹¶ä¸”æ— æ³•ç”±ç¨‹åºä½¿ç”¨çš„å¯¹è±¡çš„å†…å­˜çš„è¿‡ç¨‹ã€‚å¸¸è§„ map ä¿ç•™å¯¹å…¶é”®å€¼çš„â€œå¼ºâ€å¼•ç”¨ï¼Œå³ä½¿å¯¹å®ƒä»¬çš„æ‰€æœ‰å…¶ä»–å¼•ç”¨éƒ½å·²æ¶ˆå¤±ï¼Œå®ƒä»¬ä»ç„¶å¯ä»¥é€šè¿‡æ˜ å°„è®¿é—®ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒWeakMap ä¿ç•™å¯¹å…¶é”®å€¼çš„â€œå¼±â€å¼•ç”¨ï¼Œä»¥ä½¿å®ƒä»¬æ— æ³•é€šè¿‡ WeakMap è·å¾—ï¼Œå¹¶ä¸”å®ƒä»¬åœ¨ map ä¸­çš„å­˜åœ¨ä¹Ÿä¸ä¼šé˜»æ­¢å¯¹å…¶å†…å­˜çš„å›æ”¶ã€‚</p>
</blockquote>
<p>The WeakMap() constructor is just like the Map() constructor, but there are some significant differences between WeakMap and Map:</p>
<blockquote>
<p>WeakMap() æ„é€ å‡½æ•°ç±»ä¼¼ Map() æ„é€ å‡½æ•°ï¼Œä½†æ˜¯æœ‰ä¸€äº›é‡è¦çš„ä¸åŒï¼š</p>
</blockquote>
<p>WeakMap keys must be objects or arrays; primitive values are not subject to garbage collection and cannot be used as keys.</p>
<blockquote>
<p>WeakMap é”®å¿…é¡»æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼›åŸå§‹å€¼ä¸å—åƒåœ¾å›æ”¶çš„é™åˆ¶ï¼Œä¸èƒ½ç”¨ä½œé”®ã€‚</p>
</blockquote>
<p>WeakMap implements only the get(), set(), has(), and delete() methods. In particular, WeakMap is not iterable and does not define keys(), values(), or forEach(). If WeakMap was iterable, then its keys would be reachable and it wouldnâ€™t be weak.</p>
<blockquote>
<p>WeakMap ä»…å®ç° get()ã€set()ã€has() å’Œ delete() æ–¹æ³•ã€‚ ç‰¹åˆ«æ˜¯ï¼ŒWeakMap æ˜¯ä¸å¯è¿­ä»£çš„ï¼Œå¹¶ä¸”æœªå®šä¹‰ keys()ã€values() æˆ– forEach()ã€‚å¦‚æœ WeakMap æ˜¯å¯è¿­ä»£çš„ï¼Œåˆ™å…¶é”®å°†æ˜¯å¯è®¿é—®çš„ï¼Œè¿™è®©å®ƒä¸ä¼šâ€œå¼±â€ã€‚</p>
</blockquote>
<p>Similarly, WeakMap does not implement the size property because the size of a WeakMap could change at any time as objects are garbage collected.</p>
<blockquote>
<p>åŒæ ·ï¼ŒWeakMap ä¹Ÿä¸å®ç° size å±æ€§ï¼Œå› ä¸ºéšç€å¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼ŒWeakMap çš„å¤§å°å¯èƒ½éšæ—¶æ›´æ”¹ã€‚</p>
</blockquote>
<p>The intended use of WeakMap is to allow you to associate values with objects without causing memory leaks. Suppose, for example, that you are writing a function that takes an object argument and needs to perform some time-consuming computation on that object. For efficiency, youâ€™d like to cache the computed value for later reuse. If you use a Map object to implement the cache, you will prevent any of the objects from ever being reclaimed, but by using a WeakMap, you avoid this problem. (You can often achieve a similar result using a private Symbol property to cache the computed value directly on the object. See Â§6.10.3.)</p>
<blockquote>
<p>WeakMap çš„é¢„æœŸç”¨é€”æ˜¯å…è®¸å°†å€¼ä¸å¯¹è±¡ç›¸å…³è”è€Œä¸ä¼šå¼•èµ·å†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ­£åœ¨ç¼–å†™ä¸€ä¸ªå¸¦æœ‰å¯¹è±¡å®å‚çš„å‡½æ•°ï¼Œå¹¶ä¸”éœ€è¦å¯¹è¯¥å¯¹è±¡æ‰§è¡Œä¸€äº›è€—æ—¶çš„è®¡ç®—ã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå¸Œæœ›å°†è®¡ç®—å‡ºçš„å€¼è¿›è¡Œç¼“å­˜ä»¥å¤‡åç”¨ã€‚å¦‚æœä½¿ç”¨ Map å¯¹è±¡å®ç°ç¼“å­˜ï¼Œåˆ™å°†é˜²æ­¢å›æ”¶ä»»ä½•å¯¹è±¡ï¼Œä½†æ˜¯é€šè¿‡ä½¿ç”¨ WeakMapï¼Œå¯ä»¥é¿å…æ­¤é—®é¢˜ã€‚ï¼ˆé€šå¸¸å¯ä»¥ä½¿ç”¨ç§æœ‰çš„ Symbol å±æ€§å°†è®¡ç®—çš„å€¼ç›´æ¥ç¼“å­˜åœ¨å¯¹è±¡ä¸Šï¼Œä»è€Œè·å¾—ç›¸ä¼¼çš„ç»“æœã€‚è¯·å‚è§ Â§6.10.3ã€‚ï¼‰</p>
</blockquote>
<p>WeakSet implements a set of objects that does not prevent those objects from being garbage collected. The WeakSet() constructor works like the Set() constructor, but WeakSet objects differ from Set objects in the same ways that WeakMap objects differ from Map objects:</p>
<blockquote>
<p>WeakSet å®ç°äº†ä¸€ç»„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ä¸ä¼šé˜»æ­¢åƒåœ¾å›æ”¶è¿™äº›å¯¹è±¡ã€‚ WeakSet() æ„é€ å‡½æ•°çš„å·¥ä½œæ–¹å¼ç±»ä¼¼äº Set() æ„é€ å‡½æ•°ï¼Œä½† WeakSet å¯¹è±¡ä¸ Set å¯¹è±¡çš„åŒºåˆ«ä¸ WeakMap å¯¹è±¡ä¸ Map å¯¹è±¡çš„åŒºåˆ«ç›¸åŒï¼š</p>
</blockquote>
<p>WeakSet does not allow primitive values as members.</p>
<blockquote>
<p>WeakSet ä¸å…è®¸åŸå§‹å€¼ä½œä¸ºæˆå‘˜ã€‚</p>
</blockquote>
<p>WeakSet implements only the add(), has(), and delete() methods and is not iterable.</p>
<blockquote>
<p>WeakSet ä»…å®ç° add()ã€has() å’Œ delete() æ–¹æ³•ï¼Œå¹¶ä¸”ä¸å¯è¿­ä»£ã€‚</p>
</blockquote>
<p>WeakSet does not have a size property.</p>
<blockquote>
<p>WeakSet æ²¡æœ‰ size å±æ€§ã€‚</p>
</blockquote>
<p>WeakSet is not frequently used: its use cases are like those for WeakMap. If you want to mark (or â€œbrandâ€) an object as having some special property or type, for example, you could add it to a WeakSet. Then, elsewhere, when you want to check for that property or type, you can test for membership in that WeakSet. Doing this with a regular set would prevent all marked objects from being garbage collected, but this is not a concern when using WeakSet.</p>
<blockquote>
<p>WeakSet å¹¶ä¸ç»å¸¸ä½¿ç”¨ï¼šå…¶ç”¨ä¾‹ç±»ä¼¼äº WeakMap çš„ç”¨ä¾‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦æ ‡è®°ï¼ˆæˆ–â€œçƒ™å°â€ï¼‰å¯¹è±¡å…·æœ‰æŸäº›ç‰¹æ®Šå±æ€§æˆ–ç±»å‹ï¼Œåˆ™å¯ä»¥å°†å…¶æ·»åŠ åˆ° WeakSet ä¸­ã€‚ç„¶åï¼Œåœ¨å…¶ä»–ä½ç½®ï¼Œå½“è¦æ£€æŸ¥è¯¥å±æ€§æˆ–ç±»å‹æ—¶ï¼Œå¯ä»¥æµ‹è¯•è¯¥ WeakSet ä¸­çš„æˆå‘˜èº«ä»½ã€‚ä½¿ç”¨å¸¸è§„ Set æ‰§è¡Œæ­¤æ“ä½œå°†é˜²æ­¢æ‰€æœ‰æ ‡è®°çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼Œä½†è¿™åœ¨ä½¿ç”¨ WeakSet æ—¶ä¸å¿…æ‹…å¿ƒã€‚</p>
</blockquote>
<h2 id="11-2-Typed-Arrays-and-Binary-Data"><a href="#11-2-Typed-Arrays-and-Binary-Data" class="headerlink" title="11.2 Typed Arrays and Binary Data"></a>11.2 Typed Arrays and Binary Data</h2><p>Regular JavaScript arrays can have elements of any type and can grow or shrink dynamically. JavaScript implementations perform lots of optimizations so that typical uses of JavaScript arrays are very fast. Nevertheless, they are still quite different from the array types of lower-level languages like C and Java. Typed arrays, which are new in ES6 [^3] are much closer to the low-level arrays of those languages. Typed arrays are not technically arrays (Array.isArray() returns false for them), but they implement all of the array methods described in Â§7.8 plus a few more of their own. They differ from regular arrays in some very important ways, however:</p>
<blockquote>
<p>å¸¸è§„ JavaScript æ•°ç»„å¯ä»¥å…·æœ‰ä»»ä½•ç±»å‹çš„å…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€å¢é•¿æˆ–æ”¶ç¼©ã€‚JavaScript å®ç°æ‰§è¡Œäº†å¤§é‡ä¼˜åŒ–ï¼Œå› æ­¤ JavaScript æ•°ç»„çš„å…¸å‹ç”¨æ³•éå¸¸å¿«ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬ä»ç„¶ä¸è¯¸å¦‚ C å’Œ Java çš„ä½çº§è¯­è¨€çš„æ•°ç»„ç±»å‹æœ‰å¾ˆå¤§ä¸åŒã€‚ ES6 [^3] ä¸­æ–°å¢çš„ç±»å‹åŒ–æ•°ç»„æ›´æ¥è¿‘é‚£äº›è¯­è¨€çš„ä½çº§æ•°ç»„ã€‚ä»ç±»å‹ä¸Šè®²ï¼Œç±»å‹åŒ–æ•°ç»„ä¸æ˜¯æ•°ç»„ï¼ˆArray.isArray() ä¸ºå…¶è¿”å›falseï¼‰ï¼Œä½†æ˜¯å®ƒä»¬å®ç°äº† Â§7.8 ä¸­æè¿°çš„æ‰€æœ‰æ•°ç»„æ–¹æ³•ä»¥åŠå®ƒä»¬è‡ªå·±çš„å…¶ä»–ä¸€äº›æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬åœ¨æŸäº›éå¸¸é‡è¦çš„æ–¹é¢ä¸å¸¸è§„æ•°ç»„æœ‰æ‰€ä¸åŒï¼š </p>
</blockquote>
<p>The elements of a typed array are all numbers. Unlike regular JavaScript numbers, however, typed arrays allow you to specify the type (signed and unsigned integers and IEEE-754 floating point) and size (8 bits to 64 bits) of the numbers to be stored in the array.</p>
<blockquote>
<p>ç±»å‹åŒ–æ•°ç»„çš„å…ƒç´ éƒ½æ˜¯æ•°å­—ã€‚ ä½†æ˜¯ï¼Œä¸å¸¸è§„ JavaScript æ•°å­—ä¸åŒï¼Œç±»å‹åŒ–æ•°ç»„å…è®¸æŒ‡å®šè¦å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„æ•°å­—çš„ç±»å‹ï¼ˆæœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°ä»¥åŠ IEEE-754 æµ®ç‚¹æ•°ï¼‰å’Œå¤§å°ï¼ˆ8 ä½è‡³ 64 ä½ï¼‰ã€‚ </p>
</blockquote>
<p>You must specify the length of a typed array when you create it, and that length can never change.</p>
<blockquote>
<p>åˆ›å»ºç±»å‹åŒ–æ•°ç»„æ—¶ï¼Œå¿…é¡»æŒ‡å®šå…¶é•¿åº¦ï¼Œå¹¶ä¸”è¯¥é•¿åº¦æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚ </p>
</blockquote>
<p>The elements of a typed array are always initialized to 0 when the array is created.</p>
<blockquote>
<p>åˆ›å»ºæ•°ç»„æ—¶ï¼Œç±»å‹åŒ–æ•°ç»„çš„å…ƒç´ å§‹ç»ˆä¼šåˆå§‹åŒ–ä¸º 0ã€‚</p>
</blockquote>
<h3 id="11-2-1-Typed-Array-Types"><a href="#11-2-1-Typed-Array-Types" class="headerlink" title="11.2.1 Typed Array Types"></a>11.2.1 Typed Array Types</h3><p>JavaScript does not define a TypedArray class. Instead, there are 11 kinds of typed arrays, each with a different element type and constructor:</p>
<blockquote>
<p>JavaScript æ²¡æœ‰å®šä¹‰ TypedArray ç±»ã€‚ç›¸åï¼Œæœ‰11ç§ç±»å‹åŒ–æ•°ç»„ï¼Œæ¯ç§ç±»å‹å…·æœ‰ä¸åŒçš„å…ƒç´ ç±»å‹å’Œæ„é€ å‡½æ•°ï¼š </p>
</blockquote>
<p>Constructor	Numeric type</p>
<p>Int8Array()</p>
<p>signed bytes</p>
<p>Uint8Array()</p>
<p>unsigned bytes</p>
<p>Uint8ClampedArray()</p>
<p>unsigned bytes without rollover</p>
<p>Int16Array()</p>
<p>signed 16-bit short integers</p>
<p>Uint16Array()</p>
<p>unsigned 16-bit short integers</p>
<p>Int32Array()</p>
<p>signed 32-bit integers</p>
<p>Uint32Array()</p>
<p>unsigned 32-bit integers</p>
<p>BigInt64Array()</p>
<p>signed 64-bit BigInt values (ES2020)</p>
<p>BigUint64Array()</p>
<p>unsigned 64-bit BigInt values (ES2020)</p>
<p>Float32Array()</p>
<p>32-bit floating-point value</p>
<p>Float64Array()</p>
<p>64-bit floating-point value: a regular JavaScript number</p>
<p>The types whose names begin with Int hold signed integers, of 1, 2, or 4 bytes (8, 16, or 32 bits). The types whose names begin with Uint hold unsigned integers of those same lengths. The â€œBigIntâ€ and â€œBigUintâ€ types hold 64-bit integers, represented in JavaScript as BigInt values (see Â§3.2.5). The types that begin with Float hold floating-point numbers. The elements of a Float64Array are of the same type as regular JavaScript numbers. The elements of a Float32Array have lower precision and a smaller range but require only half the memory. (This type is called float in C and Java.)</p>
<p>Uint8ClampedArray is a special-case variant on Uint8Array. Both of these types hold unsigned bytes and can represent numbers between 0 and 255. With Uint8Array, if you store a value larger than 255 or less than zero into an array element, it â€œwraps around,â€ and you get some other value. This is how computer memory works at a low level, so this is very fast. Uint8ClampedArray does some extra type checking so that, if you store a value greater than 255 or less than 0, it â€œclampsâ€ to 255 or 0 and does not wrap around. (This clamping behavior is required by the HTML <code>&lt;canvas&gt;</code> elementâ€™s low-level API for manipulating pixel colors.)</p>
<p>Each of the typed array constructors has a BYTES_PER_ELEMENT property with the value 1, 2, 4, or 8, depending on the type.</p>
<h3 id="11-2-2-Creating-Typed-Arrays"><a href="#11-2-2-Creating-Typed-Arrays" class="headerlink" title="11.2.2 Creating Typed Arrays"></a>11.2.2 Creating Typed Arrays</h3><p>The simplest way to create a typed array is to call the appropriate constructor with one numeric argument that specifies the number of elements you want in the array:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="number">1024</span>);    <span class="comment">// 1024 bytes</span></span><br><span class="line"><span class="keyword">let</span> matrix = <span class="keyword">new</span> <span class="title class_">Float64Array</span>(<span class="number">9</span>);    <span class="comment">// A 3x3 matrix</span></span><br><span class="line"><span class="keyword">let</span> point = <span class="keyword">new</span> <span class="title class_">Int16Array</span>(<span class="number">3</span>);       <span class="comment">// A point in 3D space</span></span><br><span class="line"><span class="keyword">let</span> rgba = <span class="keyword">new</span> <span class="title class_">Uint8ClampedArray</span>(<span class="number">4</span>); <span class="comment">// A 4-byte RGBA pixel value</span></span><br><span class="line"><span class="keyword">let</span> sudoku = <span class="keyword">new</span> <span class="title class_">Int8Array</span>(<span class="number">81</span>);      <span class="comment">// A 9x9 sudoku board</span></span><br></pre></td></tr></table></figure>
<p>When you create typed arrays in this way, the array elements are all guaranteed to be initialized to 0, 0n, or 0.0. But if you know the values you want in your typed array, you can also specify those values when you create the array. Each of the typed array constructors has static from() and of() factory methods that work like Array.from() and Array.of():</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> white = <span class="title class_">Uint8ClampedArray</span>.<span class="title function_">of</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);  <span class="comment">// RGBA opaque white</span></span><br></pre></td></tr></table></figure>
<p>Recall that the Array.from() factory method expects an array-like or iterable object as its first argument. The same is true for the typed array variants, except that the iterable or array-like object must also have numeric elements. Strings are iterable, for example, but it would make no sense to pass them to the from() factory method of a typed array.</p>
<p>If you are just using the one-argument version of from(), you can drop the .from and pass your iterable or array-like object directly to the constructor function, which behaves exactly the same. Note that both the constructor and the from() factory method allow you to copy existing typed arrays, while possibly changing the type:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ints = <span class="title class_">Uint32Array</span>.<span class="title function_">from</span>(white);  <span class="comment">// The same 4 numbers, but as ints</span></span><br></pre></td></tr></table></figure>
<p>When you create a new typed array from an existing array, iterable, or array-like object, the values may be truncated in order to fit the type constraints of your array. There are no warnings or errors when this happens:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Floats truncated to ints, longer ints truncated to 8 bits</span></span><br><span class="line"><span class="title class_">Uint8Array</span>.<span class="title function_">of</span>(<span class="number">1.23</span>, <span class="number">2.99</span>, <span class="number">45000</span>) <span class="comment">// =&gt; new Uint8Array([1, 2, 200])</span></span><br></pre></td></tr></table></figure>
<p>Finally, there is one more way to create typed arrays that involves the ArrayBuffer type. An ArrayBuffer is an opaque reference to a chunk of memory. You can create one with the constructor; just pass in the number of bytes of memory youâ€™d like to allocate:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">1024</span>*<span class="number">1024</span>);</span><br><span class="line">buffer.<span class="property">byteLength</span>   <span class="comment">// =&gt; 1024*1024; one megabyte of memory</span></span><br></pre></td></tr></table></figure>
<p>The ArrayBuffer class does not allow you to read or write any of the bytes that you have allocated. But you can create typed arrays that use the bufferâ€™s memory and that do allow you to read and write that memory. To do this, call the typed array constructor with an ArrayBuffer as the first argument, a byte offset within the array buffer as the second argument, and the array length (in elements, not in bytes) as the third argument. The second and third arguments are optional. If you omit both, then the array will use all of the memory in the array buffer. If you omit only the length argument, then your array will use all of the available memory between the start position and the end of the array. One more thing to bear in mind about this form of the typed array constructor: arrays must be memory aligned, so if you specify a byte offset, the value should be a multiple of the size of your type. The Int32Array() constructor requires a multiple of four, for example, and the Float64Array() requires a multiple of eight.</p>
<p>Given the ArrayBuffer created earlier, you could create typed arrays like these:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> asbytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(buffer);          <span class="comment">// Viewed as bytes</span></span><br><span class="line"><span class="keyword">let</span> asints = <span class="keyword">new</span> <span class="title class_">Int32Array</span>(buffer);           <span class="comment">// Viewed as 32-bit signed ints</span></span><br><span class="line"><span class="keyword">let</span> lastK = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(buffer, <span class="number">1023</span>*<span class="number">1024</span>); <span class="comment">// Last kilobyte as bytes</span></span><br><span class="line"><span class="keyword">let</span> ints2 = <span class="keyword">new</span> <span class="title class_">Int32Array</span>(buffer, <span class="number">1024</span>, <span class="number">256</span>); <span class="comment">// 2nd kilobyte as 256 integers</span></span><br></pre></td></tr></table></figure>
<p>These four typed arrays offer four different views into the memory represented by the ArrayBuffer. It is important to understand that all typed arrays have an underlying ArrayBuffer, even if you do not explicitly specify one. If you call a typed array constructor without passing a buffer object, a buffer of the appropriate size will be automatically created. As described later, the buffer property of any typed array refers to its underlying ArrayBuffer object. The reason to work directly with ArrayBuffer objects is that sometimes you may want to have multiple typed array views of a single buffer.</p>
<h3 id="11-2-3-Using-Typed-Arrays"><a href="#11-2-3-Using-Typed-Arrays" class="headerlink" title="11.2.3 Using Typed Arrays"></a>11.2.3 Using Typed Arrays</h3><p>Once you have created a typed array, you can read and write its elements with regular square-bracket notation, just as you would with any other array-like object:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Return the largest prime smaller than n, using the sieve of Eratosthenes</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sieve</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(n+<span class="number">1</span>);         <span class="comment">// a[x] will be 1 if x is composite</span></span><br><span class="line">    <span class="keyword">let</span> max = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">sqrt</span>(n));  <span class="comment">// Don&#x27;t do factors higher than this</span></span><br><span class="line">    <span class="keyword">let</span> p = <span class="number">2</span>;                           <span class="comment">// 2 is the first prime</span></span><br><span class="line">    <span class="keyword">while</span>(p &lt;= max) &#123;                    <span class="comment">// For primes less than max</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">2</span>*p; i &lt;= n; i += p) <span class="comment">// Mark multiples of p as composite</span></span><br><span class="line">            a[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(a[++p]) <span class="comment">/* empty */</span>;       <span class="comment">// The next unmarked index is prime</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(a[n]) n--;                     <span class="comment">// Loop backward to find the last prime</span></span><br><span class="line">    <span class="keyword">return</span> n;                            <span class="comment">// And return it</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The function here computes the largest prime number smaller than the number you specify. The code is exactly the same as it would be with a regular JavaScript array, but using Uint8Array() instead of Array() makes the code run more than four times faster and use eight times less memory in my testing.</p>
<p>Typed arrays are not true arrays, but they re-implement most array methods, so you can use them pretty much just like youâ€™d use regular arrays:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ints = <span class="keyword">new</span> <span class="title class_">Int16Array</span>(<span class="number">10</span>);       <span class="comment">// 10 short integers</span></span><br><span class="line">ints.<span class="title function_">fill</span>(<span class="number">3</span>).<span class="title function_">map</span>(<span class="function"><span class="params">x</span>=&gt;</span>x*x).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>)    <span class="comment">// =&gt; &quot;9999999999&quot;</span></span><br></pre></td></tr></table></figure>
<p>Remember that typed arrays have fixed lengths, so the length property is read-only, and methods that change the length of the array (such as push(), pop(), unshift(), shift(), and splice()) are not implemented for typed arrays. Methods that alter the contents of an array without changing the length (such as sort(), reverse(), and fill()) are implemented. Methods like map() and slice() that return new arrays return a typed array of the same type as the one they are called on.</p>
<h3 id="11-2-4-Typed-Array-Methods-and-Properties"><a href="#11-2-4-Typed-Array-Methods-and-Properties" class="headerlink" title="11.2.4 Typed Array Methods and Properties"></a>11.2.4 Typed Array Methods and Properties</h3><p>In addition to standard array methods, typed arrays also implement a few methods of their own. The set() method sets multiple elements of a typed array at once by copying the elements of a regular or typed array into a typed array:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="number">1024</span>);        <span class="comment">// A 1K buffer</span></span><br><span class="line"><span class="keyword">let</span> pattern = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]); <span class="comment">// An array of 4 bytes</span></span><br><span class="line">bytes.<span class="title function_">set</span>(pattern);      <span class="comment">// Copy them to the start of another byte array</span></span><br><span class="line">bytes.<span class="title function_">set</span>(pattern, <span class="number">4</span>);   <span class="comment">// Copy them again at a different offset</span></span><br><span class="line">bytes.<span class="title function_">set</span>([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], <span class="number">8</span>); <span class="comment">// Or just copy values direct from a regular array</span></span><br><span class="line">bytes.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">12</span>)       <span class="comment">// =&gt; new Uint8Array([0,1,2,3,0,1,2,3,0,1,2,3])</span></span><br></pre></td></tr></table></figure>
<p>The set() method takes an array or typed array as its first argument and an element offset as its optional second argument, which defaults to 0 if left unspecified. If you are copying values from one typed array to another, the operation will likely be extremely fast.</p>
<p>Typed arrays also have a subarray method that returns a portion of the array on which it is called:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ints = <span class="keyword">new</span> <span class="title class_">Int16Array</span>([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]);       <span class="comment">// 10 short integers</span></span><br><span class="line"><span class="keyword">let</span> last3 = ints.<span class="title function_">subarray</span>(ints.<span class="property">length</span>-<span class="number">3</span>, ints.<span class="property">length</span>);  <span class="comment">// Last 3 of them</span></span><br><span class="line">last3[<span class="number">0</span>]       <span class="comment">// =&gt; 7: this is the same as ints[7]</span></span><br></pre></td></tr></table></figure>
<p>subarray() takes the same arguments as the slice() method and seems to work the same way. But there is an important difference. slice() returns the specified elements in a new, independent typed array that does not share memory with the original array. subarray() does not copy any memory; it just returns a new view of the same underlying values:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ints[<span class="number">9</span>] = -<span class="number">1</span>;  <span class="comment">// Change a value in the original array and...</span></span><br><span class="line">last3[<span class="number">2</span>]       <span class="comment">// =&gt; -1: it also changes in the subarray</span></span><br></pre></td></tr></table></figure>
<p>The fact that the subarray() method returns a new view of an existing array brings us back to the topic of ArrayBuffers. Every typed array has three properties that relate to the underlying buffer:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">last3.<span class="property">buffer</span>                 <span class="comment">// The ArrayBuffer object for a typed array</span></span><br><span class="line">last3.<span class="property">buffer</span> === ints.<span class="property">buffer</span> <span class="comment">// =&gt; true: both are views of the same buffer</span></span><br><span class="line">last3.<span class="property">byteOffset</span>             <span class="comment">// =&gt; 14: this view starts at byte 14 of the buffer</span></span><br><span class="line">last3.<span class="property">byteLength</span>             <span class="comment">// =&gt; 6: this view is 6 bytes (3 16-bit ints) long</span></span><br><span class="line">last3.<span class="property">buffer</span>.<span class="property">byteLength</span>      <span class="comment">// =&gt; 20: but the underlying buffer has 20 bytes</span></span><br></pre></td></tr></table></figure>
<p>The buffer property is the ArrayBuffer of the array. byteOffset is the starting position of the arrayâ€™s data within the underlying buffer. And byteLength is the length of the arrayâ€™s data in bytes. For any typed array, a, this invariant should always be true:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.<span class="property">length</span> * a.<span class="property">BYTES_PER_ELEMENT</span> === a.<span class="property">byteLength</span>  <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>ArrayBuffers are just opaque chunks of bytes. You can access those bytes with typed arrays, but an ArrayBuffer is not itself a typed array. Be careful, however: you can use numeric array indexing with ArrayBuffers just as you can with any JavaScript object. Doing so does not give you access to the bytes in the buffer, but it can cause confusing bugs:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="number">8</span>);</span><br><span class="line">bytes[<span class="number">0</span>] = <span class="number">1</span>;           <span class="comment">// Set the first byte to 1</span></span><br><span class="line">bytes.<span class="property">buffer</span>[<span class="number">0</span>]         <span class="comment">// =&gt; undefined: buffer doesn&#x27;t have index 0</span></span><br><span class="line">bytes.<span class="property">buffer</span>[<span class="number">1</span>] = <span class="number">255</span>;  <span class="comment">// Try incorrectly to set a byte in the buffer</span></span><br><span class="line">bytes.<span class="property">buffer</span>[<span class="number">1</span>]         <span class="comment">// =&gt; 255: this just sets a regular JS property</span></span><br><span class="line">bytes[<span class="number">1</span>]                <span class="comment">// =&gt; 0: the line above did not set the byte</span></span><br></pre></td></tr></table></figure>
<p>We saw previously that you can create an ArrayBuffer with the ArrayBuffer() constructor and then create typed arrays that use that buffer. Another approach is to create an initial typed array, then use the buffer of that array to create other views:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bytes = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="number">1024</span>);            <span class="comment">// 1024 bytes</span></span><br><span class="line"><span class="keyword">let</span> ints = <span class="keyword">new</span> <span class="title class_">Uint32Array</span>(bytes.<span class="property">buffer</span>);    <span class="comment">// or 256 integers</span></span><br><span class="line"><span class="keyword">let</span> floats = <span class="keyword">new</span> <span class="title class_">Float64Array</span>(bytes.<span class="property">buffer</span>); <span class="comment">// or 128 doubles</span></span><br></pre></td></tr></table></figure>
<h3 id="11-2-5-DataView-and-Endianness"><a href="#11-2-5-DataView-and-Endianness" class="headerlink" title="11.2.5 DataView and Endianness"></a>11.2.5 DataView and Endianness</h3><p>Typed arrays allow you to view the same sequence of bytes in chunks of 8, 16, 32, or 64 bits. This exposes the â€œendiannessâ€: the order in which bytes are arranged into longer words. For efficiency, typed arrays use the native endianness of the underlying hardware. On little-endian systems, the bytes of a number are arranged in an ArrayBuffer from least significant to most significant. On big-endian platforms, the bytes are arranged from most significant to least significant. You can determine the endianness of the underlying platform with code like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// If the integer 0x00000001 is arranged in memory as 01 00 00 00, then</span></span><br><span class="line"><span class="comment">// we&#x27;re on a little-endian platform. On a big-endian platform, we&#x27;d get</span></span><br><span class="line"><span class="comment">// bytes 00 00 00 01 instead.</span></span><br><span class="line"><span class="keyword">let</span> littleEndian = <span class="keyword">new</span> <span class="title class_">Int8Array</span>(<span class="keyword">new</span> <span class="title class_">Int32Array</span>([<span class="number">1</span>]).<span class="property">buffer</span>)[<span class="number">0</span>] === <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>Today, the most common CPU architectures are little-endian. Many network protocols, and some binary file formats, require big-endian byte ordering, however. If youâ€™re using typed arrays with data that came from the network or from a file, you canâ€™t just assume that the platform endianness matches the byte order of the data. In general, when working with external data, you can use Int8Array and Uint8Array to view the data as an array of individual bytes, but you should not use the other typed arrays with multibyte word sizes. Instead, you can use the DataView class, which defines methods for reading and writing values from an ArrayBuffer with explicitly specified byte ordering:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Assume we have a typed array of bytes of binary data to process. First,</span></span><br><span class="line"><span class="comment">// we create a DataView object so we can flexibly read and write</span></span><br><span class="line"><span class="comment">// values from those bytes</span></span><br><span class="line"><span class="keyword">let</span> view = <span class="keyword">new</span> <span class="title class_">DataView</span>(bytes.<span class="property">buffer</span>,</span><br><span class="line">                        bytes.<span class="property">byteOffset</span>,</span><br><span class="line">                        bytes.<span class="property">byteLength</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> int = view.<span class="title function_">getInt32</span>(<span class="number">0</span>);     <span class="comment">// Read big-endian signed int from byte 0</span></span><br><span class="line">int = view.<span class="title function_">getInt32</span>(<span class="number">4</span>, <span class="literal">false</span>);  <span class="comment">// Next int is also big-endian</span></span><br><span class="line">int = view.<span class="title function_">getUint32</span>(<span class="number">8</span>, <span class="literal">true</span>);  <span class="comment">// Next int is little-endian and unsigned</span></span><br><span class="line">view.<span class="title function_">setUint32</span>(<span class="number">8</span>, int, <span class="literal">false</span>);  <span class="comment">// Write it back in big-endian format</span></span><br></pre></td></tr></table></figure>
<p>DataView defines 10 get methods for each of the 10 typed array classes (excluding Uint8ClampedArray). They have names like getInt16(), getUint32(), getBigInt64(), and getFloat64(). The first argument is the byte offset within the ArrayBuffer at which the value begins. All of these getter methods, other than getInt8() and getUint8(), accept an optional boolean value as their second argument. If the second argument is omitted or is false, big-endian byte ordering is used. If the second argument is true, little-endian ordering is used.</p>
<p>DataView also defines 10 corresponding Set methods that write values into the underlying ArrayBuffer. The first argument is the offset at which the value begins. The second argument is the value to write. Each of the methods, except setInt8() and setUint8(), accepts an optional third argument. If the argument is omitted or is false, the value is written in big-endian format with the most significant byte first. If the argument is true, the value is written in little-endian format with the least significant byte first.</p>
<p>Typed arrays and the DataView class give you all the tools you need to process binary data and enable you to write JavaScript programs that do things like decompressing ZIP files or extracting metadata from JPEG files.</p>
<h2 id="11-3-Pattern-Matching-with-Regular-Expressions"><a href="#11-3-Pattern-Matching-with-Regular-Expressions" class="headerlink" title="11.3 Pattern Matching with Regular Expressions"></a>11.3 Pattern Matching with Regular Expressions</h2><p>A regular expression is an object that describes a textual pattern. The JavaScript RegExp class represents regular expressions, and both String and RegExp define methods that use regular expressions to perform powerful pattern-matching and search-and-replace functions on text. In order to use the RegExp API effectively, however, you must also learn how to describe patterns of text using the regular expression grammar, which is essentially a mini programming language of its own. Fortunately, the JavaScript regular expression grammar is quite similar to the grammar used by many other programming languages, so you may already be familiar with it. (And if you are not, the effort you invest in learning JavaScript regular expressions will probably be useful to you in other programming contexts as well.)</p>
<blockquote>
<p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯æè¿°æ–‡æœ¬æ¨¡å‹çš„å¯¹è±¡ã€‚JavaScript RegExp ç±»è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œè€Œ String å’Œ RegExp éƒ½å®šä¹‰äº†ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹æ–‡æœ¬æ‰§è¡Œå¼ºå¤§çš„æ¨¡å¼åŒ¹é…å’Œæœç´¢æ›¿æ¢åŠŸèƒ½çš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œä¸ºäº†æœ‰æ•ˆåœ°ä½¿ç”¨ RegExp APIï¼Œè¿˜å¿…é¡»å­¦ä¹ å¦‚ä½•ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•æè¿°æ–‡æœ¬æ¨¡å‹ï¼Œè¯¥è¯­æ³•æœ¬è´¨ä¸Šæ˜¯å…¶è‡ªèº«çš„ä¸€ç§å°å‹ç¼–ç¨‹è¯­è¨€ã€‚å¹¸è¿çš„æ˜¯ï¼ŒJavaScript æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ä¸è®¸å¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€æ‰€ä½¿ç”¨çš„è¯­æ³•éå¸¸ç›¸ä¼¼ï¼Œå› æ­¤æ‚¨å¯èƒ½å·²ç»å¾ˆç†Ÿæ‚‰å®ƒã€‚ï¼ˆå¦‚æœä¸æ˜¯è¿™æ ·ï¼Œåˆ™åœ¨å­¦ä¹  JavaScript æ­£åˆ™è¡¨è¾¾å¼ä¸ŠæŠ•å…¥çš„ç²¾åŠ›ä¹Ÿå¯èƒ½æœ‰åŠ©äºåœ¨ä½ åœ¨å…¶ä»–ç¼–ç¨‹ç¯å¢ƒä½¿ç”¨ã€‚ï¼‰ </p>
</blockquote>
<p>The subsections that follow describe the regular expression grammar first, and then, after explaining how to write regular expressions, they explain how you can use them with methods of the String and RegExp classes.</p>
<blockquote>
<p>æ¥ä¸‹æ¥çš„å°èŠ‚é¦–å…ˆæè¿°æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ï¼Œç„¶ååœ¨è§£é‡Šäº†å¦‚ä½•ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼ä¹‹åï¼Œå®ƒä»¬è§£é‡Šäº†å¦‚ä½•å°†å…¶ä¸ String å’Œ RegExp ç±»çš„æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚ </p>
</blockquote>
<h3 id="11-3-1-Defining-Regular-Expressions"><a href="#11-3-1-Defining-Regular-Expressions" class="headerlink" title="11.3.1 Defining Regular Expressions"></a>11.3.1 Defining Regular Expressions</h3><p>In JavaScript, regular expressions are represented by RegExp objects. RegExp objects may be created with the RegExp() constructor, of course, but they are more often created using a special literal syntax. Just as string literals are specified as characters within quotation marks, regular expression literals are specified as characters within a pair of slash (&#x2F;) characters. Thus, your JavaScript code may contain lines like this:</p>
<blockquote>
<p>åœ¨ JavaScript ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä»¥ RegExp å¯¹è±¡å‘ˆç°ã€‚å½“ç„¶ï¼ŒRegExp å¯¹è±¡å¯èƒ½ä¼šä½¿ç”¨ RegExp() æ„é€ å‡½æ•°åˆ›å»ºï¼Œä½†æ˜¯ç»å¸¸ä¼šä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å­—é¢é‡è¯­æ³•æ¥åˆ›å»ºã€‚å’Œå­—ç¬¦ä¸²æ–‡å­—è¢«æŒ‡å®šä¸ºå¼•å·å†…çš„å­—ç¬¦ä¸€æ ·ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ–‡å­—è¢«æŒ‡å®šä¸ºä¸€å¯¹æ–œæ  (&#x2F;) å­—ç¬¦å†…çš„å­—ç¬¦ã€‚å› æ­¤ä½ çš„ Javascript ä»£ç å¯èƒ½ä¼šæœ‰è¿™æ ·çš„ä¸€è¡Œ:</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pattern = <span class="regexp">/s$/</span>;</span><br></pre></td></tr></table></figure>

<p>This line creates a new RegExp object and assigns it to the variable pattern. This particular RegExp object matches any string that ends with the letter â€œs.â€ This regular expression could have equivalently been defined with the RegExp() constructor, like this:</p>
<blockquote>
<p>è¿™è¡Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ RegExp å¯¹è±¡å¹¶ä¸”å°†å˜é‡æ¨¡å‹èµ‹å€¼ç»™å®ƒã€‚è¿™ä¸ªç‰¹æ®Šçš„ RegExp å¯¹è±¡åŒ¹é…ä»»ä½•ä»¥å­—æ¯â€œsâ€ç»“å°¾çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç­‰æ•ˆäºå¦‚ä¸‹ç”¨ RegExp() æ„é€ å‡½æ•°å®šä¹‰çš„å¯¹è±¡ï¼š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pattern = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;s$&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>Regular-expression pattern specifications consist of a series of characters. Most characters, including all alphanumeric characters, simply describe characters to be matched literally. Thus, the regular expression &#x2F;java&#x2F; matches any string that contains the substring â€œjavaâ€. Other characters in regular expressions are not matched literally but have special significance. For example, the regular expression &#x2F;s$&#x2F; contains two characters. The first, â€œsâ€, matches itself literally. The second, â€œ$â€, is a special meta-character that matches the end of a string. Thus, this regular expression matches any string that contains the letter â€œsâ€ as its last character.</p>
<blockquote>
<p>æ­£åˆ™è¡¨è¾¾å¼è§„å®šç”±ä¸€ç³»åˆ—ç¬¦å·è¡¨ç¤ºã€‚å¤§å¤šæ•°å­—ç¬¦åŒ…æ‹¬æ‰€æœ‰å­—æ¯æ•°å­—å­—ç¬¦ï¼Œéƒ½åªæ˜¯æŒ‰å­—é¢æè¿°è¦åŒ¹é…çš„å­—ç¬¦ã€‚ä½†æ˜¯æ­£åˆ™è¡¨è¾¾å¼ <code>/java/</code> åŒ¹é…ä»»ä½•åŒ…å«â€œjavaâ€çš„å­—ç¬¦ä¸²ã€‚ä½†æ˜¯ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å…¶ä»–å­—ç¬¦å…·æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œä¸æ˜¯å­—é¢åŒ¹é…çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ <code>/s$/</code> ä¸­åŒ…å«ä¸¤ä¸ªå­—ç¬¦ã€‚ç¬¬ä¸€ä¸ªâ€œsâ€åŒ¹é…å®ƒè‡ªèº«çš„å­—é¢é‡ã€‚ç¬¬äºŒä¸ªâ€œ$â€ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å…ƒå­—ç¬¦ï¼ˆmeta-characterï¼‰åŒ¹é…çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„ç»“å°¾ã€‚å› æ­¤è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ˜¯ä»¥â€œsâ€ç»“å°¾çš„å­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<p>As weâ€™ll see, regular expressions can also have one or more flag characters that affect how they work. Flags are specified following the second slash character in RegExp literals, or as a second string argument to the RegExp() constructor. If we wanted to match strings that end with â€œsâ€ or â€œSâ€, for example, we could use the i flag with our regular expression to indicate that we want case-insensitive matching:</p>
<p>let pattern &#x3D; &#x2F;s$&#x2F;i;<br>The following sections describe the various characters and meta-characters used in JavaScript regular expressions.</p>
<p>LITERAL CHARACTERS<br>All alphabetic characters and digits match themselves literally in regular expressions. JavaScript regular expression syntax also supports certain nonalphabetic characters through escape sequences that begin with a backslash <code>(\)</code>. For example, the sequence \n matches a literal newline character in a string. Table 11-1 lists these characters.</p>
<p>Table 11-1. Regular-expression literal characters<br>Character	Matches<br>Alphanumeric character</p>
<p>Itself</p>
<p>\0</p>
<p>The NUL character (\u0000)</p>
<p>\t</p>
<p>Tab (\u0009)</p>
<p>\n</p>
<p>Newline (\u000A)</p>
<p>\v</p>
<p>Vertical tab (\u000B)</p>
<p>\f</p>
<p>Form feed (\u000C)</p>
<p>\r</p>
<p>Carriage return (\u000D)</p>
<p>\xnn</p>
<p>The Latin character specified by the hexadecimal number nn; for example, \x0A is the same as \n.</p>
<p>\uxxxx</p>
<p>The Unicode character specified by the hexadecimal number xxxx; for example, \u0009 is the same as \t.</p>
<p>\u{n}</p>
<p>The Unicode character specified by the codepoint n, where n is one to six hexadecimal digits between 0 and 10FFFF. Note that this syntax is only supported in regular expressions that use the u flag.</p>
<p>\cX</p>
<p>The control character ^X; for example, \cJ is equivalent to the newline character \n.</p>
<p>A number of punctuation characters have special meanings in regular expressions. They are:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^ $ . * + ? = ! : | \ / ( ) [ ] &#123; &#125;</span><br></pre></td></tr></table></figure>
<p>The meanings of these characters are discussed in the sections that follow. Some of these characters have special meaning only within certain contexts of a regular expression and are treated literally in other contexts. As a general rule, however, if you want to include any of these punctuation characters literally in a regular expression, you must precede them with a <code>\</code>. Other punctuation characters, such as quotation marks and @, do not have special meaning and simply match themselves literally in a regular expression.</p>
<p>If you canâ€™t remember exactly which punctuation characters need to be escaped with a backslash, you may safely place a backslash before any punctuation character. On the other hand, note that many letters and numbers have special meaning when preceded by a backslash, so any letters or numbers that you want to match literally should not be escaped with a backslash. To include a backslash character literally in a regular expression, you must escape it with a backslash, of course. For example, the following regular expression matches any string that includes a backslash: <code>/\\/</code>. (And if you use the RegExp() constructor, keep in mind that any backslashes in your regular expression need to be doubled, since strings also use backslashes as an escape character.)</p>
<p>CHARACTER CLASSES<br>Individual literal characters can be combined into character classes by placing them within square brackets. A character class matches any one character that is contained within it. Thus, the regular expression <code>/[abc]/</code> matches any one of the letters a, b, or c. Negated character classes can also be defined; these match any character except those contained within the brackets. A negated character class is specified by placing a caret (^) as the first character inside the left bracket. The RegExp <code>/[^abc]/</code> matches any one character other than a, b, or c. Character classes can use a hyphen to indicate a range of characters. To match any one lowercase character from the Latin alphabet, use <code>/[a-z]/</code>, and to match any letter or digit from the Latin alphabet, use <code>/[a-zA-Z0-9]/.</code> (And if you want to include an actual hyphen in your character class, simply make it the last character before the right bracket.)</p>
<p>Because certain character classes are commonly used, the JavaScript regular-expression syntax includes special characters and escape sequences to represent these common classes. For example, \s matches the space character, the tab character, and any other Unicode whitespace character; \S matches any character that is not Unicode whitespace. Table 11-2 lists these characters and summarizes character-class syntax. (Note that several of these character-class escape sequences match only ASCII characters and have not been extended to work with Unicode characters. You can, however, explicitly define your own Unicode character classes; for example, <code>/[\u0400-\u04FF]/</code> matches any one Cyrillic character.)</p>
<p>Table 11-2. Regular expression character classes<br>Character	Matches<br>[â€¦]</p>
<p>Any one character between the brackets.</p>
<p>[^â€¦]</p>
<p>Any one character not between the brackets.</p>
<p>.</p>
<p>Any character except newline or another Unicode line terminator. Or, if the RegExp uses the s flag, then a period matches any character, including line terminators.</p>
<p>\w</p>
<p>Any ASCII word character. Equivalent to [a-zA-Z0-9_].</p>
<p>\W</p>
<p>Any character that is not an ASCII word character. Equivalent to [^a-zA-Z0-9_].</p>
<p>\s</p>
<p>Any Unicode whitespace character.</p>
<p>\S</p>
<p>Any character that is not Unicode whitespace.</p>
<p>\d</p>
<p>Any ASCII digit. Equivalent to [0-9].</p>
<p>\D</p>
<p>Any character other than an ASCII digit. Equivalent to [^0-9].</p>
<p>[\b]</p>
<p>A literal backspace (special case).</p>
<p>Note that the special character-class escapes can be used within square brackets. \s matches any whitespace character, and \d matches any digit, so <code>/[\s\d]/</code> matches any one whitespace character or digit. Note that there is one special case. As youâ€™ll see later, the \b escape has a special meaning. When used within a character class, however, it represents the backspace character. Thus, to represent a backspace character literally in a regular expression, use the character class with one element: <code>/[\b]/</code>.</p>
<p>UNICODE CHARACTER CLASSES<br>In ES2018, if a regular expression uses the u flag, then character classes \p{â€¦} and its negation \P{â€¦} are supported. (As of early 2020, this is implemented by Node, Chrome, Edge, and Safari, but not Firefox.) These character classes are based on properties defined by the Unicode standard, and the set of characters they represent may change as Unicode evolves.</p>
<p>The \d character class matches only ASCII digits. If you want to match one decimal digit from any of the worldâ€™s writing systems, you can use &#x2F;\p{Decimal_Number}&#x2F;u. And if you want to match any one character that is not a decimal digit in any language, you can capitalize the p and write \P{Decimal_Number}. If you want to match any number-like character, including fractions and roman numerals, you can use \p{Number}. Note that â€œDecimal_Numberâ€ and â€œNumberâ€ are not specific to JavaScript or to regular expression grammar: it is the name of a category of characters defined by the Unicode standard.</p>
<p>The \w character class only works for ASCII text, but with \p, we can approximate an internationalized version like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[\p&#123;<span class="title class_">Alphabetic</span>&#125;\p&#123;<span class="title class_">Decimal</span>_Number&#125;\p&#123;<span class="title class_">Mark</span>&#125;]/u</span><br></pre></td></tr></table></figure>
<p>(Though to be fully compatible with the complexity of the worldâ€™s languages, we really need to add in the categories â€œConnector_Punctuationâ€ and â€œJoin_Controlâ€ as well.)</p>
<p>As a final example, the \p syntax also allows us to define regular expressions that match characters from a particular alphabet or script:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> greekLetter = <span class="regexp">/\p&#123;Script=Greek&#125;/u</span>;</span><br><span class="line"><span class="keyword">let</span> cyrillicLetter = <span class="regexp">/\p&#123;Script=Cyrillic&#125;/u</span>;</span><br></pre></td></tr></table></figure>
<h4 id="REPETITION"><a href="#REPETITION" class="headerlink" title="REPETITION"></a>REPETITION</h4><p>With the regular expression syntax youâ€™ve learned so far, you can describe a two-digit number as <code>/\d\d/</code> and a four-digit number as <code>/\d\d\d\d/</code>. But you donâ€™t have any way to describe, for example, a number that can have any number of digits or a string of three letters followed by an optional digit. These more complex patterns use regular expression syntax that specifies how many times an element of a regular expression may be repeated.</p>
<p>The characters that specify repetition always follow the pattern to which they are being applied. Because certain types of repetition are quite commonly used, there are special characters to represent these cases. For example, + matches one or more occurrences of the previous pattern.</p>
<p>Table 11-3 summarizes the repetition syntax.</p>
<p>Table 11-3. Regular expression repetition characters<br>Character	Meaning<br>{n,m}</p>
<p>Match the previous item at least n times but no more than m times.</p>
<p>{n,}</p>
<p>Match the previous item n or more times.</p>
<p>{n}</p>
<p>Match exactly n occurrences of the previous item.</p>
<p>?</p>
<p>Match zero or one occurrences of the previous item. That is, the previous item is optional. Equivalent to {0,1}.</p>
<ul>
<li></li>
</ul>
<p>Match one or more occurrences of the previous item. Equivalent to {1,}.</p>
<ul>
<li></li>
</ul>
<p>Match zero or more occurrences of the previous item. Equivalent to {0,}.</p>
<p>The following lines show some examples:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/\d&#123;2,4&#125;/</span>; <span class="comment">// Match between two and four digits</span></span><br><span class="line">r = <span class="regexp">/\w&#123;3&#125;\d?/</span>;    <span class="comment">// Match exactly three word characters and an optional digit</span></span><br><span class="line">r = <span class="regexp">/\s+java\s+/</span>;  <span class="comment">// Match &quot;java&quot; with one or more spaces before and after</span></span><br><span class="line">r = <span class="regexp">/[^(]*/</span>;       <span class="comment">// Match zero or more characters that are not open parens</span></span><br></pre></td></tr></table></figure>
<p>Note that in all of these examples, the repetition specifiers apply to the single character or character class that precedes them. If you want to match repetitions of more complicated expressions, youâ€™ll need to define a group with parentheses, which are explained in the following sections.</p>
<p>Be careful when using the * and ? repetition characters. Since these characters may match zero instances of whatever precedes them, they are allowed to match nothing. For example, the regular expression &#x2F;a*&#x2F; actually matches the string â€œbbbbâ€ because the string contains zero occurrences of the letter a!</p>
<h4 id="NON-GREEDY-REPETITION"><a href="#NON-GREEDY-REPETITION" class="headerlink" title="NON-GREEDY REPETITION"></a>NON-GREEDY REPETITION</h4><p>The repetition characters listed in Table 11-3 match as many times as possible while still allowing any following parts of the regular expression to match. We say that this repetition is â€œgreedy.â€ It is also possible to specify that repetition should be done in a non-greedy way. Simply follow the repetition character or characters with a question mark: ??, +?, *?, or even {1,5}?. For example, the regular expression &#x2F;a+&#x2F; matches one or more occurrences of the letter a. When applied to the string â€œaaaâ€, it matches all three letters. But &#x2F;a+?&#x2F; matches one or more occurrences of the letter a, matching as few characters as necessary. When applied to the same string, this pattern matches only the first letter a.</p>
<p>Using non-greedy repetition may not always produce the results you expect. Consider the pattern &#x2F;a+b&#x2F;, which matches one or more aâ€™s, followed by the letter b. When applied to the string â€œaaabâ€, it matches the entire string. Now letâ€™s use the non-greedy version: &#x2F;a+?b&#x2F;. This should match the letter b preceded by the fewest number of aâ€™s possible. When applied to the same string â€œaaabâ€, you might expect it to match only one a and the last letter b. In fact, however, this pattern matches the entire string, just like the greedy version of the pattern. This is because regular expression pattern matching is done by finding the first position in the string at which a match is possible. Since a match is possible starting at the first character of the string, shorter matches starting at subsequent characters are never even considered.</p>
<h4 id="ALTERNATION-GROUPING-AND-REFERENCES"><a href="#ALTERNATION-GROUPING-AND-REFERENCES" class="headerlink" title="ALTERNATION, GROUPING, AND REFERENCES"></a>ALTERNATION, GROUPING, AND REFERENCES</h4><p>The regular expression grammar includes special characters for specifying alternatives, grouping subexpressions, and referring to previous subexpressions. The | character separates alternatives. For example, <code>/ab|cd|ef/</code> matches the string â€œabâ€ or the string â€œcdâ€ or the string â€œefâ€. And <code>/\d&#123;3&#125;|[a-z]&#123;4&#125;/ </code>matches either three digits or four lowercase letters.</p>
<p>Note that alternatives are considered left to right until a match is found. If the left alternative matches, the right alternative is ignored, even if it would have produced a â€œbetterâ€ match. Thus, when the pattern <code>/a|ab/</code> is applied to the string â€œabâ€, it matches only the first letter.</p>
<p>Parentheses have several purposes in regular expressions. One purpose is to group separate items into a single subexpression so that the items can be treated as a single unit by <code>|, *, +, ?,</code> and so on. For example, <code>/java(script)?/</code> matches â€œjavaâ€ followed by the optional â€œscriptâ€. And <code>/(ab|cd)+|ef/</code> matches either the string â€œefâ€ or one or more repetitions of either of the strings â€œabâ€ or â€œcdâ€.</p>
<p>Another purpose of parentheses in regular expressions is to define subpatterns within the complete pattern. When a regular expression is successfully matched against a target string, it is possible to extract the portions of the target string that matched any particular parenthesized subpattern. (Youâ€™ll see how these matching substrings are obtained later in this section.) For example, suppose you are looking for one or more lowercase letters followed by one or more digits. You might use the pattern <code>/[a-z]+\d+/</code>. But suppose you only really care about the digits at the end of each match. If you put that part of the pattern in parentheses (<code>/[a-z]+(\d+)/</code>), you can extract the digits from any matches you find, as explained later.</p>
<p>A related use of parenthesized subexpressions is to allow you to refer back to a subexpression later in the same regular expression. This is done by following a <code>\</code> character by a digit or digits. The digits refer to the position of the parenthesized subexpression within the regular expression. For example, <code>\1</code> refers back to the first subexpression, and <code>\3</code> refers to the third. Note that, because subexpressions can be nested within others, it is the position of the left parenthesis that is counted. In the following regular expression, for example, the nested subexpression <code>([Ss]cript)</code> is referred to as <code>\2</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/([<span class="title class_">Jj</span>]<span class="title function_">ava</span>([<span class="title class_">Ss</span>]cript)?)\sis\<span class="title function_">s</span>(fun\w*)/</span><br></pre></td></tr></table></figure>
<p>A reference to a previous subexpression of a regular expression does not refer to the pattern for that subexpression but rather to the text that matched the pattern. Thus, references can be used to enforce a constraint that separate portions of a string contain exactly the same characters. For example, the following regular expression matches zero or more characters within single or double quotes. However, it does not require the opening and closing quotes to match (i.e., both single quotes or both double quotes):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[<span class="string">&#x27;&quot;][^&#x27;</span><span class="string">&quot;]*[&#x27;&quot;</span>]/</span><br></pre></td></tr></table></figure>
<p>To require the quotes to match, use a reference:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/([<span class="string">&#x27;&quot;])[^&#x27;</span><span class="string">&quot;]*\1/</span></span><br></pre></td></tr></table></figure>
<p>The \1 matches whatever the first parenthesized subexpression matched. In this example, it enforces the constraint that the closing quote match the opening quote. This regular expression does not allow single quotes within double-quoted strings or vice versa. (It is not legal to use a reference within a character class, so you cannot write: <code>/([&#39;&quot;])[^\1]*\1/</code>.)</p>
<p>When we cover the RegExp API later, youâ€™ll see that this kind of reference to a parenthesized subexpression is a powerful feature of regular-expression search-and-replace operations.</p>
<p>It is also possible to group items in a regular expression without creating a numbered reference to those items. Instead of simply grouping the items within ( and ), begin the group with (?: and end it with ). Consider the following pattern:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/([<span class="title class_">Jj</span>]<span class="title function_">ava</span>(?:[<span class="title class_">Ss</span>]cript)?)\sis\<span class="title function_">s</span>(fun\w*)/</span><br></pre></td></tr></table></figure>
<p>In this example, the subexpression <code>(?:[Ss]cript)</code> is used simply for grouping, so the ? repetition character can be applied to the group. These modified parentheses do not produce a reference, so in this regular expression, <code>\2</code> refers to the text matched by <code>(fun\w*)</code>.</p>
<p>Table 11-4 summarizes the regular expression alternation, grouping, and referencing operators.</p>
<p>Table 11-4. Regular expression alternation, grouping, and reference characters<br>Character	Meaning<br>|</p>
<p>Alternation: match either the subexpression to the left or the subexpression to the right.</p>
<p>(â€¦)</p>
<p>Grouping: group items into a single unit that can be used with *, +, ?, |, and so on. Also remember the characters that match this group for use with later references.</p>
<p>(?:â€¦)</p>
<p>Grouping only: group items into a single unit, but do not remember the characters that match this group.</p>
<p>\n</p>
<p>Match the same characters that were matched when group number n was first matched. Groups are subexpressions within (possibly nested) parentheses. Group numbers are assigned by counting left parentheses from left to right. Groups formed with (?: are not numbered.</p>
<p>NAMED CAPTURE GROUPS<br>ES2018 standardizes a new feature that can make regular expressions more self-documenting and easier to understand. This new feature is known as â€œnamed capture groupsâ€ and it allows us to associate a name with each left parenthesis in a regular expression so that we can refer to the matching text by name rather than by number. Equally important: using names allows someone reading the code to more easily understand the purpose of that portion of the regular expression. As of early 2020, this feature is implemented in Node, Chrome, Edge, and Safari, but not yet by Firefox.</p>
<p>To name a group, use (?&lt;â€¦&gt; instead of ( and put the name between the angle brackets. For example, here is a regular expression that might be used to check the formatting of the final line of a US mailing address:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;city&gt;\w+) (?&lt;state&gt;[A-Z]&#123;<span class="number">2</span>&#125;) (?&lt;zipcode&gt;\d&#123;<span class="number">5</span>&#125;)(?&lt;zip9&gt;-\d&#123;<span class="number">4</span>&#125;)?/</span><br></pre></td></tr></table></figure>
<p>Notice how much context the group names provide to make the regular expression easier to understand. In Â§11.3.2, when we discuss the String replace() and match() methods and the RegExp exec() method, youâ€™ll see how the RegExp API allows you to refer to the text that matches each of these groups by name rather than by position.</p>
<p>If you want to refer back to a named capture group within a regular expression, you can do that by name as well. In the preceding example, we were able to use a regular expression â€œbackreferenceâ€ to write a RegExp that would match a single- or double-quoted string where the open and close quotes had to match. We could rewrite this RegExp using a named capturing group and a named backreference like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;quote&gt;[<span class="string">&#x27;&quot;])[^&#x27;</span><span class="string">&quot;]*\k&lt;quote&gt;/</span></span><br></pre></td></tr></table></figure>
<p>The <code>\k&lt;quote&gt;</code> is a named backreference to the named group that captures the open quotation mark.</p>
<p>SPECIFYING MATCH POSITION<br>As described earlier, many elements of a regular expression match a single character in a string. For example, \s matches a single character of whitespace. Other regular expression elements match the positions between characters instead of actual characters. \b, for example, matches an ASCII word boundaryâ€”the boundary between a \w (ASCII word character) and a \W (nonword character), or the boundary between an ASCII word character and the beginning or end of a string.4 Elements such as \b do not specify any characters to be used in a matched string; what they do specify, however, are legal positions at which a match can occur. Sometimes these elements are called regular expression anchors because they anchor the pattern to a specific position in the search string. The most commonly used anchor elements are ^, which ties the pattern to the beginning of the string, and $, which anchors the pattern to the end of the string.</p>
<p>For example, to match the word â€œJavaScriptâ€ on a line by itself, you can use the regular expression &#x2F;^JavaScript$&#x2F;. If you want to search for â€œJavaâ€ as a word by itself (not as a prefix, as it is in â€œJavaScriptâ€), you can try the pattern &#x2F;\sJava\s&#x2F;, which requires a space before and after the word. But there are two problems with this solution. First, it does not match â€œJavaâ€ at the beginning or the end of a string, but only if it appears with space on either side. Second, when this pattern does find a match, the matched string it returns has leading and trailing spaces, which is not quite whatâ€™s needed. So instead of matching actual space characters with \s, match (or anchor to) word boundaries with \b. The resulting expression is &#x2F;\bJava\b&#x2F;. The element \B anchors the match to a location that is not a word boundary. Thus, the pattern <code>/\B[Ss]cript/</code> matches â€œJavaScriptâ€ and â€œpostscriptâ€, but not â€œscriptâ€ or â€œScriptingâ€.</p>
<p>You can also use arbitrary regular expressions as anchor conditions. If you include an expression within (?&#x3D; and ) characters, it is a lookahead assertion, and it specifies that the enclosed characters must match, without actually matching them. For example, to match the name of a common programming language, but only if it is followed by a colon, you could use <code>/[Jj]ava([Ss]cript)?(?=\:)/</code>. This pattern matches the word â€œJavaScriptâ€ in â€œJavaScript: The Definitive Guideâ€, but it does not match â€œJavaâ€ in â€œJava in a Nutshellâ€ because it is not followed by a colon.</p>
<p>If you instead introduce an assertion with (?!, it is a negative lookahead assertion, which specifies that the following characters must not match. For example, <code>/Java(?!Script)([A-Z]\w*)/</code> matches â€œJavaâ€ followed by a capital letter and any number of additional ASCII word characters, as long as â€œJavaâ€ is not followed by â€œScriptâ€. It matches â€œJavaBeansâ€ but not â€œJavaneseâ€, and it matches â€œJavaScripâ€ but not â€œJavaScriptâ€ or â€œJavaScripterâ€. Table 11-5 summarizes regular expression anchors.</p>
<p>Table 11-5. Regular expression anchor characters<br>Character	Meaning<br>^</p>
<p>Match the beginning of the string or, with the m flag, the beginning of a line.</p>
<p>$</p>
<p>Match the end of the string and, with the m flag, the end of a line.</p>
<p>\b</p>
<p>Match a word boundary. That is, match the position between a \w character and a \W character or between a \w character and the beginning or end of a string. (Note, however, that [\b] matches backspace.)</p>
<p>\B</p>
<p>Match a position that is not a word boundary.</p>
<p>(?&#x3D;p)</p>
<p>A positive lookahead assertion. Require that the following characters match the pattern p, but do not include those characters in the match.</p>
<p>(?!p)</p>
<p>A negative lookahead assertion. Require that the following characters do not match the pattern p.</p>
<h4 id="LOOKBEHIND-ASSERTIONS"><a href="#LOOKBEHIND-ASSERTIONS" class="headerlink" title="LOOKBEHIND ASSERTIONS"></a>LOOKBEHIND ASSERTIONS</h4><p>ES2018 extends regular expression syntax to allow â€œlookbehindâ€ assertions. These are like lookahead assertions but refer to text before the current match position. As of early 2020, these are implemented in Node, Chrome, and Edge, but not Firefox or Safari.</p>
<p>Specify a positive lookbehind assertion with (?&lt;&#x3D;â€¦) and a negative lookbehind assertion with (?&lt;!â€¦). For example, if you were working with US mailing addresses, you could match a 5-digit zip code, but only when it follows a two-letter state abbreviation, like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;= [A-Z]&#123;<span class="number">2</span>&#125; )\d&#123;<span class="number">5</span>&#125;/</span><br></pre></td></tr></table></figure>
<p>And you could match a string of digits that is not preceded by a Unicode currency symbol with a negative lookbehind assertion like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;![\p&#123;<span class="title class_">Currency</span>_Symbol&#125;\d.])\d+(\.\d+)?/u</span><br></pre></td></tr></table></figure>
<h4 id="FLAGS"><a href="#FLAGS" class="headerlink" title="FLAGS"></a>FLAGS</h4><p>Every regular expression can have one or more flags associated with it to alter its matching behavior. JavaScript defines six possible flags, each of which is represented by a single letter. Flags are specified after the second &#x2F; character of a regular expression literal or as a string passed as the second argument to the RegExp() constructor. The supported flags and their meanings are:</p>
<p>g<br>The g flag indicates that the regular expression is â€œglobalâ€â€”that is, that we intend to use it to find all matches within a string rather than just finding the first match. This flag does not alter the way that pattern matching is done, but, as weâ€™ll see later, it does alter the behavior of the String match() method and the RegExp exec() method in important ways.</p>
<p>i<br>The i flag specifies that pattern matching should be case-insensitive.</p>
<p>m<br>The m flag specifies that matching should be done in â€œmultilineâ€ mode. It says that the RegExp will be used with multiline strings and that the ^ and $ anchors should match both the beginning and end of the string and also the beginning and end of individual lines within the string.</p>
<p>s<br>Like the m flag, the s flag is also useful when working with text that includes newlines. Normally, a â€œ.â€ in a regular expression matches any character except a line terminator. When the s flag is used, however, â€œ.â€ will match any character, including line terminators. The s flag was added to JavaScript in ES2018 and, as of early 2020, is supported in Node, Chrome, Edge, and Safari, but not Firefox.</p>
<p>u<br>The u flag stands for Unicode, and it makes the regular expression match full Unicode codepoints rather than matching 16-bit values. This flag was introduced in ES6, and you should make a habit of using it on all regular expressions unless you have some reason not to. If you do not use this flag, then your RegExps will not work well with text that includes emoji and other characters (including many Chinese characters) that require more than 16 bits. Without the u flag, the â€œ.â€ character matches any 1 UTF-16 16-bit value. With the flag, however, â€œ.â€ matches one Unicode codepoint, including those that have more than 16 bits. Setting the u flag on a RegExp also allows you to use the new \u{â€¦} escape sequence for Unicode character and also enables the \p{â€¦} notation for Unicode character classes.</p>
<p>y<br>The y flag indicates that the regular expression is â€œstickyâ€ and should match at the beginning of a string or at the first character following the previous match. When used with a regular expression that is designed to find a single match, it effectively treats that regular expression as if it begins with ^ to anchor it to the beginning of the string. This flag is more useful with regular expressions that are used repeatedly to find all matches within a string. In this case, it causes special behavior of the String match() method and the RegExp exec() method to enforce that each subsequent match is anchored to the string position at which the last one ended.</p>
<p>These flags may be specified in any combination and in any order. For example, if you want your regular expression to be Unicode-aware to do case-insensitive matching and you intend to use it to find multiple matches within a string, you would specify the flags uig, gui, or any other permutation of these three letters.</p>
<h3 id="11-3-2-String-Methods-for-Pattern-Matching"><a href="#11-3-2-String-Methods-for-Pattern-Matching" class="headerlink" title="11.3.2 String Methods for Pattern Matching"></a>11.3.2 String Methods for Pattern Matching</h3><p>Until now, we have been describing the grammar used to define regular expressions, but not explaining how those regular expressions can actually be used in JavaScript code. We are now switching to cover the API for using RegExp objects. This section begins by explaining the string methods that use regular expressions to perform pattern matching and search-and-replace operations. The sections that follow this one continue the discussion of pattern matching with JavaScript regular expressions by discussing the RegExp object and its methods and properties.</p>
<p>SEARCH()<br>Strings support four methods that use regular expressions. The simplest is search(). This method takes a regular expression argument and returns either the character position of the start of the first matching substring or âˆ’1 if there is no match:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;JavaScript&quot;</span>.<span class="title function_">search</span>(<span class="regexp">/script/ui</span>)  <span class="comment">// =&gt; 4</span></span><br><span class="line"><span class="string">&quot;Python&quot;</span>.<span class="title function_">search</span>(<span class="regexp">/script/ui</span>)      <span class="comment">// =&gt; -1</span></span><br></pre></td></tr></table></figure>
<p>If the argument to search() is not a regular expression, it is first converted to one by passing it to the RegExp constructor. search() does not support global searches; it ignores the g flag of its regular expression argument.</p>
<p>REPLACE()<br>The replace() method performs a search-and-replace operation. It takes a regular expression as its first argument and a replacement string as its second argument. It searches the string on which it is called for matches with the specified pattern. If the regular expression has the g flag set, the replace() method replaces all matches in the string with the replacement string; otherwise, it replaces only the first match it finds. If the first argument to replace() is a string rather than a regular expression, the method searches for that string literally rather than converting it to a regular expression with the RegExp() constructor, as search() does. As an example, you can use replace() as follows to provide uniform capitalization of the word â€œJavaScriptâ€ throughout a string of text:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// No matter how it is capitalized, replace it with the correct capitalization</span></span><br><span class="line">text.<span class="title function_">replace</span>(<span class="regexp">/javascript/gi</span>, <span class="string">&quot;JavaScript&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>replace() is more powerful than this, however. Recall that parenthesized subexpressions of a regular expression are numbered from left to right and that the regular expression remembers the text that each subexpression matches. If a $ followed by a digit appears in the replacement string, replace() replaces those two characters with the text that matches the specified subexpression. This is a very useful feature. You can use it, for example, to replace quotation marks in a string with other characters:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A quote is a quotation mark, followed by any number of</span></span><br><span class="line"><span class="comment">// nonquotation mark characters (which we capture), followed</span></span><br><span class="line"><span class="comment">// by another quotation mark.</span></span><br><span class="line"><span class="keyword">let</span> quote = <span class="regexp">/&quot;([^&quot;]*)&quot;/g</span>;</span><br><span class="line"><span class="comment">// Replace the straight quotation marks with guillemets</span></span><br><span class="line"><span class="comment">// leaving the quoted text (stored in $1) unchanged.</span></span><br><span class="line"><span class="string">&#x27;He said &quot;stop&quot;&#x27;</span>.<span class="title function_">replace</span>(quote, <span class="string">&#x27;Â«$1Â»&#x27;</span>)  <span class="comment">// =&gt; &#x27;He said Â«stopÂ»&#x27;</span></span><br></pre></td></tr></table></figure>
<p>If your RegExp uses named capture groups, then you can refer to the matching text by name rather than by number:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> quote = <span class="regexp">/&quot;(?&lt;quotedText&gt;[^&quot;]*)&quot;/g</span>;</span><br><span class="line"><span class="string">&#x27;He said &quot;stop&quot;&#x27;</span>.<span class="title function_">replace</span>(quote, <span class="string">&#x27;Â«$&lt;quotedText&gt;Â»&#x27;</span>)  <span class="comment">// =&gt; &#x27;He said Â«stopÂ»&#x27;</span></span><br></pre></td></tr></table></figure>
<p>Instead of passing a replacement string as the second argument to replace(), you can also pass a function that will be invoked to compute the replacement value. The replacement function is invoked with a number of arguments. First is the entire matched text. Next, if the RegExp has capturing groups, then the substrings that were captured by those groups are passed as arguments. The next argument is the position within the string at which the match was found. After that, the entire string that replace() was called on is passed. And finally, if the RegExp contained any named capture groups, the last argument to the replacement function is an object whose property names match the capture group names and whose values are the matching text. As an example, here is code that uses a replacement function to convert decimal integers in a string to hexadecimal:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;15 times 15 is 225&quot;</span>;</span><br><span class="line">s.<span class="title function_">replace</span>(<span class="regexp">/\d+/gu</span>, <span class="function"><span class="params">n</span> =&gt;</span> <span class="built_in">parseInt</span>(n).<span class="title function_">toString</span>(<span class="number">16</span>))  <span class="comment">// =&gt; &quot;f times f is e1&quot;</span></span><br></pre></td></tr></table></figure>
<p>MATCH()<br>The match() method is the most general of the String regular expression methods. It takes a regular expression as its only argument (or converts its argument to a regular expression by passing it to the RegExp() constructor) and returns an array that contains the results of the match, or null if no match is found. If the regular expression has the g flag set, the method returns an array of all matches that appear in the string. For example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;7 plus 8 equals 15&quot;</span>.<span class="title function_">match</span>(<span class="regexp">/\d+/g</span>)  <span class="comment">// =&gt; [&quot;7&quot;, &quot;8&quot;, &quot;15&quot;]</span></span><br></pre></td></tr></table></figure>
<p>If the regular expression does not have the g flag set, match() does not do a global search; it simply searches for the first match. In this nonglobal case, match() still returns an array, but the array elements are completely different. Without the g flag, the first element of the returned array is the matching string, and any remaining elements are the substrings matching the parenthesized capturing groups of the regular expression. Thus, if match() returns an array a, a[0] contains the complete match, a[1] contains the substring that matched the first parenthesized expression, and so on. To draw a parallel with the replace() method, a[1] is the same string as $1, a[2] is the same as $2, and so on.</p>
<p>For example, consider parsing a URL5 with the following code:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A very simple URL parsing RegExp</span></span><br><span class="line"><span class="keyword">let</span> url = <span class="regexp">/(\w+):\/\/([\w.]+)\/(\S*)/</span>;</span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&quot;Visit my blog at http://www.example.com/~david&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> match = text.<span class="title function_">match</span>(url);</span><br><span class="line"><span class="keyword">let</span> fullurl, protocol, host, path;</span><br><span class="line"><span class="keyword">if</span> (match !== <span class="literal">null</span>) &#123;</span><br><span class="line">    fullurl = match[<span class="number">0</span>];   <span class="comment">// fullurl == &quot;http://www.example.com/~david&quot;</span></span><br><span class="line">    protocol = match[<span class="number">1</span>];  <span class="comment">// protocol == &quot;http&quot;</span></span><br><span class="line">    host = match[<span class="number">2</span>];      <span class="comment">// host == &quot;www.example.com&quot;</span></span><br><span class="line">    path = match[<span class="number">3</span>];      <span class="comment">// path == &quot;~david&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In this non-global case, the array returned by match() also has some object properties in addition to the numbered array elements. The input property refers to the string on which match() was called. The index property is the position within that string at which the match starts. And if the regular expression contains named capture groups, then the returned array also has a groups property whose value is an object. The properties of this object match the names of the named groups, and the values are the matching text. We could rewrite the previous URL parsing example, for example, like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="regexp">/(?&lt;protocol&gt;\w+):\/\/(?&lt;host&gt;[\w.]+)\/(?&lt;path&gt;\S*)/</span>;</span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&quot;Visit my blog at http://www.example.com/~david&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> match = text.<span class="title function_">match</span>(url);</span><br><span class="line">match[<span class="number">0</span>]               <span class="comment">// =&gt; &quot;http://www.example.com/~david&quot;</span></span><br><span class="line">match.<span class="property">input</span>            <span class="comment">// =&gt; text</span></span><br><span class="line">match.<span class="property">index</span>            <span class="comment">// =&gt; 17</span></span><br><span class="line">match.<span class="property">groups</span>.<span class="property">protocol</span>  <span class="comment">// =&gt; &quot;http&quot;</span></span><br><span class="line">match.<span class="property">groups</span>.<span class="property">host</span>      <span class="comment">// =&gt; &quot;www.example.com&quot;</span></span><br><span class="line">match.<span class="property">groups</span>.<span class="property">path</span>      <span class="comment">// =&gt; &quot;~david&quot;</span></span><br></pre></td></tr></table></figure>
<p>Weâ€™ve seen that match() behaves quite differently depending on whether the RegExp has the g flag set or not. There are also important but less dramatic differences in behavior when the y flag is set. Recall that the y flag makes a regular expression â€œstickyâ€ by constraining where in the string matches can begin. If a RegExp has both the g and y flags set, then match() returns an array of matched strings, just as it does when g is set without y. But the first match must begin at the start of the string, and each subsequent match must begin at the character immediately following the previous match.</p>
<p>If the y flag is set without g, then match() tries to find a single match, and, by default, this match is constrained to the start of the string. You can change this default match start position, however, by setting the lastIndex property of the RegExp object at the index at which you want to match at. If a match is found, then this lastIndex will be automatically updated to the first character after the match, so if you call match() again, in this case, it will look for a subsequent match. (lastIndex may seem like a strange name for a property that specifies the position at which to begin the next match. We will see it again when we cover the RegExp exec() method, and its name may make more sense in that context.)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vowel = <span class="regexp">/[aeiou]/y</span>;  <span class="comment">// Sticky vowel match</span></span><br><span class="line"><span class="string">&quot;test&quot;</span>.<span class="title function_">match</span>(vowel)      <span class="comment">// =&gt; null: &quot;test&quot; does not begin with a vowel</span></span><br><span class="line">vowel.<span class="property">lastIndex</span> = <span class="number">1</span>;     <span class="comment">// Specify a different match position</span></span><br><span class="line"><span class="string">&quot;test&quot;</span>.<span class="title function_">match</span>(vowel)[<span class="number">0</span>]   <span class="comment">// =&gt; &quot;e&quot;: we found a vowel at position 1</span></span><br><span class="line">vowel.<span class="property">lastIndex</span>          <span class="comment">// =&gt; 2: lastIndex was automatically updated</span></span><br><span class="line"><span class="string">&quot;test&quot;</span>.<span class="title function_">match</span>(vowel)      <span class="comment">// =&gt; null: no vowel at position 2</span></span><br><span class="line">vowel.<span class="property">lastIndex</span>          <span class="comment">// =&gt; 0: lastIndex gets reset after failed match</span></span><br></pre></td></tr></table></figure>
<p>It is worth noting that passing a non-global regular expression to the match() method of a string is the same as passing the string to the exec() method of the regular expression: the returned array and its properties are the same in both cases.</p>
<p>MATCHALL()<br>The matchAll() method is defined in ES2020, and as of early 2020 is implemented by modern web browsers and Node. matchAll() expects a RegExp with the g flag set. Instead of returning an array of matching substrings like match() does, however, it returns an iterator that yields the kind of match objects that match() returns when used with a non-global RegExp. This makes matchAll() the easiest and most general way to loop through all matches within a string.</p>
<p>You might use matchAll() to loop through the words in a string of text like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// One or more Unicode alphabetic characters between word boundaries</span></span><br><span class="line"><span class="keyword">const</span> words = <span class="regexp">/\b\p&#123;Alphabetic&#125;+\b/gu</span>; <span class="comment">// \p is not supported in Firefox yet</span></span><br><span class="line"><span class="keyword">const</span> text = <span class="string">&quot;This is a naÃ¯ve test of the matchAll() method.&quot;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> word <span class="keyword">of</span> text.<span class="title function_">matchAll</span>(words)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Found &#x27;<span class="subst">$&#123;word[<span class="number">0</span>]&#125;</span>&#x27; at index <span class="subst">$&#123;word.index&#125;</span>.`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You can set the lastIndex property of a RegExp object to tell matchAll() what index in the string to begin matching at. Unlike the other pattern-matching methods, however, matchAll() never modifies the lastIndex property of the RegExp you call it on, and this makes it much less likely to cause bugs in your code.</p>
<p>SPLIT()<br>The last of the regular expression methods of the String object is split(). This method breaks the string on which it is called into an array of substrings, using the argument as a separator. It can be used with a string argument like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;123,456,789&quot;</span>.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>)           <span class="comment">// =&gt; [&quot;123&quot;, &quot;456&quot;, &quot;789&quot;]</span></span><br></pre></td></tr></table></figure>
<p>The split() method can also take a regular expression as its argument, and this allows you to specify more general separators. Here we call it with a separator that includes an arbitrary amount of whitespace on either side:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;1, 2, 3,\n4, 5&quot;</span>.<span class="title function_">split</span>(<span class="regexp">/\s*,\s*/</span>)  <span class="comment">// =&gt; [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;]</span></span><br></pre></td></tr></table></figure>
<p>Surprisingly, if you call split() with a RegExp delimiter and the regular expression includes capturing groups, then the text that matches the capturing groups will be included in the returned array. For example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> htmlTag = <span class="regexp">/&lt;([^&gt;]+)&gt;/</span>;  <span class="comment">// &lt; followed by one or more non-&gt;, followed by &gt;</span></span><br><span class="line"><span class="string">&quot;Testing&lt;br/&gt;1,2,3&quot;</span>.<span class="title function_">split</span>(htmlTag)  <span class="comment">// =&gt; [&quot;Testing&quot;, &quot;br/&quot;, &quot;1,2,3&quot;]</span></span><br></pre></td></tr></table></figure>
<h3 id="11-3-3-The-RegExp-Class"><a href="#11-3-3-The-RegExp-Class" class="headerlink" title="11.3.3 The RegExp Class"></a>11.3.3 The RegExp Class</h3><p>This section documents the RegExp() constructor, the properties of RegExp instances, and two important pattern-matching methods defined by the RegExp class.</p>
<p>The RegExp() constructor takes one or two string arguments and creates a new RegExp object. The first argument to this constructor is a string that contains the body of the regular expressionâ€”the text that would appear within slashes in a regular-expression literal. Note that both string literals and regular expressions use the \ character for escape sequences, so when you pass a regular expression to RegExp() as a string literal, you must replace each \ character with \. The second argument to RegExp() is optional. If supplied, it indicates the regular expression flags. It should be g, i, m, s, u, y, or any combination of those letters.</p>
<p>For example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Find all five-digit numbers in a string. Note the double \\ in this case.</span></span><br><span class="line"><span class="keyword">let</span> zipcode = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;\\d&#123;5&#125;&quot;</span>, <span class="string">&quot;g&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>The RegExp() constructor is useful when a regular expression is being dynamically created and thus cannot be represented with the regular expression literal syntax. For example, to search for a string entered by the user, a regular expression must be created at runtime with RegExp().</p>
<p>Instead of passing a string as the first argument to RegExp(), you can also pass a RegExp object. This allows you to copy a regular expression and change its flags:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> exactMatch = <span class="regexp">/JavaScript/</span>;</span><br><span class="line"><span class="keyword">let</span> caseInsensitive = <span class="keyword">new</span> <span class="title class_">RegExp</span>(exactMatch, <span class="string">&quot;i&quot;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="REGEXP-PROPERTIES"><a href="#REGEXP-PROPERTIES" class="headerlink" title="REGEXP PROPERTIES"></a>REGEXP PROPERTIES</h4><p>RegExp objects have the following properties:</p>
<p>source<br>This read-only property is the source text of the regular expression: the characters that appear between the slashes in a RegExp literal.</p>
<p>flags<br>This read-only property is a string that specifies the set of letters that represent the flags for the RegExp.</p>
<p>global<br>A read-only boolean property that is true if the g flag is set.</p>
<p>ignoreCase<br>A read-only boolean property that is true if the i flag is set.</p>
<p>multiline<br>A read-only boolean property that is true if the m flag is set.</p>
<p>dotAll<br>A read-only boolean property that is true if the s flag is set.</p>
<p>unicode<br>A read-only boolean property that is true if the u flag is set.</p>
<p>sticky<br>A read-only boolean property that is true if the y flag is set.</p>
<p>lastIndex<br>This property is a read&#x2F;write integer. For patterns with the g or y flags, it specifies the character position at which the next search is to begin. It is used by the exec() and test() methods, described in the next two subsections.</p>
<p>TEST()<br>The test() method of the RegExp class is the simplest way to use a regular expression. It takes a single string argument and returns true if the string matches the pattern or false if it does not match.</p>
<p>test() works by simply calling the (much more complicated) exec() method described in the next section and returning true if exec() returns a non-null value. Because of this, if you use test() with a RegExp that uses the g or y flags, then its behavior depends on the value of the lastIndex property of the RegExp object, which can change unexpectedly. See â€œThe lastIndex Property and RegExp Reuseâ€ for more details.</p>
<p>EXEC()<br>The RegExp exec() method is the most general and powerful way to use regular expressions. It takes a single string argument and looks for a match in that string. If no match is found, it returns null. If a match is found, however, it returns an array just like the array returned by the match() method for non-global searches. Element 0 of the array contains the string that matched the regular expression, and any subsequent array elements contain the substrings that matched any capturing groups. The returned array also has named properties: the index property contains the character position at which the match occurred, and the input property specifies the string that was searched, and the groups property, if defined, refers to an object that holds the substrings matching the any named capturing groups.</p>
<p>Unlike the String match() method, exec() returns the same kind of array whether or not the regular expression has the global g flag. Recall that match() returns an array of matches when passed a global regular expression. exec(), by contrast, always returns a single match and provides complete information about that match. When exec() is called on a regular expression that has either the global g flag or the sticky y flag set, it consults the lastIndex property of the RegExp object to determine where to start looking for a match. (And if the y flag is set, it also constrains the match to begin at that position.) For a newly created RegExp object, lastIndex is 0, and the search begins at the start of the string. But each time exec() successfully finds a match, it updates the lastIndex property to the index of the character immediately after the matched text. If exec() fails to find a match, it resets lastIndex to 0. This special behavior allows you to call exec() repeatedly in order to loop through all the regular expression matches in a string. (Although, as weâ€™ve described, in ES2020 and later, the matchAll() method of String is an easier way to loop through all matches.) For example, the loop in the following code will run twice:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pattern = <span class="regexp">/Java/g</span>;</span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&quot;JavaScript &gt; Java&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> match;</span><br><span class="line"><span class="keyword">while</span>((match = pattern.<span class="title function_">exec</span>(text)) !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Matched <span class="subst">$&#123;match[<span class="number">0</span>]&#125;</span> at <span class="subst">$&#123;match.index&#125;</span>`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Next search begins at <span class="subst">$&#123;pattern.lastIndex&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>THE LASTINDEX PROPERTY AND REGEXP REUSE<br>As you have seen already, JavaScriptâ€™s regular expression API is complicated. The use of the lastIndex property with the g and y flags is a particularly awkward part of this API. When you use these flags, you need to be particularly careful when calling the match(), exec(), or test() methods because the behavior of these methods depends on lastIndex, and the value of lastIndex depends on what you have previously done with the RegExp object. This makes it easy to write buggy code.</p>
<p>Suppose, for example, that we wanted to find the index of all <code>&lt;p&gt;</code> tags within a string of HTML text. We might write code like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> match, positions = [];</span><br><span class="line"><span class="keyword">while</span>((match = <span class="regexp">/&lt;p&gt;/g</span>.<span class="title function_">exec</span>(html)) !== <span class="literal">null</span>) &#123; <span class="comment">// POSSIBLE INFINITE LOOP</span></span><br><span class="line">    positions.<span class="title function_">push</span>(match.<span class="property">index</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This code does not do what we want it to. If the html string contains at least one <code>&lt;p&gt;</code> tag, then it will loop forever. The problem is that we use a RegExp literal in the while loop condition. For each iteration of the loop, weâ€™re creating a new RegExp object with lastIndex set to 0, so exec() always begins at the start of the string, and if there is a match, it will keep matching over and over. The solution, of course, is to define the RegExp once, and save it to a variable so that weâ€™re using the same RegExp object for each iteration of the loop.</p>
<p>On the other hand, sometimes reusing a RegExp object is the wrong thing to do. Suppose, for example, that we want to loop through all of the words in a dictionary to find words that contain pairs of double letters:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dictionary = [ <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;book&quot;</span>, <span class="string">&quot;coffee&quot;</span> ];</span><br><span class="line"><span class="keyword">let</span> doubleLetterWords = [];</span><br><span class="line"><span class="keyword">let</span> doubleLetter = <span class="regexp">/(\w)\1/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> word <span class="keyword">of</span> dictionary) &#123;</span><br><span class="line">    <span class="keyword">if</span> (doubleLetter.<span class="title function_">test</span>(word)) &#123;</span><br><span class="line">        doubleLetterWords.<span class="title function_">push</span>(word);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">doubleLetterWords  <span class="comment">// =&gt; [&quot;apple&quot;, &quot;coffee&quot;]: &quot;book&quot; is missing!</span></span><br></pre></td></tr></table></figure>
<p>Because we set the g flag on the RegExp, the lastIndex property is changed after successful matches, and the test() method (which is based on exec()) starts searching for a match at the position specified by lastIndex. After matching the â€œppâ€ in â€œappleâ€, lastIndex is 3, and so we start searching the word â€œbookâ€ at position 3 and do not see the â€œooâ€ that it contains.</p>
<p>We could fix this problem by removing the g flag (which is not actually necessary in this particular example), or by moving the RegExp literal into the body of the loop so that it is re-created on each iteration, or by explicitly resetting lastIndex to zero before each call to test().</p>
<p>The moral here is that lastIndex makes the RegExp API error prone. So be extra careful when using the g or y flags and looping. And in ES2020 and later, use the String matchAll() method instead of exec() to sidestep this problem since matchAll() does not modify lastIndex.</p>
<h2 id="11-4-Dates-and-Times"><a href="#11-4-Dates-and-Times" class="headerlink" title="11.4 Dates and Times"></a>11.4 Dates and Times</h2><p>The Date class is JavaScriptâ€™s API for working with dates and times. Create a Date object with the Date() constructor. With no arguments, it returns a Date object that represents the current date and time:</p>
<blockquote>
<p>Date ç±»æ˜¯ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„ JavaScript APIã€‚ ä½¿ç”¨ Date() æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ª Date å¯¹è±¡ã€‚æ²¡æœ‰å®å‚ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ª Date å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä»£è¡¨å½“å‰æ—¥æœŸå’Œæ—¶é—´ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();     <span class="comment">// The current time</span></span><br></pre></td></tr></table></figure>
<p>If you pass one numeric argument, the Date() constructor interprets that argument as the number of milliseconds since the 1970 epoch:</p>
<blockquote>
<p>å¦‚æœä¼ é€’ä¸€ä¸ªæ•°å­—å®å‚ï¼Œåˆ™ Date() æ„é€ å‡½æ•°å°†è¯¥å®å‚è§£é‡Šä¸ºè‡ª 1970 å¹´ä»¥æ¥çš„æ¯«ç§’æ•°ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> epoch = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">0</span>);  <span class="comment">// Midnight, January 1st, 1970, GMT</span></span><br></pre></td></tr></table></figure>
<p>If you specify two or more integer arguments, they are interpreted as the year, month, day-of-month, hour, minute, second, and millisecond in your local time zone, as in the following:</p>
<blockquote>
<p>å¦‚æœæŒ‡å®šä¸¤ä¸ªæˆ–å¤šä¸ªæ•´æ•°å®å‚ï¼Œåˆ™å®ƒä»¬å°†è¢«è§£é‡Šä¸ºæœ¬åœ°æ—¶åŒºä¸­çš„å¹´ã€æœˆã€æ—¥ã€å°æ—¶ã€åˆ†é’Ÿã€ç§’å’Œæ¯«ç§’ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> century = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2100</span>,         <span class="comment">// Year 2100</span></span><br><span class="line">                       <span class="number">0</span>,            <span class="comment">// January</span></span><br><span class="line">                       <span class="number">1</span>,            <span class="comment">// 1st</span></span><br><span class="line">                       <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);  <span class="comment">// 02:03:04.005, local time</span></span><br></pre></td></tr></table></figure>
<p>One quirk of the Date API is that the first month of a year is number 0, but the first day of a month is number 1. If you omit the time fields, the Date() constructor defaults them all to 0, setting the time to midnight.</p>
<blockquote>
<p>Date API çš„ä¸€ä¸ªæ€ªç™–æ˜¯ä¸€å¹´çš„ç¬¬ä¸€ä¸ªæœˆæ˜¯æ•°å­— 0ï¼Œè€Œä¸€ä¸ªæœˆçš„ç¬¬ä¸€å¤©æ˜¯æ•°å­— 1ã€‚å¦‚æœçœç•¥äº†æ—¶é—´å­—æ®µï¼Œåˆ™ Date() æ„é€ å‡½æ•°ä¼šå°†å®ƒä»¬å…¨éƒ¨é»˜è®¤ä¸º 0ï¼Œå¹¶å°†æ—¶é—´è®¾ç½®ä¸ºåˆ°åˆå¤œã€‚</p>
</blockquote>
<p>Note that when invoked with multiple numbers, the Date() constructor interprets them using whatever time zone the local computer is set to. If you want to specify a date and time in UTC (Universal Coordinated Time, aka GMT), then you can use the Date.UTC(). This static method takes the same arguments as the Date() constructor, interprets them in UTC, and returns a millisecond timestamp that you can pass to the Date() constructor:</p>
<blockquote>
<p>è¯·æ³¨æ„ï¼Œå½“ä½¿ç”¨å¤šä¸ªæ•°å­—è°ƒç”¨æ—¶ï¼ŒDate() æ„é€ å‡½æ•°ä½¿ç”¨æœ¬åœ°è®¡ç®—æœºè®¾ç½®ä¸ºçš„æ—¶åŒºè§£é‡Šå®ƒä»¬ã€‚å¦‚æœè¦ä»¥UTCï¼ˆåè°ƒä¸–ç•Œæ—¶ï¼Œåˆç§°ä¸ºGMTï¼‰æŒ‡å®šæ—¥æœŸå’Œæ—¶é—´ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ Date.UTC()ã€‚ æ­¤é™æ€æ–¹æ³•é‡‡ç”¨ä¸ Date() æ„é€ å‡½æ•°ç›¸åŒçš„å®å‚ï¼Œä»¥ UTC è§£é‡Šå®ƒä»¬ï¼Œå¹¶è¿”å›å¯ä»¥ä¼ é€’ç»™ Date() æ„é€ å‡½æ•°çš„æ¯«ç§’çº§æ—¶é—´æˆ³ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Midnight in England, January 1, 2100</span></span><br><span class="line"><span class="keyword">let</span> century = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Date</span>.<span class="title function_">UTC</span>(<span class="number">2100</span>, <span class="number">0</span>, <span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<p>If you print a date (with <code>console.log(century)</code>, for example), it will, by default, be printed in your local time zone. If you want to display a date in UTC, you should explicitly convert it to a string with toUTCString() or toISOString().</p>
<blockquote>
<p>å¦‚æœæ‚¨æ‰“å°æ—¥æœŸï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ <code>console.log(century)</code>ï¼‰ï¼Œåˆ™é»˜è®¤æƒ…å†µä¸‹å°†åœ¨æœ¬åœ°æ—¶åŒºæ‰“å°æ—¥æœŸã€‚ å¦‚æœè¦ä»¥ UTC æ˜¾ç¤ºæ—¥æœŸï¼Œåˆ™åº”ä½¿ç”¨ toUTCString() æˆ– toISOString() å°†å…¶æ˜¾å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<p>Finally, if you pass a string to the Date() constructor, it will attempt to parse that string as a date and time specification. The constructor can parse dates specified in the formats produced by the toString(), toUTCString(), and toISOString() methods:</p>
<blockquote>
<p>æœ€åï¼Œå¦‚æœå°†å­—ç¬¦ä¸²ä¼ é€’ç»™ Date() æ„é€ å‡½æ•°ï¼Œå®ƒå°†å°è¯•è§£æè¯¥å­—ç¬¦ä¸²ä½œä¸ºæ—¥æœŸå’Œæ—¶é—´è§„èŒƒã€‚æ„é€ å‡½æ•°å¯ä»¥è§£æä»¥ toString()ã€toUTCString() å’Œ toISOString() æ–¹æ³•äº§ç”Ÿçš„æ ¼å¼æŒ‡å®šçš„æ—¥æœŸï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> century = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2100-01-01T00:00:00Z&quot;</span>);  <span class="comment">// An ISO format date</span></span><br></pre></td></tr></table></figure>
<p>Once you have a Date object, various get and set methods allow you to query and modify the year, month, day-of-month, hour, minute, second, and millisecond fields of the Date. Each of these methods has two forms: one that gets or sets using local time and one that gets or sets using UTC time. To get or set the year of a Date object, for example, you would use getFullYear(), getUTCFullYear(), setFullYear(), or setUTCFullYear():</p>
<blockquote>
<p>æœ‰äº† Date å¯¹è±¡åï¼Œå¯ä»¥ä½¿ç”¨å„ç§ get å’Œ set æ–¹æ³•æŸ¥è¯¢å’Œä¿®æ”¹æ—¥æœŸçš„å¹´ã€æœˆã€æ—¥ã€å°æ—¶ã€åˆ†é’Ÿã€ç§’å’Œæ¯«ç§’å­—æ®µã€‚è¿™äº›æ–¹æ³•ä¸­çš„æ¯ä¸€ç§éƒ½æœ‰ä¸¤ç§å½¢å¼ï¼šä¸€ç§ä½¿ç”¨æœ¬åœ°æ—¶é—´è·å–æˆ–è®¾ç½®ï¼Œå¦ä¸€ç§ä½¿ç”¨ UTC æ—¶é—´è·å–æˆ–è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œè¦è·å–æˆ–è®¾ç½® Date å¯¹è±¡çš„å¹´ä»½ï¼Œå¯ä»¥ä½¿ç”¨ getFullYear()ã€getUTCFullYear()ã€setFullYear() æˆ– setUTCFullYear()ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();                  <span class="comment">// Start with the current date</span></span><br><span class="line">d.<span class="title function_">setFullYear</span>(d.<span class="title function_">getFullYear</span>() + <span class="number">1</span>);  <span class="comment">// Increment the year</span></span><br></pre></td></tr></table></figure>
<p>To get or set the other fields of a Date, replace â€œFullYearâ€ in the method name with â€œMonthâ€, â€œDateâ€, â€œHoursâ€, â€œMinutesâ€, â€œSecondsâ€, or â€œMillisecondsâ€. Some of the date set methods allow you to set more than one field at a time. setFullYear() and setUTCFullYear() also optionally allow you to set the month and day-of-month as well. And setHours() and setUTCHours() allow you to specify the minutes, seconds, and milliseconds fields in addition to the hours field.</p>
<blockquote>
<p>è¦è·å–æˆ–è®¾ç½®æ—¥æœŸçš„å…¶ä»–å­—æ®µï¼Œè¯·å°†æ–¹æ³•åç§°ä¸­çš„â€œFullYearâ€æ›¿æ¢ä¸ºâ€œMonthâ€ã€â€œDateâ€ã€â€œHoursâ€ã€â€œMinutesâ€ã€â€œSecondsâ€æˆ–â€œMillisecondsâ€ã€‚ä¸€äº›æ—¥æœŸè®¾ç½®æ–¹æ³•å¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå­—æ®µã€‚ setFullYear() å’Œ setUTCFullYear() è¿˜å¯ä»¥é€‰æ‹©è®¾ç½®æœˆå’Œæ—¥ã€‚setHours() å’Œ setUTCHours() å…è®¸æ‚¨é™¤äº†æŒ‡å®šå°æ—¶æ•°å­—æ®µä¹‹å¤–ï¼Œè¿˜æŒ‡å®šåˆ†é’Ÿï¼Œç§’å’Œæ¯«ç§’å­—æ®µã€‚</p>
</blockquote>
<p>Note that the methods for querying the day-of-month are getDate() and getUTCDate(). The more natural-sounding functions getDay() and getUTCDay() return the day-of-week (0 for Sunday through 6 for Saturday). The day-of-week is read-only, so there is not a corresponding setDay() method.</p>
<blockquote>
<p>è¯·æ³¨æ„ï¼ŒæŸ¥è¯¢æ—¥æœŸçš„æ–¹æ³•æ˜¯ getDate() å’Œ getUTCDate()ã€‚å¬èµ·å‡½æ•° getDay() å’Œ getUTCDay() æ›´åƒæŸ¥è¯¢æ—¥æœŸï¼Œä½†æ˜¯å®ƒä»¬è¿”å›æ˜ŸæœŸå‡ ï¼ˆ 0 ä¸ºæ˜ŸæœŸæ—¥ï¼Œæ˜ŸæœŸå…­ä¸º 6ï¼‰ã€‚æ˜ŸæœŸå‡ æ˜¯åªè¯»çš„ï¼Œå› æ­¤æ²¡æœ‰ç›¸åº”çš„ setDay() æ–¹æ³•ã€‚ </p>
</blockquote>
<h3 id="11-4-1-Timestamps"><a href="#11-4-1-Timestamps" class="headerlink" title="11.4.1 Timestamps"></a>11.4.1 Timestamps</h3><p>JavaScript represents dates internally as integers that specify the number of milliseconds since (or before) midnight on January 1, 1970, UTC time. Integers as large as 8,640,000,000,000,000 are supported, so JavaScript wonâ€™t be running out of milliseconds for more than 270,000 years.</p>
<blockquote>
<p>JavaScript åœ¨å†…éƒ¨å°†æ—¥æœŸè¡¨ç¤ºä¸ºæ•´æ•°ï¼Œè¯¥æ•´æ•°æŒ‡å®šè‡ª UTC æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ï¼ˆæˆ–ä¹‹å‰ï¼‰çš„æ¯«ç§’æ•°ã€‚ æ”¯æŒçš„æœ€å¤§æ•´æ•°ä¸º 8,640,000,000,000,000ï¼Œå› æ­¤ JavaScript åœ¨è¶…è¿‡ 270,000 å¹´çš„æ—¶é—´å†…ä¸ä¼šç”¨å®Œæ¯«ç§’ã€‚</p>
</blockquote>
<p>For any Date object, the getTime() method returns this internal value, and the setTime() method sets it. So you can add 30 seconds to a Date with code like this, for example:</p>
<blockquote>
<p>å¯¹äºä»»ä½• Date å¯¹è±¡ï¼ŒgetTime() æ–¹æ³•å°†è¿”å›æ­¤å†…éƒ¨å€¼ï¼Œè€Œ setTime() æ–¹æ³•å°†å¯¹å…¶è¿›è¡Œè®¾ç½®ã€‚ å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç å‘æ—¥æœŸæ·»åŠ  30 ç§’ï¼Œä¾‹å¦‚ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d.<span class="title function_">setTime</span>(d.<span class="title function_">getTime</span>() + <span class="number">30000</span>);</span><br></pre></td></tr></table></figure>
<p>These millisecond values are sometimes called timestamps, and it is sometimes useful to work with them directly rather than with Date objects. The static Date.now() method returns the current time as a timestamp and is helpful when you want to measure how long your code takes to run:</p>
<blockquote>
<p>è¿™äº›æ¯«ç§’å€¼æœ‰æ—¶è¢«ç§°ä¸ºæ—¶é—´æˆ³ï¼Œæœ‰æ—¶ç›´æ¥ä½¿ç”¨å®ƒä»¬è€Œä¸æ˜¯ä½¿ç”¨æ—¥æœŸå¯¹è±¡æœ‰æ—¶å¾ˆæœ‰ç”¨ã€‚é™æ€çš„ Date.now() æ–¹æ³•è¿”å›å½“å‰æ—¶é—´ä½œä¸ºæ—¶é—´æˆ³ï¼Œå½“è¦æµ‹é‡ä»£ç è¿è¡Œå¤šé•¿æ—¶é—´æ—¶ï¼Œè¯¥æ–¹æ³•å¾ˆæœ‰ç”¨ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"><span class="title function_">reticulateSplines</span>(); <span class="comment">// Do some time-consuming operation</span></span><br><span class="line"><span class="keyword">let</span> endTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Spline reticulation took <span class="subst">$&#123;endTime - startTime&#125;</span>ms.`</span>);</span><br></pre></td></tr></table></figure>
<h4 id="HIGH-RESOLUTION-TIMESTAMPS"><a href="#HIGH-RESOLUTION-TIMESTAMPS" class="headerlink" title="HIGH-RESOLUTION TIMESTAMPS"></a>HIGH-RESOLUTION TIMESTAMPS</h4><p>The timestamps returned by Date.now() are measured in milliseconds. A millisecond is actually a relatively long time for a computer, and sometimes you may want to measure elapsed time with higher precision. The performance.now() function allows this: it also returns a millisecond-based timestamp, but the return value is not an integer, so it includes fractions of a millisecond. The value returned by performance.now() is not an absolute timestamp like the Date.now() value is. Instead, it simply indicates how much time has elapsed since a web page was loaded or since the Node process started.</p>
<blockquote>
<p>Date.now() è¿”å›çš„æ—¶é—´æˆ³ä»¥æ¯«ç§’ä¸ºå•ä½ã€‚å¯¹äºè®¡ç®—æœºè€Œè¨€ï¼Œæ¯«ç§’å®é™…ä¸Šæ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒé•¿çš„æ—¶é—´ï¼Œæœ‰æ—¶æ‚¨å¯èƒ½å¸Œæœ›ä»¥æ›´é«˜çš„ç²¾åº¦æµ‹é‡ç»è¿‡çš„æ—¶é—´ã€‚performance.now() å‡½æ•°å…è®¸è¿™æ ·åšï¼šå®ƒä¹Ÿè¿”å›æ¯«ç§’çº§çš„æ—¶é—´æˆ³ï¼Œä½†æ˜¯è¿”å›å€¼ä¸æ˜¯æ•´æ•°ï¼Œå› æ­¤å®ƒåŒ…å«æ¯«ç§’çš„åˆ†æ•°ã€‚ performance.now() è¿”å›çš„å€¼ä¸æ˜¯åƒ Date.now() é‚£æ ·çš„ç»å¯¹æ—¶é—´æˆ³ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå®ƒä»…æŒ‡ç¤ºç½‘é¡µåŠ è½½æˆåŠŸæˆ– Node è¿›ç¨‹å¼€å§‹ä»¥æ¥å·²èŠ±è´¹äº†å¤šå°‘æ—¶é—´ã€‚</p>
</blockquote>
<p>The performance object is part of a larger Performance API that is not defined by the ECMAScript standard but is implemented by web browsers and by Node. In order to use the performance object in Node, you must import it with:</p>
<blockquote>
<p>performance å¯¹è±¡æ˜¯è¾ƒå¤§çš„ Performance API çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥ API ä¸æ˜¯ç”± ECMAScript æ ‡å‡†å®šä¹‰çš„ï¼Œè€Œæ˜¯ç”± Web æµè§ˆå™¨å’Œ Node å®ç°çš„ã€‚ä¸ºäº†åœ¨ Node ä¸­ä½¿ç”¨ performance å¯¹è±¡ï¼Œå¿…é¡»ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯¼å…¥å®ƒï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; performance &#125; = <span class="built_in">require</span>(<span class="string">&quot;perf_hooks&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>Allowing high-precision timing on the web may allow unscrupulous websites to fingerprint visitors, so browsers (notably Firefox) may reduce the precision of performance.now() by default. As a web developer, you should be able to re-enable high-precision timing somehow (such as by setting privacy.reduceTimerPrecision to false in Firefox).</p>
<blockquote>
<p>å…è®¸åœ¨ Web ä¸Šè¿›è¡Œé«˜ç²¾åº¦è®¡æ—¶å¯èƒ½ä¼šå¯¼è‡´ä¸é“å¾·çš„ç½‘ç«™å¯¹è®¿é—®è€…è¿›è¡ŒæŒ‡çº¹è¯†åˆ«ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ï¼ˆå°¤å…¶æ˜¯Firefoxï¼‰å¯èƒ½ä¼šé™ä½ performance.now() çš„ç²¾åº¦ã€‚ä½œä¸º Web å¼€å‘äººå‘˜ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿä»¥æŸç§æ–¹å¼é‡æ–°å¯ç”¨é«˜ç²¾åº¦è®¡æ—¶ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡åœ¨ Firefox ä¸­å°† privacy.reduceTimerPrecision è®¾ç½®ä¸º falseï¼‰ã€‚</p>
</blockquote>
<h3 id="11-4-2-Date-Arithmetic"><a href="#11-4-2-Date-Arithmetic" class="headerlink" title="11.4.2 Date Arithmetic"></a>11.4.2 Date Arithmetic</h3><p>Date objects can be compared with JavaScriptâ€™s standard &lt;, &lt;&#x3D;, &gt;, and &gt;&#x3D; comparison operators. And you can subtract one Date object from another to determine the number of milliseconds between the two dates. (This works because the Date class defines a valueOf() method that returns a timestamp.)</p>
<blockquote>
<p>æ—¥æœŸå¯¹è±¡å¯ä»¥ç”¨ JavaScript çš„æ ‡å‡† &lt;ã€&lt;&#x3D;ã€&gt; å’Œ &gt;&#x3D; æ¯”è¾ƒè¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚å¯ä»¥ä»å¦ä¸€ä¸ªæ—¥æœŸå¯¹è±¡ä¸­å‡å»ä¸€ä¸ªæ—¥æœŸå¯¹è±¡ï¼Œä»¥ç¡®å®šä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æ¯«ç§’æ•°ã€‚ï¼ˆè¿™æ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸º Date ç±»å®šä¹‰äº†ä¸€ä¸ªè¿”å›æ—¶é—´æˆ³çš„ valueOf() æ–¹æ³•ã€‚ï¼‰</p>
</blockquote>
<p>If you want to add or subtract a specified number of seconds, minutes, or hours from a Date, it is often easiest to simply modify the timestamp as demonstrated in the previous example, when we added 30 seconds to a date. This technique becomes more cumbersome if you want to add days, and it does not work at all for months and years since they have varying numbers of days. To do date arithmetic involving days, months, and years, you can use setDate(), setMonth(), and setYear(). Here, for example, is code that adds three months and two weeks to the current date:</p>
<blockquote>
<p>å¦‚æœæ‚¨æƒ³ä»æ—¥æœŸä¸­æ·»åŠ æˆ–å‡å»æŒ‡å®šçš„ç§’ã€åˆ†é’Ÿæ•°æˆ–å°æ—¶æ•°ï¼Œé€šå¸¸æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä¿®æ”¹æ—¶é—´æˆ³ï¼Œå¦‚ä¸Šä¸€ä¸ªç¤ºä¾‹æ‰€ç¤ºï¼Œå³ä¸ºæ—¥æœŸæ·»åŠ  30 ç§’ã€‚å¦‚æœè¦æ·»åŠ å¤©æ•°ï¼Œæ­¤æŠ€æœ¯å°†å˜å¾—æ›´åŠ ç¹çï¼Œå¹¶ä¸”ç”±äºå®ƒä»¬çš„å¤©æ•°ä¸åŒï¼Œå› æ­¤å‡ ä¸ªæœˆç”šè‡³å‡ å¹´éƒ½æ— æ³•ä½¿ç”¨ã€‚è¦è¿›è¡Œæ¶‰åŠå¤©ï¼Œæœˆå’Œå¹´çš„æ—¥æœŸç®—æœ¯ï¼Œå¯ä»¥ä½¿ç”¨ setDate()ã€setMonth() å’Œ setYear()ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å‘å½“å‰æ—¥æœŸæ·»åŠ äº†ä¸‰ä¸ªæœˆé›¶ä¸¤ä¸ªæ˜ŸæœŸï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">d.<span class="title function_">setMonth</span>(d.<span class="title function_">getMonth</span>() + <span class="number">3</span>, d.<span class="title function_">getDate</span>() + <span class="number">14</span>);</span><br></pre></td></tr></table></figure>
<p>Date setting methods work correctly even when they overflow. When we add three months to the current month, we can end up with a value greater than 11 (which represents December). The setMonth() handles this by incrementing the year as needed. Similarly, when we set the day of the month to a value larger than the number of days in the month, the month gets incremented appropriately.</p>
<blockquote>
<p>æ—¥æœŸè®¾ç½®æ–¹æ³•å³ä½¿åœ¨æº¢å‡ºæ—¶ä¹Ÿå¯ä»¥æ­£å¸¸å·¥ä½œã€‚å½“æˆ‘ä»¬åœ¨å½“æœˆå¢åŠ ä¸‰ä¸ªæœˆæ—¶ï¼Œæœ€ç»ˆå¯ä»¥å¾—åˆ°å¤§äº 11 çš„å€¼ï¼ˆä»£è¡¨ 12 æœˆï¼‰ã€‚setMonth() é€šè¿‡æ ¹æ®éœ€è¦å¢åŠ å¹´ä»½æ¥å¤„ç†æ­¤é—®é¢˜ã€‚åŒæ ·ï¼Œå½“æˆ‘ä»¬å°†æœˆä»½ä¸­çš„æ—¥æœŸè®¾ç½®ä¸ºå¤§äºæœˆä»½ä¸­å¤©æ•°çš„å€¼æ—¶ï¼Œæœˆä»½ä¼šé€‚å½“å¢åŠ ã€‚</p>
</blockquote>
<h3 id="11-4-3-Formatting-and-Parsing-Date-Strings"><a href="#11-4-3-Formatting-and-Parsing-Date-Strings" class="headerlink" title="11.4.3 Formatting and Parsing Date Strings"></a>11.4.3 Formatting and Parsing Date Strings</h3><p>If you are using the Date class to actually keep track of dates and times (as opposed to just measuring time intervals), then you are likely to need to display dates and times to the users of your code. The Date class defines a number of different methods for converting Date objects to strings. Here are some examples:</p>
<blockquote>
<p>å¦‚æœä½¿ç”¨ Date ç±»å®é™…è·Ÿè¸ªæ—¥æœŸå’Œæ—¶é—´ï¼ˆè€Œä¸æ˜¯ä»…æµ‹é‡æ—¶é—´é—´éš”ï¼‰ï¼Œåˆ™å¯èƒ½éœ€è¦å‘ä»£ç ç”¨æˆ·æ˜¾ç¤ºæ—¥æœŸå’Œæ—¶é—´ã€‚ Date ç±»å®šä¹‰äº†è®¸å¤šç”¨äºå°† Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„ä¸åŒæ–¹æ³•ã€‚è¿™é‡Œæœ‰äº›ä¾‹å­ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2020</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">17</span>, <span class="number">10</span>, <span class="number">30</span>); <span class="comment">// 5:10:30pm on New Year&#x27;s Day 2020</span></span><br><span class="line">d.<span class="title function_">toString</span>()  <span class="comment">// =&gt; &quot;Wed Jan 01 2020 17:10:30 GMT-0800 (Pacific Standard Time)&quot;</span></span><br><span class="line">d.<span class="title function_">toUTCString</span>()         <span class="comment">// =&gt; &quot;Thu, 02 Jan 2020 01:10:30 GMT&quot;</span></span><br><span class="line">d.<span class="title function_">toLocaleDateString</span>()  <span class="comment">// =&gt; &quot;1/1/2020&quot;: &#x27;en-US&#x27; locale</span></span><br><span class="line">d.<span class="title function_">toLocaleTimeString</span>()  <span class="comment">// =&gt; &quot;5:10:30 PM&quot;: &#x27;en-US&#x27; locale</span></span><br><span class="line">d.<span class="title function_">toISOString</span>()         <span class="comment">// =&gt; &quot;2020-01-02T01:10:30.000Z&quot;</span></span><br></pre></td></tr></table></figure>
<p>This is a full list of the string formatting methods of the Date class:</p>
<blockquote>
<p>è¿™æ˜¯ Date ç±»çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹æ³•çš„å®Œæ•´åˆ—è¡¨ï¼š</p>
</blockquote>
<p>toString()<br>This method uses the local time zone but does not format the date and time in a locale-aware way.</p>
<blockquote>
<p>æ­¤æ–¹æ³•ä½¿ç”¨æœ¬åœ°æ—¶åŒºï¼Œä½†ä¸ä»¥è¯­è¨€ç¯å¢ƒçš„æ–¹å¼æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´ã€‚</p>
</blockquote>
<p>toUTCString()<br>This method uses the UTC time zone but does not format the date in a locale-aware way.</p>
<blockquote>
<p>æ­¤æ–¹æ³•ä½¿ç”¨ UTC æ—¶åŒºï¼Œä½†ä¸ä»¥è¯­è¨€ç¯å¢ƒçš„æ–¹å¼æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´ã€‚</p>
</blockquote>
<p>toISOString()<br>This method prints the date and time in the standard year-month-day hours:minutes:seconds.ms format of the ISO-8601 standard. The letter â€œTâ€ separates the date portion of the output from the time portion of the output. The time is expressed in UTC, and this is indicated with the letter â€œZâ€ as the last letter of the output.</p>
<blockquote>
<p>æ­¤æ–¹æ³•ä»¥ ISO-8601 æ ‡å‡†çš„æ ‡å‡† year-month-day hours:minutes:seconds.ms æ ¼å¼æ‰“å°æ—¥æœŸå’Œæ—¶é—´ã€‚ å­—æ¯â€œTâ€å°†è¾“å‡ºçš„æ—¥æœŸéƒ¨åˆ†ä¸è¾“å‡ºçš„æ—¶é—´éƒ¨åˆ†åˆ†å¼€ã€‚æ—¶é—´ä»¥ UTC è¡¨ç¤ºï¼Œå¹¶ä»¥å­—æ¯â€œZâ€è¡¨ç¤ºä¸ºè¾“å‡ºçš„æœ€åä¸€ä¸ªå­—æ¯ã€‚</p>
</blockquote>
<p>toLocaleString()<br>This method uses the local time zone and a format that is appropriate for the userâ€™s locale.</p>
<blockquote>
<p>æ­¤æ–¹æ³•ä½¿ç”¨æœ¬åœ°æ—¶åŒºå’Œé€‚åˆç”¨æˆ·æ‰€åœ¨åŒºåŸŸçš„æ ¼å¼ã€‚</p>
</blockquote>
<p>toDateString()<br>This method formats only the date portion of the Date and omits the time. It uses the local time zone and does not do locale-appropriate formatting.</p>
<blockquote>
<p>æ­¤æ–¹æ³•ä»…æ ¼å¼åŒ–æ—¥æœŸçš„æ—¥æœŸéƒ¨åˆ†ï¼Œå¹¶çœç•¥æ—¶é—´ã€‚å®ƒä½¿ç”¨æœ¬åœ°æ—¶åŒºï¼Œå¹¶ä¸”ä¸è¿›è¡Œé€‚åˆåŒºåŸŸè®¾ç½®çš„æ ¼å¼ã€‚</p>
</blockquote>
<p>toLocaleDateString()<br>This method formats only the date. It uses the local time zone and a locale-appropriate date format.</p>
<blockquote>
<p>æ­¤æ–¹æ³•ä»…æ ¼å¼åŒ–æ—¥æœŸã€‚å®ƒä½¿ç”¨æœ¬åœ°æ—¶åŒºå’Œé€‚åˆæœ¬åœ°çš„æ—¥æœŸæ ¼å¼ã€‚</p>
</blockquote>
<p>toTimeString()<br>This method formats only the time and omits the date. It uses the local time zone but does not format the time in a locale-aware way.</p>
<blockquote>
<p>æ­¤æ–¹æ³•ä»…æ ¼å¼åŒ–æ—¶é—´ï¼Œè€Œçœç•¥æ—¥æœŸã€‚å®ƒä½¿ç”¨æœ¬åœ°æ—¶åŒºï¼Œä½†ä¸ä»¥è¯­è¨€ç¯å¢ƒçš„æ–¹å¼æ ¼å¼åŒ–æ—¶é—´ã€‚</p>
</blockquote>
<p>toLocaleTimeString()<br>This method formats the time in a locale-aware way and uses the local time zone.</p>
<blockquote>
<p>æ­¤æ–¹æ³•ä»¥è¯­è¨€ç¯å¢ƒçš„æ–¹å¼æ ¼å¼åŒ–æ—¶é—´ï¼Œå¹¶ä½¿ç”¨æœ¬åœ°æ—¶åŒºã€‚</p>
</blockquote>
<p>None of these date-to-string methods is ideal when formatting dates and times to be displayed to end users. See Â§11.7.2 for a more general-purpose and locale-aware date- and time-formatting technique.</p>
<blockquote>
<p>åœ¨æ ¼å¼åŒ–è¦æ˜¾ç¤ºç»™æœ€ç»ˆç”¨æˆ·çš„æ—¥æœŸå’Œæ—¶é—´æ—¶ï¼Œè¿™äº›æ—¥æœŸåˆ°å­—ç¬¦ä¸²æ–¹æ³•éƒ½ä¸æ˜¯ç†æƒ³çš„é€‰æ‹©ã€‚æœ‰å…³æ›´é€šç”¨çš„å’Œå¯è¯†åˆ«åŒºåŸŸè®¾ç½®çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼æŠ€æœ¯ï¼Œè¯·å‚è§ Â§11.7.2ã€‚</p>
</blockquote>
<p>Finally, in addition to these methods that convert a Date object to a string, there is also a static Date.parse() method that takes a string as its argument, attempts to parse it as a date and time, and returns a timestamp representing that date. Date.parse() is able to parse the same strings that the Date() constructor can and is guaranteed to be able to parse the output of toISOString(), toUTCString(), and toString().</p>
<blockquote>
<p>æœ€åï¼Œé™¤äº†å°† Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„è¿™äº›æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé™æ€ Date.parse() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å­—ç¬¦ä¸²ä½œä¸ºå®å‚ï¼Œå°è¯•å°†å…¶è§£æä¸ºæ—¥æœŸå’Œæ—¶é—´ï¼Œå¹¶è¿”å›æ—¶é—´æˆ³æè¿°æ—¥æœŸã€‚Date.parse() èƒ½å¤Ÿè§£æä¸ Date() æ„é€ å‡½æ•°ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¿è¯èƒ½å¤Ÿè§£æ toISOString()ã€toUTCString() å’Œ toString() çš„è¾“å‡ºã€‚</p>
</blockquote>
<h2 id="11-5-Error-Classes"><a href="#11-5-Error-Classes" class="headerlink" title="11.5 Error Classes"></a>11.5 Error Classes</h2><p>The JavaScript throw and catch statements can throw and catch any JavaScript value, including primitive values. There is no exception type that must be used to signal errors. JavaScript does define an Error class, however, and it is traditional to use instances of Error or a subclass when signaling an error with throw. One good reason to use an Error object is that, when you create an Error, it captures the state of the JavaScript stack, and if the exception is uncaught, the stack trace will be displayed with the error message, which will help you debug the issue. (Note that the stack trace shows where the Error object was created, not where the throw statement throws it. If you always create the object right before throwing it with throw new Error(), this will not cause any confusion.)</p>
<blockquote>
<p>JavaScript çš„ throw å’Œ catch è¯­å¥å¯ä»¥æŠ›å‡ºå¹¶æ•è·ä»»ä½• JavaScript å€¼ï¼ŒåŒ…æ‹¬åŸå§‹å€¼ã€‚æ²¡æœ‰å¿…é¡»ç”¨äºå‘å‡ºé”™è¯¯çš„å¼‚å¸¸ç±»å‹ã€‚JavaScript ç¡®å®å®šä¹‰äº†ä¸€ä¸ª Error ç±»ï¼Œä½†æ˜¯ä¼ ç»Ÿä¸Šæ˜¯ä½¿ç”¨ throw å‘å‡ºé”™è¯¯ä¿¡å·æ—¶ä½¿ç”¨ Error çš„å®ä¾‹æˆ–å­ç±»ã€‚ä½¿ç”¨ Error å¯¹è±¡çš„ä¸€ä¸ªâ€‹â€‹å¾ˆå¥½çš„ç†ç”±æ˜¯ï¼Œå½“åˆ›å»ºä¸€ä¸ª Error æ—¶ï¼Œå®ƒä¼šæ•è· JavaScript å †æ ˆçš„çŠ¶æ€ï¼Œå¹¶ä¸”å¦‚æœæœªæ•è·åˆ°å¼‚å¸¸ï¼Œåˆ™å †æ ˆè·Ÿè¸ªå°†ä¸é”™è¯¯æ¶ˆæ¯ä¸€èµ·æ˜¾ç¤ºï¼Œè¿™å°†æœ‰åŠ©äºè°ƒè¯•é—®é¢˜ã€‚ï¼ˆè¯·æ³¨æ„ï¼Œå †æ ˆè·Ÿè¸ªæ˜¾ç¤ºçš„æ˜¯ Error å¯¹è±¡çš„åˆ›å»ºä½ç½®ï¼Œè€Œä¸æ˜¯ throw è¯­å¥å°†å…¶æŠ›å‡ºçš„ä½ç½®ã€‚å¦‚æœæ€»æ˜¯åœ¨ä½¿ç”¨ throw new Error() å¯¹å…¶è¿›è¡ŒæŠ›å‡ºä¹‹å‰ç«‹å³åˆ›å»ºè¯¥å¯¹è±¡ï¼Œåˆ™ä¸ä¼šé€ æˆä»»ä½•æ··ä¹±ã€‚ï¼‰</p>
</blockquote>
<p>Error objects have two properties: message and name, and a toString() method. The value of the message property is the value you passed to the Error() constructor, converted to a string if necessary. For error objects created with Error(), the name property is always â€œErrorâ€. The toString() method simply returns the value of the name property followed by a colon and space and the value of the message property.</p>
<blockquote>
<p>é”™è¯¯å¯¹è±¡å…·æœ‰ä¸¤ä¸ªå±æ€§ï¼šmessage å’Œ nameï¼Œä»¥åŠä¸€ä¸ª toString() æ–¹æ³•ã€‚ message å±æ€§çš„å€¼æ˜¯ä¼ é€’ç»™ Error() æ„é€ å‡½æ•°çš„å€¼ï¼Œå¹¶åœ¨å¿…è¦æ—¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å¯¹äºä½¿ç”¨ Error() åˆ›å»ºçš„é”™è¯¯å¯¹è±¡ï¼Œname å±æ€§å§‹ç»ˆä¸ºâ€œErrorâ€ã€‚toString() æ–¹æ³•ä»…è¿”å› name å±æ€§çš„å€¼åè·Ÿå†’å·å’Œç©ºæ ¼ä»¥åŠ message å±æ€§çš„å€¼ã€‚</p>
</blockquote>
<p>Although it is not part of the ECMAScript standard, Node and all modern browsers also define a stack property on Error objects. The value of this property is a multi-line string that contains a stack trace of the JavaScript call stack at the moment that the Error object was created. This can be useful information to log when an unexpected error is caught.</p>
<blockquote>
<p>å°½ç®¡å®ƒä¸æ˜¯ ECMAScript æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä½† Node å’Œæ‰€æœ‰ç°ä»£æµè§ˆå™¨è¿˜åœ¨ Error å¯¹è±¡ä¸Šå®šä¹‰äº† stack å±æ€§ã€‚æ­¤å±æ€§çš„å€¼æ˜¯å¤šè¡Œå­—ç¬¦ä¸²ï¼Œå…¶ä¸­åŒ…å«åˆ›å»º Error å¯¹è±¡æ—¶çš„ JavaScript è°ƒç”¨å †æ ˆçš„å †æ ˆè·Ÿè¸ªã€‚å½“æ•è·åˆ°æ„å¤–é”™è¯¯æ—¶ï¼Œè¿™å¯¹äºè®°å½•æ—¥å¿—å¾ˆæœ‰ç”¨ã€‚</p>
</blockquote>
<p>In addition to the Error class, JavaScript defines a number of subclasses that it uses to signal particular types of errors defined by ECMAScript. These subclasses are EvalError, RangeError, ReferenceError, SyntaxError, TypeError, and URIError. You can use these error classes in your own code if they seem appropriate. Like the base Error class, each of these subclasses has a constructor that takes a single message argument. And instances of each of these subclasses have a name property whose value is the same as the constructor name.</p>
<blockquote>
<p>é™¤äº† Error ç±»ä¹‹å¤–ï¼ŒJavaScript è¿˜å®šä¹‰äº†è®¸å¤šå­ç±»ï¼Œè¿™äº›å­ç±»ç”¨äºè¡¨ç¤º ECMAScript å®šä¹‰çš„ç‰¹å®šç±»å‹çš„é”™è¯¯ã€‚è¿™äº›å­ç±»æ˜¯ EvalErrorã€RangeErrorã€ReferenceErrorã€SyntaxErrorã€TypeError å’Œ URIErrorã€‚å¦‚æœåˆé€‚å¯ä»¥åœ¨è‡ªå·±çš„ä»£ç ä¸­ä½¿ç”¨è¿™äº›é”™è¯¯ç±»ã€‚åƒåŸºæœ¬é”™è¯¯ç±»ä¸€æ ·ï¼Œè¿™äº›å­ç±»æ¯ä¸€ä¸ªéƒ½æœ‰ä¸€ä¸ªé‡‡ç”¨å•ä¸ª message å®å‚çš„æ„é€ å‡½æ•°ã€‚æ¯ä¸ªè¿™äº›å­ç±»çš„å®ä¾‹éƒ½æœ‰ä¸€ä¸ª name å±æ€§ï¼Œå…¶å€¼ä¸æ„é€ å‡½æ•°åç§°ç›¸åŒã€‚</p>
</blockquote>
<p>You should feel free to define your own Error subclasses that best encapsulate the error conditions of your own program. Note that you are not limited to the name and message properties. If you create a subclass, you can define new properties to provide error details. If you are writing a parser, for example, you might find it useful to define a ParseError class with line and column properties that specify the exact location of the parsing failure. Or if you are working with HTTP requests, you might want to define an HTTPError class that has a status property that holds the HTTP status code (such as 404 or 500) of the failed request.</p>
<blockquote>
<p>åº”è¯¥éšæ„å®šä¹‰è‡ªå·±çš„é”™è¯¯å­ç±»ï¼Œä»¥æœ€å¥½åœ°å°è£…è‡ªå·±ç¨‹åºçš„é”™è¯¯æ¡ä»¶ã€‚è¯·æ³¨æ„ï¼Œå¯ä»¥ä¸å—é™äºåç§°å’Œæ¶ˆæ¯ä¸¤ä¸ªå±æ€§ã€‚å¦‚æœåˆ›å»ºå­ç±»ï¼Œåˆ™å¯ä»¥å®šä¹‰æ–°å±æ€§ä»¥æä¾›é”™è¯¯è¯¦ç»†ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ­£åœ¨ç¼–å†™ä¸€ä¸ªè½¬æ¢ï¼Œå¯èƒ½ä¼šå‘ç°å®šä¹‰ä¸€ä¸ª ParseError ç±»éå¸¸æœ‰ç”¨ï¼Œè¯¥ç±»å…·æœ‰æŒ‡å®šè§£æå¤±è´¥ç¡®åˆ‡ä½ç½®çš„è¡Œå’Œåˆ—å±æ€§ã€‚æˆ–è€…ï¼Œå¦‚æœæ­£åœ¨å¤„ç† HTTP è¯·æ±‚ï¼Œåˆ™å¯èƒ½éœ€è¦å®šä¹‰ä¸€ä¸ª HTTPError ç±»ï¼Œè¯¥ç±»å…·æœ‰ä¸€ä¸ª status å±æ€§ï¼Œè¯¥å±æ€§ä¿å­˜å¤±è´¥è¯·æ±‚çš„ HTTP çŠ¶æ€ä»£ç ï¼ˆä¾‹å¦‚ 404 æˆ– 500ï¼‰ã€‚</p>
</blockquote>
<p>For example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HTTPError</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Error</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">status, statusText, url</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(<span class="string">`<span class="subst">$&#123;status&#125;</span> <span class="subst">$&#123;statusText&#125;</span>: <span class="subst">$&#123;url&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">status</span> = status;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">statusText</span> = statusText;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">url</span> = url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>() &#123; <span class="keyword">return</span> <span class="string">&quot;HTTPError&quot;</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> error = <span class="keyword">new</span> <span class="title class_">HTTPError</span>(<span class="number">404</span>, <span class="string">&quot;Not Found&quot;</span>, <span class="string">&quot;http://example.com/&quot;</span>);</span><br><span class="line">error.<span class="property">status</span>        <span class="comment">// =&gt; 404</span></span><br><span class="line">error.<span class="property">message</span>       <span class="comment">// =&gt; &quot;404 Not Found: http://example.com/&quot;</span></span><br><span class="line">error.<span class="property">name</span>          <span class="comment">// =&gt; &quot;HTTPError&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="11-6-JSON-Serialization-and-Parsing"><a href="#11-6-JSON-Serialization-and-Parsing" class="headerlink" title="11.6 JSON Serialization and Parsing"></a>11.6 JSON Serialization and Parsing</h2><p>When a program needs to save data or needs to transmit data across a network connection to another program, it must to convert its in-memory data structures into a string of bytes or characters than can be saved or transmitted and then later be parsed to restore the original in-memory data structures. This process of converting data structures into streams of bytes or characters is known as serialization (or marshaling or even pickling).</p>
<p>The easiest way to serialize data in JavaScript uses a serialization format known as JSON. This acronym stands for â€œJavaScript Object Notationâ€ and, as the name implies, the format uses JavaScript object and array literal syntax to convert data structures consisting of objects and arrays into strings. JSON supports primitive numbers and strings and also the values true, false, and null, as well as arrays and objects built up from those primitive values. JSON does not support other JavaScript types like Map, Set, RegExp, Date, or typed arrays. Nevertheless, it has proved to be a remarkably versatile data format and is in common use even with non-JavaScript-based programs.</p>
<p>JavaScript supports JSON serialization and deserialization with the two functions JSON.stringify() and JSON.parse(), which were covered briefly in Â§6.8. Given an object or array (nested arbitrarily deeply) that does not contain any nonserializable values like RegExp objects or typed arrays, you can serialize the object simply by passing it to JSON.stringify(). As the name implies, the return value of this function is a string. And given a string returned by JSON.stringify(), you can re-create the original data structure by passing the string to JSON.parse():</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;<span class="attr">s</span>: <span class="string">&quot;&quot;</span>, <span class="attr">n</span>: <span class="number">0</span>, <span class="attr">a</span>: [<span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">null</span>]&#125;;</span><br><span class="line"><span class="keyword">let</span> s = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(o);  <span class="comment">// s == &#x27;&#123;&quot;s&quot;:&quot;&quot;,&quot;n&quot;:0,&quot;a&quot;:[true,false,null]&#125;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> copy = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(s);   <span class="comment">// copy == &#123;s: &quot;&quot;, n: 0, a: [true, false, null]&#125;</span></span><br></pre></td></tr></table></figure>
<p>If we leave out the part where serialized data is saved to a file or sent over the network, we can use this pair of functions as a somewhat inefficient way of creating a deep copy of an object:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Make a deep copy of any serializable object or array</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepcopy</span>(<span class="params">o</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(o));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JSON IS A SUBSET OF JAVASCRIPT<br>When data is serialized to JSON format, the result is valid JavaScript source code for an expression that evaluates to a copy of the original data structure. If you prefix a JSON string with var data &#x3D; and pass the result to eval(), youâ€™ll get a copy of the original data structure assigned to the variable data. You should never do this, however, because it is a huge security holeâ€”if an attacker could inject arbitrary JavaScript code into a JSON file, they could make your program run their code. It is faster and safer to just use JSON.parse() to decode JSON-formatted data.</p>
<p>JSON is sometimes used as a human-readable configuration file format. If you find yourself hand-editing a JSON file, note that the JSON format is a very strict subset of JavaScript. Comments are not allowed and property names must be enclosed in double quotes even when JavaScript would not require this.</p>
<p>Typically, you pass only a single argument to JSON.stringify() and JSON.parse(). Both functions accept an optional second argument that allows us to extend the JSON format, and these are described next. JSON.stringify() also takes an optional third argument that weâ€™ll discuss first. If you would like your JSON-formatted string to be human-readable (if it is being used as a configuration file, for example), then you should pass null as the second argument and pass a number or string as the third argument. This third argument tells JSON.stringify() that it should format the data on multiple indented lines. If the third argument is a number, then it will use that number of spaces for each indentation level. If the third argument is a string of whitespace (such as â€˜\tâ€™), it will use that string for each level of indent.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;<span class="attr">s</span>: <span class="string">&quot;test&quot;</span>, <span class="attr">n</span>: <span class="number">0</span>&#125;;</span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(o, <span class="literal">null</span>, <span class="number">2</span>)  <span class="comment">// =&gt; &#x27;&#123;\n  &quot;s&quot;: &quot;test&quot;,\n  &quot;n&quot;: 0\n&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>JSON.parse() ignores whitespace, so passing a third argument to JSON.stringify() has no impact on our ability to convert the string back into a data structure.</p>
<h3 id="11-6-1-JSON-Customizations"><a href="#11-6-1-JSON-Customizations" class="headerlink" title="11.6.1 JSON Customizations"></a>11.6.1 JSON Customizations</h3><p>If JSON.stringify() is asked to serialize a value that is not natively supported by the JSON format, it looks to see if that value has a toJSON() method, and if so, it calls that method and then stringifies the return value in place of the original value. Date objects implement toJSON(): it returns the same string that toISOString() method does. This means that if you serialize an object that includes a Date, the date will automatically be converted to a string for you. When you parse the serialized string, the re-created data structure will not be exactly the same as the one you started with because it will have a string where the original object had a Date.</p>
<p>If you need to re-create Date objects (or modify the parsed object in any other way), you can pass a â€œreviverâ€ function as the second argument to JSON.parse(). If specified, this â€œreviverâ€ function is invoked once for each primitive value (but not the objects or arrays that contain those primitive values) parsed from the input string. The function is invoked with two arguments. The first is a property nameâ€”either an object property name or an array index converted to a string. The second argument is the primitive value of that object property or array element. Furthermore, the function is invoked as a method of the object or array that contains the primitive value, so you can refer to that containing object with the this keyword.</p>
<p>The return value of the reviver function becomes the new value of the named property. If it returns its second argument, the property will remain unchanged. If it returns undefined, then the named property will be deleted from the object or array before JSON.parse() returns to the user.</p>
<p>As an example, here is a call to JSON.parse() that uses a reviver function to filter some properties and to re-create Date objects:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(text, <span class="keyword">function</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">    <span class="comment">// Remove any values whose property name begins with an underscore</span></span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">&quot;_&quot;</span>) <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If the value is a string in ISO 8601 date format convert it to a Date.</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span> &amp;&amp;</span><br><span class="line">        <span class="regexp">/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d.\d\d\dZ$/</span>.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Otherwise, return the value unchanged</span></span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>In addition to its use of toJSON() described earlier, JSON.stringify() also allows its output to be customized by passing an array or a function as the optional second argument.</p>
<p>If an array of strings (or numbersâ€”they are converted to strings) is passed instead as the second argument, these are used as the names of object properties (or array elements). Any property whose name is not in the array will be omitted from stringification. Furthermore, the returned string will include properties in the same order that they appear in the array (which can be very useful when writing tests).</p>
<p>If you pass a function, it is a replacer functionâ€”effectively the inverse of the optional reviver function you can pass to JSON.parse(). If specified, the replacer function is invoked for each value to be stringified. The first argument to the replacer function is the object property name or array index of the value within that object, and the second argument is the value itself. The replacer function is invoked as a method of the object or array that contains the value to be stringified. The return value of the replacer function is stringified in place of the original value. If the replacer returns undefined or returns nothing at all, then that value (and its array element or object property) is omitted from the stringification.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Specify what fields to serialize, and what order to serialize them in</span></span><br><span class="line"><span class="keyword">let</span> text = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(address, [<span class="string">&quot;city&quot;</span>,<span class="string">&quot;state&quot;</span>,<span class="string">&quot;country&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Specify a replacer function that omits RegExp-value properties</span></span><br><span class="line"><span class="keyword">let</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(o, <span class="function">(<span class="params">k, v</span>) =&gt;</span> v <span class="keyword">instanceof</span> <span class="title class_">RegExp</span> ? <span class="literal">undefined</span> : v);</span><br></pre></td></tr></table></figure>
<p>The two JSON.stringify() calls here use the second argument in a benign way, producing serialized output that can be deserialized without requiring a special reviver function. In general, though, if you define a toJSON() method for a type, or if you use a replacer function that actually replaces nonserializable values with serializable ones, then you will typically need to use a custom reviver function with JSON.parse() to get your original data structure back. If you do this, you should understand that you are defining a custom data format and sacrificing portability and compatibility with a large ecosystem of JSON-compatible tools and languages.</p>
<h2 id="11-7-The-Internationalization-API"><a href="#11-7-The-Internationalization-API" class="headerlink" title="11.7 The Internationalization API"></a>11.7 The Internationalization API</h2><p>The JavaScript internationalization API consists of the three classes Intl.NumberFormat, Intl.DateTimeFormat, and Intl.Collator that allow us to format numbers (including monetary amounts and percentages), dates, and times in locale-appropriate ways and to compare strings in locale-appropriate ways. These classes are not part of the ECMAScript standard but are defined as part of the ECMA402 standard and are well-supported by web browsers. The Intl API is also supported in Node, but at the time of this writing, prebuilt Node binaries do not ship with the localization data required to make them work with locales other than US English. So in order to use these classes with Node, you may need to download a separate data package or use a custom build of Node.</p>
<p>One of the most important parts of internationalization is displaying text that has been translated into the userâ€™s language. There are various ways to achieve this, but none of them are within the scope of the Intl API described here.</p>
<h3 id="11-7-1-Formatting-Numbers"><a href="#11-7-1-Formatting-Numbers" class="headerlink" title="11.7.1 Formatting Numbers"></a>11.7.1 Formatting Numbers</h3><p>Users around the world expect numbers to be formatted in different ways. Decimal points can be periods or commas. Thousands separators can be commas or periods, and they arenâ€™t used every three digits in all places. Some currencies are divided into hundredths, some into thousandths, and some have no subdivisions. Finally, although the so-called â€œArabic numeralsâ€ 0 through 9 are used in many languages, this is not universal, and users in some countries will expect to see numbers written using the digits from their own scripts.</p>
<p>The Intl.NumberFormat class defines a format() method that takes all of these formatting possibilities into account. The constructor takes two arguments. The first argument specifies the locale that the number should be formatted for and the second is an object that specifies more details about how the number should be formatted. If the first argument is omitted or undefined, then the system locale (which we assume to be the userâ€™s preferred locale) will be used. If the first argument is a string, it specifies a desired locale, such as â€œen-USâ€ (English as used in the United States), â€œfrâ€ (French), or â€œzh-Hans-CNâ€ (Chinese, using the simplified Han writing system, in China). The first argument can also be an array of locale strings, and in this case, Intl.NumberFormat will choose the most specific one that is well supported.</p>
<p>The second argument to the Intl.NumberFormat() constructor, if specified, should be an object that defines one or more of the following properties:</p>
<p>style<br>Specifies the kind of number formatting that is required. The default is â€œdecimalâ€. Specify â€œpercentâ€ to format a number as a percentage or specify â€œcurrencyâ€ to specify a number as an amount of money.</p>
<p>currency<br>If style is â€œcurrencyâ€, then this property is required to specify the three-letter ISO currency code (such as â€œUSDâ€ for US dollars or â€œGBPâ€ for British pounds) of the desired currency.</p>
<p>currencyDisplay<br>If style is â€œcurrencyâ€, then this property specifies how the currency is displayed. The default value â€œsymbolâ€ uses a currency symbol if the currency has one. The value â€œcodeâ€ uses the three-letter ISO code, and the value â€œnameâ€ spells out the name of the currency in long form.</p>
<p>useGrouping<br>Set this property to false if you do not want numbers to have thousands separators (or their locale-appropriate equivalents).</p>
<p>minimumIntegerDigits<br>The minimum number of digits to use to display the integer part of the number. If the number has fewer digits than this, it will be padded on the left with zeros. The default value is 1, but you can use values as high as 21.</p>
<p>minimumFractionDigits, maximumFractionDigits<br>These two properties control the formatting of the fractional part of the number. If a number has fewer fractional digits than the minimum, it will be padded with zeros on the right. If it has more than the maximum, then the fractional part will be rounded. Legal values for both properties are between 0 and 20. The default minimum is 0 and the default maximum is 3, except when formatting monetary amounts, when the length of the fractional part varies depending on the specified currency.</p>
<p>minimumSignificantDigits, maximumSignificantDigits<br>These properties control the number of significant digits used when formatting a number, making them suitable when formatting scientific data, for example. If specified, these properties override the integer and fractional digit properties listed previously. Legal values are between 1 and 21.</p>
<p>Once you have created an Intl.NumberFormat object with the desired locale and options, you use it by passing a number to its format() method, which returns an appropriately formatted string. For example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> euros = <span class="title class_">Intl</span>.<span class="title class_">NumberFormat</span>(<span class="string">&quot;es&quot;</span>, &#123;<span class="attr">style</span>: <span class="string">&quot;currency&quot;</span>, <span class="attr">currency</span>: <span class="string">&quot;EUR&quot;</span>&#125;);</span><br><span class="line">euros.<span class="title function_">format</span>(<span class="number">10</span>)    <span class="comment">// =&gt; &quot;10,00 â‚¬&quot;: ten euros, Spanish formatting</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pounds = <span class="title class_">Intl</span>.<span class="title class_">NumberFormat</span>(<span class="string">&quot;en&quot;</span>, &#123;<span class="attr">style</span>: <span class="string">&quot;currency&quot;</span>, <span class="attr">currency</span>: <span class="string">&quot;GBP&quot;</span>&#125;);</span><br><span class="line">pounds.<span class="title function_">format</span>(<span class="number">1000</span>) <span class="comment">// =&gt; &quot;Â£1,000.00&quot;: One thousand pounds, English formatting</span></span><br></pre></td></tr></table></figure>
<p>A useful feature of Intl.NumberFormat (and the other Intl classes as well) is that its format() method is bound to the NumberFormat object to which it belongs. So instead of defining a variable that refers to the formatting object and then invoking the format() method on that, you can just assign the format() method to a variable and use it as if it were a standalone function, as in this example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = [<span class="number">0.05</span>, <span class="number">.75</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> formatData = <span class="title class_">Intl</span>.<span class="title class_">NumberFormat</span>(<span class="literal">undefined</span>, &#123;</span><br><span class="line">    <span class="attr">style</span>: <span class="string">&quot;percent&quot;</span>,</span><br><span class="line">    <span class="attr">minimumFractionDigits</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">maximumFractionDigits</span>: <span class="number">1</span></span><br><span class="line">&#125;).<span class="property">format</span>;</span><br><span class="line"></span><br><span class="line">data.<span class="title function_">map</span>(formatData)   <span class="comment">// =&gt; [&quot;5.0%&quot;, &quot;75.0%&quot;, &quot;100.0%&quot;]: in en-US locale</span></span><br></pre></td></tr></table></figure>
<p>Some languages, such as Arabic, use their own script for decimal digits:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arabic = <span class="title class_">Intl</span>.<span class="title class_">NumberFormat</span>(<span class="string">&quot;ar&quot;</span>, &#123;<span class="attr">useGrouping</span>: <span class="literal">false</span>&#125;).<span class="property">format</span>;</span><br><span class="line"><span class="title function_">arabic</span>(<span class="number">1234567890</span>)   <span class="comment">// =&gt; &quot;Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©Ù &quot;</span></span><br></pre></td></tr></table></figure>
<p>Other languages, such as Hindi, use a script that has its own set of digits, but tend to use the ASCII digits 0â€“9 by default. If you want to override the default script used for digits, add -u-nu- to the locale and follow it with an abbreviated script name. You can format numbers with Indian-style grouping and Devanagari digits like this, for example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hindi = <span class="title class_">Intl</span>.<span class="title class_">NumberFormat</span>(<span class="string">&quot;hi-IN-u-nu-deva&quot;</span>).<span class="property">format</span>;</span><br><span class="line"><span class="title function_">hindi</span>(<span class="number">1234567890</span>)    <span class="comment">// =&gt; &quot;à¥§,à¥¨à¥©,à¥ªà¥«,à¥¬à¥­,à¥®à¥¯à¥¦&quot;</span></span><br></pre></td></tr></table></figure>
<p>-u- in a locale specifies that what comes next is a Unicode extension. nu is the extension name for the numbering system, and deva is short for Devanagari. The Intl API standard defines names for a number of other numbering systems, mostly for the Indic languages of South and Southeast Asia.</p>
<h3 id="11-7-2-Formatting-Dates-and-Times"><a href="#11-7-2-Formatting-Dates-and-Times" class="headerlink" title="11.7.2 Formatting Dates and Times"></a>11.7.2 Formatting Dates and Times</h3><p>The Intl.DateTimeFormat class is a lot like the Intl.NumberFormat class. The Intl.DateTimeFormat() constructor takes the same two arguments that Intl.NumberFormat() does: a locale or array of locales and an object of formatting options. And the way you use an Intl.DateTimeFormat instance is by calling its format() method to convert a Date object to a string.</p>
<p>As mentioned in Â§11.4, the Date class defines simple toLocaleDateString() and toLocaleTimeString() methods that produce locale-appropriate output for the userâ€™s locale. But these methods donâ€™t give you any control over what fields of the date and time are displayed. Maybe you want to omit the year but add a weekday to the date format. Do you want the month to be represented numerically or spelled out by name? The Intl.DateTimeFormat class provides fine-grained control over what is output based on the properties in the options object that is passed as the second argument to the constructor. Note, however, that Intl.DateTimeFormat cannot always display exactly what you ask for. If you specify options to format hours and seconds but omit minutes, youâ€™ll find that the formatter displays the minutes anyway. The idea is that you use the options object to specify what date and time fields youâ€™d like to present to the user and how youâ€™d like those formatted (by name or by number, for example), then the formatter will look for a locale-appropriate format that most closely matches what you have asked for.</p>
<p>The available options are the following. Only specify properties for date and time fields that you would like to appear in the formatted output.</p>
<p>year<br>Use â€œnumericâ€ for a full, four-digit year or â€œ2-digitâ€ for a two-digit abbreviation.</p>
<p>month<br>Use â€œnumericâ€ for a possibly short number like â€œ1â€, or â€œ2-digitâ€ for a numeric representation that always has two digits, like â€œ01â€. Use â€œlongâ€ for a full name like â€œJanuaryâ€, â€œshortâ€ for an abbreviated name like â€œJanâ€, and â€œnarrowâ€ for a highly abbreviated name like â€œJâ€ that is not guaranteed to be unique.</p>
<p>day<br>Use â€œnumericâ€ for a one- or two-digit number or â€œ2-digitâ€ for a two-digit number for the day-of-month.</p>
<p>weekday<br>Use â€œlongâ€ for a full name like â€œMondayâ€, â€œshortâ€ for an abbreviated name like â€œMonâ€, and â€œnarrowâ€ for a highly abbreviated name like â€œMâ€ that is not guaranteed to be unique.</p>
<p>era<br>This property specifies whether a date should be formatted with an era, such as CE or BCE. This may be useful if you are formatting dates from very long ago or if you are using a Japanese calendar. Legal values are â€œlongâ€, â€œshortâ€, and â€œnarrowâ€.</p>
<p>hour, minute, second<br>These properties specify how you would like time displayed. Use â€œnumericâ€ for a one- or two-digit field or â€œ2-digitâ€ to force single-digit numbers to be padded on the left with a 0.</p>
<p>timeZone<br>This property specifies the desired time zone for which the date should be formatted. If omitted, the local time zone is used. Implementations always recognize â€œUTCâ€ and may also recognize Internet Assigned Numbers Authority (IANA) time zone names, such as â€œAmerica&#x2F;Los_Angelesâ€.</p>
<p>timeZoneName<br>This property specifies how the time zone should be displayed in a formatted date or time. Use â€œlongâ€ for a fully spelled-out time zone name and â€œshortâ€ for an abbreviated or numeric time zone.</p>
<p>hour12<br>This boolean property specifies whether or not to use 12-hour time. The default is locale dependent, but you can override it with this property.</p>
<p>hourCycle<br>This property allows you to specify whether midnight is written as 0 hours, 12 hours, or 24 hours. The default is locale dependent, but you can override the default with this property. Note that hour12 takes precedence over this property. Use the value â€œh11â€ to specify that midnight is 0 and the hour before midnight is 11pm. Use â€œh12â€ to specify that midnight is 12. Use â€œh23â€ to specify that midnight is 0 and the hour before midnight is 23. And use â€œh24â€ to specify that midnight is 24.</p>
<p>Here are some examples:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2020-01-02T13:14:15Z&quot;</span>);  <span class="comment">// January 2nd, 2020, 13:14:15 UTC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// With no options, we get a basic numeric date format</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-US&quot;</span>).<span class="title function_">format</span>(d) <span class="comment">// =&gt; &quot;1/2/2020&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;fr-FR&quot;</span>).<span class="title function_">format</span>(d) <span class="comment">// =&gt; &quot;02/01/2020&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Spelled out weekday and month</span></span><br><span class="line"><span class="keyword">let</span> opts = &#123; <span class="attr">weekday</span>: <span class="string">&quot;long&quot;</span>, <span class="attr">month</span>: <span class="string">&quot;long&quot;</span>, <span class="attr">year</span>: <span class="string">&quot;numeric&quot;</span>, <span class="attr">day</span>: <span class="string">&quot;numeric&quot;</span> &#125;;</span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-US&quot;</span>, opts).<span class="title function_">format</span>(d) <span class="comment">// =&gt; &quot;Thursday, January 2, 2020&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;es-ES&quot;</span>, opts).<span class="title function_">format</span>(d) <span class="comment">// =&gt; &quot;jueves, 2 de enero de 2020&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The time in New York, for a French-speaking Canadian</span></span><br><span class="line">opts = &#123; <span class="attr">hour</span>: <span class="string">&quot;numeric&quot;</span>, <span class="attr">minute</span>: <span class="string">&quot;2-digit&quot;</span>, <span class="attr">timeZone</span>: <span class="string">&quot;America/New_York&quot;</span> &#125;;</span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;fr-CA&quot;</span>, opts).<span class="title function_">format</span>(d) <span class="comment">// =&gt; &quot;8 h 14&quot;</span></span><br></pre></td></tr></table></figure>
<p>Intl.DateTimeFormat can display dates using calendars other than the default Julian calendar based on the Christian era. Although some locales may use a non-Christian calendar by default, you can always explicitly specify the calendar to use by adding -u-ca- to the locale and following that with the name of the calendar. Possible calendar names include â€œbuddhistâ€, â€œchineseâ€, â€œcopticâ€, â€œethiopicâ€, â€œgregoryâ€, â€œhebrewâ€, â€œindianâ€, â€œislamicâ€, â€œiso8601â€, â€œjapaneseâ€, and â€œpersianâ€. Continuing the preceding example, we can determine the year in various non-Christian calendars:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> opts = &#123; <span class="attr">year</span>: <span class="string">&quot;numeric&quot;</span>, <span class="attr">era</span>: <span class="string">&quot;short&quot;</span> &#125;;</span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en&quot;</span>, opts).<span class="title function_">format</span>(d)                <span class="comment">// =&gt; &quot;2020 AD&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-u-ca-iso8601&quot;</span>, opts).<span class="title function_">format</span>(d)   <span class="comment">// =&gt; &quot;2020 AD&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-u-ca-hebrew&quot;</span>, opts).<span class="title function_">format</span>(d)    <span class="comment">// =&gt; &quot;5780 AM&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-u-ca-buddhist&quot;</span>, opts).<span class="title function_">format</span>(d)  <span class="comment">// =&gt; &quot;2563 BE&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-u-ca-islamic&quot;</span>, opts).<span class="title function_">format</span>(d)   <span class="comment">// =&gt; &quot;1441 AH&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-u-ca-persian&quot;</span>, opts).<span class="title function_">format</span>(d)   <span class="comment">// =&gt; &quot;1398 AP&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-u-ca-indian&quot;</span>, opts).<span class="title function_">format</span>(d)    <span class="comment">// =&gt; &quot;1941 Saka&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-u-ca-chinese&quot;</span>, opts).<span class="title function_">format</span>(d)   <span class="comment">// =&gt; &quot;36 78&quot;</span></span><br><span class="line"><span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(<span class="string">&quot;en-u-ca-japanese&quot;</span>, opts).<span class="title function_">format</span>(d)  <span class="comment">// =&gt; &quot;2 Reiwa&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="11-7-3-Comparing-Strings"><a href="#11-7-3-Comparing-Strings" class="headerlink" title="11.7.3 Comparing Strings"></a>11.7.3 Comparing Strings</h3><p>The problem of sorting strings into alphabetical order (or some more general â€œcollation orderâ€ for nonalphabetical scripts) is more challenging than English speakers often realize. English uses a relatively small alphabet with no accented letters, and we have the benefit of a character encoding (ASCII, since incorporated into Unicode) whose numerical values perfectly match our standard string sort order. Things are not so simple in other languages. Spanish, for example treats Ã± as a distinct letter that comes after n and before o. Lithuanian alphabetizes Y before J, and Welsh treats digraphs like CH and DD as single letters with CH coming after C and DD sorting after D.</p>
<p>If you want to display strings to a user in an order that they will find natural, it is not enough use the sort() method on an array of strings. But if you create an Intl.Collator object, you can pass the compare() method of that object to the sort() method to perform locale-appropriate sorting of the strings. Intl.Collator objects can be configured so that the compare() method performs case-insensitive comparisons or even comparisons that only consider the base letter and ignore accents and other diacritics.</p>
<p>Like Intl.NumberFormat() and Intl.DateTimeFormat(), the Intl.Collator() constructor takes two arguments. The first specifies a locale or an array of locales, and the second is an optional object whose properties specify exactly what kind of string comparison is to be done. The supported properties are these:</p>
<p>usage<br>This property specifies how the collator object is to be used. The default value is â€œsortâ€, but you can also specify â€œsearchâ€. The idea is that, when sorting strings, you typically want a collator that differentiates as many strings as possible to produce a reliable ordering. But when comparing two strings, some locales may want a less strict comparison that ignores accents, for example.</p>
<p>sensitivity<br>This property specifies whether the collator is sensitive to letter case and accents when comparing strings. The value â€œbaseâ€ causes comparisons that ignore case and accents, considering only the base letter for each character. (Note, however, that some languages consider certain accented characters to be distinct base letters.) â€œaccentâ€ considers accents in comparisons but ignores case. â€œcaseâ€ considers case and ignores accents. And â€œvariantâ€ performs strict comparisons that consider both case and accents. The default value for this property is â€œvariantâ€ when usage is â€œsortâ€. If usage is â€œsearchâ€, then the default sensitivity depends on the locale.</p>
<p>ignorePunctuation<br>Set this property to true to ignore spaces and punctuation when comparing strings. With this property set to true, the strings â€œany oneâ€ and â€œanyoneâ€, for example, will be considered equal.</p>
<p>numeric<br>Set this property to true if the strings you are comparing are integers or contain integers and you want them to be sorted into numerical order instead of alphabetical order. With this option set, the string â€œVersion 9â€ will be sorted before â€œVersion 10â€, for example.</p>
<p>caseFirst<br>This property specifies which letter case should come first. If you specify â€œupperâ€, then â€œAâ€ will sort before â€œaâ€. And if you specify â€œlowerâ€, then â€œaâ€ will sort before â€œAâ€. In either case, note that the upper- and lowercase variants of the same letter will be next to one another in sort order, which is different than Unicode lexicographic ordering (the default behavior of the Array sort() method) in which all ASCII uppercase letters come before all ASCII lowercase letters. The default for this property is locale dependent, and implementations may ignore this property and not allow you to override the case sort order.</p>
<p>Once you have created an Intl.Collator object for the desired locale and options, you can use its compare() method to compare two strings. This method returns a number. If the returned value is less than zero, then the first string comes before the second string. If it is greater than zero, then the first string comes after the second string. And if compare() returns zero, then the two strings are equal as far as this collator is concerned.</p>
<p>This compare() method that takes two strings and returns a number less than, equal to, or greater than zero is exactly what the Array sort() method expects for its optional argument. Also, Intl.Collator automatically binds the compare() method to its instance, so you can pass it directly to sort() without having to write a wrapper function and invoke it through the collator object. Here are some examples:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A basic comparator for sorting in the user&#x27;s locale.</span></span><br><span class="line"><span class="comment">// Never sort human-readable strings without passing something like this:</span></span><br><span class="line"><span class="keyword">const</span> collator = <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">Collator</span>().<span class="property">compare</span>;</span><br><span class="line">[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;z&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;Z&quot;</span>].<span class="title function_">sort</span>(collator)      <span class="comment">// =&gt; [&quot;a&quot;, &quot;A&quot;, &quot;z&quot;, &quot;Z&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Filenames often include numbers, so we should sort those specially</span></span><br><span class="line"><span class="keyword">const</span> filenameOrder = <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">Collator</span>(<span class="literal">undefined</span>, &#123; <span class="attr">numeric</span>: <span class="literal">true</span> &#125;).<span class="property">compare</span>;</span><br><span class="line">[<span class="string">&quot;page10&quot;</span>, <span class="string">&quot;page9&quot;</span>].<span class="title function_">sort</span>(filenameOrder)  <span class="comment">// =&gt; [&quot;page9&quot;, &quot;page10&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Find all strings that loosely match a target string</span></span><br><span class="line"><span class="keyword">const</span> fuzzyMatcher = <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">Collator</span>(<span class="literal">undefined</span>, &#123;</span><br><span class="line">    <span class="attr">sensitivity</span>: <span class="string">&quot;base&quot;</span>,</span><br><span class="line">    <span class="attr">ignorePunctuation</span>: <span class="literal">true</span></span><br><span class="line">&#125;).<span class="property">compare</span>;</span><br><span class="line"><span class="keyword">let</span> strings = [<span class="string">&quot;food&quot;</span>, <span class="string">&quot;fool&quot;</span>, <span class="string">&quot;FÃ¸Ã¸ Bar&quot;</span>];</span><br><span class="line">strings.<span class="title function_">findIndex</span>(<span class="function"><span class="params">s</span> =&gt;</span> <span class="title function_">fuzzyMatcher</span>(s, <span class="string">&quot;foobar&quot;</span>) === <span class="number">0</span>)  <span class="comment">// =&gt; 2</span></span><br></pre></td></tr></table></figure>
<p>Some locales have more than one possible collation order. In Germany, for example, phone books use a slightly more phonetic sort order than dictionaries do. In Spain, before 1994, â€œchâ€ and â€œllâ€ were treated as separate letters, so that country now has a modern sort order and a traditional sort order. And in China, collation order can be based on character encodings, the base radical and strokes of each character, or on the Pinyin romanization of characters. These collation variants cannot be selected through the Intl.Collator options argument, but they can be selected by adding -u-co- to the locale string and adding the name of the desired variant. Use â€œde-DE-u-co-phonebkâ€ for phone book ordering in Germany, for example, and â€œzh-TW-u-co-pinyinâ€ for Pinyin ordering in Taiwan.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Before 1994, CH and LL were treated as separate letters in Spain</span></span><br><span class="line"><span class="keyword">const</span> modernSpanish = <span class="title class_">Intl</span>.<span class="title class_">Collator</span>(<span class="string">&quot;es-ES&quot;</span>).<span class="property">compare</span>;</span><br><span class="line"><span class="keyword">const</span> traditionalSpanish = <span class="title class_">Intl</span>.<span class="title class_">Collator</span>(<span class="string">&quot;es-ES-u-co-trad&quot;</span>).<span class="property">compare</span>;</span><br><span class="line"><span class="keyword">let</span> palabras = [<span class="string">&quot;luz&quot;</span>, <span class="string">&quot;llama&quot;</span>, <span class="string">&quot;como&quot;</span>, <span class="string">&quot;chico&quot;</span>];</span><br><span class="line">palabras.<span class="title function_">sort</span>(modernSpanish)      <span class="comment">// =&gt; [&quot;chico&quot;, &quot;como&quot;, &quot;llama&quot;, &quot;luz&quot;]</span></span><br><span class="line">palabras.<span class="title function_">sort</span>(traditionalSpanish) <span class="comment">// =&gt; [&quot;como&quot;, &quot;chico&quot;, &quot;luz&quot;, &quot;llama&quot;]</span></span><br></pre></td></tr></table></figure>
<h2 id="11-8-The-Console-API"><a href="#11-8-The-Console-API" class="headerlink" title="11.8 The Console API"></a>11.8 The Console API</h2><p>Youâ€™ve seen the console.log() function used throughout this book: in web browsers, it prints a string in the â€œConsoleâ€ tab of the browserâ€™s developer tools pane, which can be very helpful when debugging. In Node, console.log() is a general-purpose output function and prints its arguments to the processâ€™s stdout stream, where it typically appears to the user in a terminal window as program output.</p>
<p>The Console API defines a number of useful functions in addition to console.log(). The API is not part of any ECMAScript standard, but it is supported by browsers and by Node and has been formally written up and standardized at <a target="_blank" rel="noopener" href="https://console.spec.whatwg.org/">https://console.spec.whatwg.org</a>.</p>
<p>The Console API defines the following functions:</p>
<p>console.log()<br>This is the most well-known of the console functions. It converts its arguments to strings and outputs them to the console. It includes spaces between the arguments and starts a new line after outputting all arguments.</p>
<p>console.debug(), console.info(), console.warn(), console.error()<br>These functions are almost identical to console.log(). In Node, console.error() sends its output to the stderr stream rather than the stdout stream, but the other functions are aliases of console.log(). In browsers, output messages generated by each of these functions may be prefixed by an icon that indicates its level or severity, and the developer console may also allow developers to filter console messages by level.</p>
<p>console.assert()<br>If the first argument is truthy (i.e., if the assertion passes), then this function does nothing. But if the first argument is false or another falsy value, then the remaining arguments are printed as if they had been passed to console.error() with an â€œAssertion failedâ€ prefix. Note that, unlike typical assert() functions, console.assert() does not throw an exception when an assertion fails.</p>
<p>console.clear()<br>This function clears the console when that is possible. This works in browsers and in Node when Node is displaying its output to a terminal. If Nodeâ€™s output has been redirected to a file or a pipe, however, then calling this function has no effect.</p>
<p>console.table()<br>This function is a remarkably powerful but little-known feature for producing tabular output, and it is particularly useful in Node programs that need to produce output that summarizes data. console.table() attempts to display its argument in tabular form (although, if it canâ€™t do that, it displays it using regular console.log() formatting). This works best when the argument is a relatively short array of objects, and all of the objects in the array have the same (relatively small) set of properties. In this case, each object in the array is formatted as a row of the table, and each property is a column of the table. You can also pass an array of property names as an optional second argument to specify the desired set of columns. If you pass an object instead of an array of objects, then the output will be a table with one column for property names and one column for property values. Or, if those property values are themselves objects, their property names will become columns in the table.</p>
<p>console.trace()<br>This function logs its arguments like console.log() does, and, in addition, follows its output with a stack trace. In Node, the output goes to stderr instead of stdout.</p>
<p>console.count()<br>This function takes a string argument and logs that string, followed by the number of times it has been called with that string. This can be useful when debugging an event handler, for example, if you need to keep track of how many times the event handler has been triggered.</p>
<p>console.countReset()<br>This function takes a string argument and resets the counter for that string.</p>
<p>console.group()<br>This function prints its arguments to the console as if they had been passed to console.log(), then sets the internal state of the console so that all subsequent console messages (until the next console.groupEnd() call) will be indented relative to the message that it just printed. This allows a group of related messages to be visually grouped with indentation. In web browsers, the developer console typically allows grouped messages to be collapsed and expanded as a group. The arguments to console.group() are typically used to provide an explanatory name for the group.</p>
<p>console.groupCollapsed()<br>This function works like console.group() except that in web browsers, the group will be â€œcollapsedâ€ by default and the messages it contains will be hidden unless the user clicks to expand the group. In Node, this function is a synonym for console.group().</p>
<p>console.groupEnd()<br>This function takes no arguments. It produces no output of its own but ends the indentation and grouping caused by the most recent call to console.group() or console.groupCollapsed().</p>
<p>console.time()<br>This function takes a single string argument, makes a note of the time it was called with that string, and produces no output.</p>
<p>console.timeLog()<br>This function takes a string as its first argument. If that string had previously been passed to console.time(), then it prints that string followed by the elapsed time since the console.time() call. If there are any additional arguments to console.timeLog(), they are printed as if they had been passed to console.log().</p>
<p>console.timeEnd()<br>This function takes a single string argument. If that argument had previously been passed to console.time(), then it prints that argument and the elapsed time. After calling console.timeEnd(), it is no longer legal to call console.timeLog() without first calling console.time() again.</p>
<h3 id="11-8-1-Formatted-Output-with-Console"><a href="#11-8-1-Formatted-Output-with-Console" class="headerlink" title="11.8.1 Formatted Output with Console"></a>11.8.1 Formatted Output with Console</h3><p>Console functions that print their arguments like console.log() have a little-known feature: if the first argument is a string that includes %s, %i, %d, %f, %o, %O, or %c, then this first argument is treated as format string,6 and the values of subsequent arguments are substituted into the string in place of the two-character % sequences.</p>
<p>The meanings of the sequences are as follows:</p>
<p>%s<br>The argument is converted to a string.</p>
<p>%i and %d<br>The argument is converted to a number and then truncated to an integer.</p>
<p>%f<br>The argument is converted to a number</p>
<p>%o and %O<br>The argument is treated as an object, and property names and values are displayed. (In web browsers, this display is typically interactive, and users can expand and collapse properties to explore a nested data structure.) %o and %O both display object details. The uppercase variant uses an implementation-dependent output format that is judged to be most useful for software developers.</p>
<p>%c<br>In web browsers, the argument is interpreted as a string of CSS styles and used to style any text that follows (until the next %c sequence or the end of the string). In Node, the %c sequence and its corresponding argument are simply ignored.</p>
<p>Note that it is not often necessary to use a format string with the console functions: it is usually easy to obtain suitable output by simply passing one or more values (including objects) to the function and allowing the implementation to display them in a useful way. As an example, note that, if you pass an Error object to console.log(), it is automatically printed along with its stack trace.</p>
<h2 id="11-9-URL-APIs"><a href="#11-9-URL-APIs" class="headerlink" title="11.9 URL APIs"></a>11.9 URL APIs</h2><p>Since JavaScript is so commonly used in web browsers and web servers, it is common for JavaScript code to need to manipulate URLs. The URL class parses URLs and also allows modification (adding search parameters or altering paths, for example) of existing URLs. It also properly handles the complicated topic of escaping and unescaping the various components of a URL.</p>
<p>The URL class is not part of any ECMAScript standard, but it works in Node and all internet browsers other than Internet Explorer. It is standardized at <a target="_blank" rel="noopener" href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org</a>.</p>
<p>Create a URL object with the URL() constructor, passing an absolute URL string as the argument. Or pass a relative URL as the first argument and the absolute URL that it is relative to as the second argument. Once you have created the URL object, its various properties allow you to query unescaped versions of the various parts of the URL:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;https://example.com:8000/path/name?q=term#fragment&quot;</span>);</span><br><span class="line">url.<span class="property">href</span>        <span class="comment">// =&gt; &quot;https://example.com:8000/path/name?q=term#fragment&quot;</span></span><br><span class="line">url.<span class="property">origin</span>      <span class="comment">// =&gt; &quot;https://example.com:8000&quot;</span></span><br><span class="line">url.<span class="property">protocol</span>    <span class="comment">// =&gt; &quot;https:&quot;</span></span><br><span class="line">url.<span class="property">host</span>        <span class="comment">// =&gt; &quot;example.com:8000&quot;</span></span><br><span class="line">url.<span class="property">hostname</span>    <span class="comment">// =&gt; &quot;example.com&quot;</span></span><br><span class="line">url.<span class="property">port</span>        <span class="comment">// =&gt; &quot;8000&quot;</span></span><br><span class="line">url.<span class="property">pathname</span>    <span class="comment">// =&gt; &quot;/path/name&quot;</span></span><br><span class="line">url.<span class="property">search</span>      <span class="comment">// =&gt; &quot;?q=term&quot;</span></span><br><span class="line">url.<span class="property">hash</span>        <span class="comment">// =&gt; &quot;#fragment&quot;</span></span><br></pre></td></tr></table></figure>
<p>Although it is not commonly used, URLs can include a username or a username and password, and the URL class can parse these URL components, too:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;ftp://admin:1337!@ftp.example.com/&quot;</span>);</span><br><span class="line">url.<span class="property">href</span>       <span class="comment">// =&gt; &quot;ftp://admin:1337!@ftp.example.com/&quot;</span></span><br><span class="line">url.<span class="property">origin</span>     <span class="comment">// =&gt; &quot;ftp://ftp.example.com&quot;</span></span><br><span class="line">url.<span class="property">username</span>   <span class="comment">// =&gt; &quot;admin&quot;</span></span><br><span class="line">url.<span class="property">password</span>   <span class="comment">// =&gt; &quot;1337!&quot;</span></span><br></pre></td></tr></table></figure>
<p>The origin property here is a simple combination of the URL protocol and host (including the port if one is specified). As such, it is a read-only property. But each of the other properties demonstrated in the previous example is read&#x2F;write: you can set any of these properties to set the corresponding part of the URL:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;https://example.com&quot;</span>);  <span class="comment">// Start with our server</span></span><br><span class="line">url.<span class="property">pathname</span> = <span class="string">&quot;api/search&quot;</span>;               <span class="comment">// Add a path to an API endpoint</span></span><br><span class="line">url.<span class="property">search</span> = <span class="string">&quot;q=test&quot;</span>;                     <span class="comment">// Add a query parameter</span></span><br><span class="line">url.<span class="title function_">toString</span>()  <span class="comment">// =&gt; &quot;https://example.com/api/search?q=test&quot;</span></span><br></pre></td></tr></table></figure>
<p>One of the important features of the URL class is that it correctly adds punctuation and escapes special characters in URLs when that is needed:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;https://example.com&quot;</span>);</span><br><span class="line">url.<span class="property">pathname</span> = <span class="string">&quot;path with spaces&quot;</span>;</span><br><span class="line">url.<span class="property">search</span> = <span class="string">&quot;q=foo#bar&quot;</span>;</span><br><span class="line">url.<span class="property">pathname</span>  <span class="comment">// =&gt; &quot;/path%20with%20spaces&quot;</span></span><br><span class="line">url.<span class="property">search</span>    <span class="comment">// =&gt; &quot;?q=foo%23bar&quot;</span></span><br><span class="line">url.<span class="property">href</span>      <span class="comment">// =&gt; &quot;https://example.com/path%20with%20spaces?q=foo%23bar&quot;</span></span><br></pre></td></tr></table></figure>
<p>The href property in these examples is a special one: reading href is equivalent to calling toString(): it reassembles all parts of the URL into the canonical string form of the URL. And setting href to a new string reruns the URL parser on the new string as if you had called the URL() constructor again.</p>
<p>In the previous examples, weâ€™ve been using the search property to refer to the entire query portion of a URL, which consists of the characters from a question mark to the end of the URL or to the first hash character. Sometimes, it is sufficient to just treat this as a single URL property. Often, however, HTTP requests encode the values of multiple form fields or multiple API parameters into the query portion of a URL using the application&#x2F;x-www-form-urlencoded format. In this format, the query portion of the URL is a question mark followed by one or more name&#x2F;value pairs, which are separated from one another by ampersands. The same name can appear more than once, resulting in a named search parameter with more than one value.</p>
<p>If you want to encode these kinds of name&#x2F;value pairs into the query portion of a URL, then the searchParams property will be more useful than the search property. The search property is a read&#x2F;write string that lets you get and set the entire query portion of the URL. The searchParams property is a read-only reference to a URLSearchParams object, which has an API for getting, setting, adding, deleting, and sorting the parameters encoded into the query portion of the URL:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;https://example.com/search&quot;</span>);</span><br><span class="line">url.<span class="property">search</span>                            <span class="comment">// =&gt; &quot;&quot;: no query yet</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">append</span>(<span class="string">&quot;q&quot;</span>, <span class="string">&quot;term&quot;</span>); <span class="comment">// Add a search parameter</span></span><br><span class="line">url.<span class="property">search</span>                            <span class="comment">// =&gt; &quot;?q=term&quot;</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">set</span>(<span class="string">&quot;q&quot;</span>, <span class="string">&quot;x&quot;</span>);       <span class="comment">// Change the value of this parameter</span></span><br><span class="line">url.<span class="property">search</span>                            <span class="comment">// =&gt; &quot;?q=x&quot;</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">get</span>(<span class="string">&quot;q&quot;</span>)             <span class="comment">// =&gt; &quot;x&quot;: query the parameter value</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">has</span>(<span class="string">&quot;q&quot;</span>)             <span class="comment">// =&gt; true: there is a q parameter</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">has</span>(<span class="string">&quot;p&quot;</span>)             <span class="comment">// =&gt; false: there is no p parameter</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">append</span>(<span class="string">&quot;opts&quot;</span>, <span class="string">&quot;1&quot;</span>); <span class="comment">// Add another search parameter</span></span><br><span class="line">url.<span class="property">search</span>                            <span class="comment">// =&gt; &quot;?q=x&amp;opts=1&quot;</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">append</span>(<span class="string">&quot;opts&quot;</span>, <span class="string">&quot;&amp;&quot;</span>); <span class="comment">// Add another value for same name</span></span><br><span class="line">url.<span class="property">search</span>                            <span class="comment">// =&gt; &quot;?q=x&amp;opts=1&amp;opts=%26&quot;: note escape</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">get</span>(<span class="string">&quot;opts&quot;</span>)          <span class="comment">// =&gt; &quot;1&quot;: the first value</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">getAll</span>(<span class="string">&quot;opts&quot;</span>)       <span class="comment">// =&gt; [&quot;1&quot;, &quot;&amp;&quot;]: all values</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">sort</span>();              <span class="comment">// Put params in alphabetical order</span></span><br><span class="line">url.<span class="property">search</span>                            <span class="comment">// =&gt; &quot;?opts=1&amp;opts=%26&amp;q=x&quot;</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">set</span>(<span class="string">&quot;opts&quot;</span>, <span class="string">&quot;y&quot;</span>);    <span class="comment">// Change the opts param</span></span><br><span class="line">url.<span class="property">search</span>                            <span class="comment">// =&gt; &quot;?opts=y&amp;q=x&quot;</span></span><br><span class="line"><span class="comment">// searchParams is iterable</span></span><br><span class="line">[...url.<span class="property">searchParams</span>]                 <span class="comment">// =&gt; [[&quot;opts&quot;, &quot;y&quot;], [&quot;q&quot;, &quot;x&quot;]]</span></span><br><span class="line">url.<span class="property">searchParams</span>.<span class="title function_">delete</span>(<span class="string">&quot;opts&quot;</span>);      <span class="comment">// Delete the opts param</span></span><br><span class="line">url.<span class="property">search</span>                            <span class="comment">// =&gt; &quot;?q=x&quot;</span></span><br><span class="line">url.<span class="property">href</span>                              <span class="comment">// =&gt; &quot;https://example.com/search?q=x&quot;</span></span><br></pre></td></tr></table></figure>
<p>The value of the searchParams property is a URLSearchParams object. If you want to encode URL parameters into a query string, you can create a URLSearchParams object, append parameters, then convert it to a string and set it on the search property of a URL:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&quot;http://example.com&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>();</span><br><span class="line">params.<span class="title function_">append</span>(<span class="string">&quot;q&quot;</span>, <span class="string">&quot;term&quot;</span>);</span><br><span class="line">params.<span class="title function_">append</span>(<span class="string">&quot;opts&quot;</span>, <span class="string">&quot;exact&quot;</span>);</span><br><span class="line">params.<span class="title function_">toString</span>()               <span class="comment">// =&gt; &quot;q=term&amp;opts=exact&quot;</span></span><br><span class="line">url.<span class="property">search</span> = params;</span><br><span class="line">url.<span class="property">href</span>                        <span class="comment">// =&gt; &quot;http://example.com/?q=term&amp;opts=exact&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="11-9-1-Legacy-URL-Functions"><a href="#11-9-1-Legacy-URL-Functions" class="headerlink" title="11.9.1 Legacy URL Functions"></a>11.9.1 Legacy URL Functions</h3><p>Prior to the definition of the URL API described previously, there have been multiple attempts to support URL escaping and unescaping in the core JavaScript language. The first attempt was the globally defined escape() and unescape() functions, which are now deprecated but still widely implemented. They should not be used.</p>
<p>When escape() and unescape() were deprecated, ECMAScript introduced two pairs of alternative global functions:</p>
<p>encodeURI() and decodeURI()<br>encodeURI() takes a string as its argument and returns a new string in which non-ASCII characters plus certain ASCII characters (such as space) are escaped. decodeURI() reverses the process. Characters that need to be escaped are first converted to their UTF-8 encoding, then each byte of that encoding is replaced with a %xx escape sequence, where xx is two hexadecimal digits. Because encodeURI() is intended for encoding entire URLs, it does not escape URL separator characters such as &#x2F;, ?, and #. But this means that encodeURI() cannot work correctly for URLs that have those characters within their various components.</p>
<p>encodeURIComponent() and decodeURIComponent()<br>This pair of functions works just like encodeURI() and decodeURI() except that they are intended to escape individual components of a URI, so they also escape characters like &#x2F;, ?, and # that are used to separate those components. These are the most useful of the legacy URL functions, but be aware that encodeURIComponent() will escape &#x2F; characters in a path name that you probably do not want escaped. And it will convert spaces in a query parameter to %20, even though spaces are supposed to be escaped with a + in that portion of a URL.</p>
<p>The fundamental problem with all of these legacy functions is that they seek to apply a single encoding scheme to all parts of a URL when the fact is that different portions of a URL use different encodings. If you want a properly formatted and encoded URL, the solution is simply to use the URL class for all URL manipulation you do.</p>
<h2 id="11-10-Timers"><a href="#11-10-Timers" class="headerlink" title="11.10 Timers"></a>11.10 Timers</h2><p>Since the earliest days of JavaScript, web browsers have defined two functionsâ€”setTimeout() and setInterval()â€”that allow programs to ask the browser to invoke a function after a specified amount of time has elapsed or to invoke the function repeatedly at a specified interval. These functions have never been standardized as part of the core language, but they work in all browsers and in Node and are a de facto part of the JavaScript standard library.</p>
<p>The first argument to setTimeout() is a function, and the second argument is a number that specifies how many milliseconds should elapse before the function is invoked. After the specified amount of time (and maybe a little longer if the system is busy), the function will be invoked with no arguments. Here, for example, are three setTimeout() calls that print console messages after one second, two seconds, and three seconds:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Ready...&quot;</span>); &#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;set...&quot;</span>); &#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;go!&quot;</span>); &#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>
<p>Note that setTimeout() does not wait for the time to elapse before returning. All three lines of code in this example run almost instantly, but then nothing happens until 1,000 milliseconds elapse.</p>
<p>If you omit the second argument to setTimeout(), it defaults to 0. That does not mean, however, that the function you specify is invoked immediately. Instead, the function is registered to be called â€œas soon as possible.â€ If a browser is particularly busy handling user input or other events, it may take 10 milliseconds or more before the function is invoked.</p>
<p>setTimeout() registers a function to be invoked once. Sometimes, that function will itself call setTimeout() to schedule another invocation at a future time. If you want to invoke a function repeatedly, however, it is often simpler to use setInterval(). setInterval() takes the same two arguments as setTimeout() but invokes the function repeatedly every time the specified number of milliseconds (approximately) have elapsed.</p>
<p>Both setTimeout() and setInterval() return a value. If you save this value in a variable, you can then use it later to cancel the execution of the function by passing it to clearTimeout() or clearInterval(). The returned value is typically a number in web browsers and is an object in Node. The actual type doesnâ€™t matter, and you should treat it as an opaque value. The only thing you can do with this value is pass it to clearTimeout() to cancel the execution of a function registered with setTimeout() (assuming it hasnâ€™t been invoked yet) or to stop the repeating execution of a function registered with setInterval().</p>
<p>Here is an example that demonstrates the use of setTimeout(), setInterval(), and clearInterval() to display a simple digital clock with the Console API:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Once a second: clear the console and print the current time</span></span><br><span class="line"><span class="keyword">let</span> clock = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">clear</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleTimeString</span>());</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// After 10 seconds: stop the repeating code above.</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="built_in">clearInterval</span>(clock); &#125;, <span class="number">10000</span>);</span><br><span class="line"><span class="title class_">We</span>â€™ll see <span class="built_in">setTimeout</span>() and <span class="built_in">setInterval</span>() again when we cover asynchronous programming <span class="keyword">in</span> <span class="title class_">Chapter</span> <span class="number">13.</span></span><br></pre></td></tr></table></figure>
<h2 id="11-11-Summary"><a href="#11-11-Summary" class="headerlink" title="11.11 Summary"></a>11.11 Summary</h2><p>Learning a programming language is not just about mastering the grammar. It is equally important to study the standard library so that you are familiar with all the tools that are shipped with the language. This chapter has documented JavaScriptâ€™s standard library, which includes:</p>
<p>Important data structures, such as Set, Map, and typed arrays.</p>
<p>The Date and URL classes for working with dates and URLs.</p>
<p>JavaScriptâ€™s regular expression grammar and its RegExp class for textual pattern matching.</p>
<p>JavaScriptâ€™s internationalization library for formatting dates, time, and numbers and for sorting strings.</p>
<p>The JSON object for serializing and deserializing simple data structures and the console object for logging messages.</p>
<hr>
<p>[^1]: Not everything documented here is defined by the JavaScript language specification: some of the classes and functions documented here were first implemented in web browsers and then adopted by Node, making them de facto members of the JavaScript standard library.<br>2. This predictable iteration order is another thing about JavaScript sets that Python programmers may find surprising.<br>3. Typed arrays were first introduced to client-side JavaScript when web browsers added support for WebGL graphics. What is new in ES6 is that they have been elevated to a core language feature.<br>4. Except within a character class (square brackets), where \b matches the backspace character.<br>5. Parsing URLs with regular expressions is not a good idea. See Â§11.9 for a more robust URL parser.<br>6. C programmers will recognize many of these character sequences from the printf() function.</p>
</article><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="èµèµä½œè€…"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>æ‰“èµä½œè€…</div><div class="reward-main"><div class="reward-all"><span class="reward-title">æ„Ÿè°¢ä½ èµäºˆæˆ‘å‰è¿›çš„åŠ›é‡</span><ul class="reward-group"><li class="reward-item"><a href="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">èµèµè€…åå•</div><div class="reward-dec">å› ä¸ºä½ ä»¬çš„æ”¯æŒè®©æˆ‘æ„è¯†åˆ°å†™æ–‡ç« çš„ä»·å€¼ğŸ™</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/" data-pjax-state=""><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>è¿è¥æ¨¡å¼ä¸è´£ä»»</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch11/"></div><div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=ç¬¬11ç«  JavaScript æ ‡å‡†åº“&amp;url=http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch11/&amp;pic=https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="å¤åˆ¶é“¾æ¥" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹<span class="tagsPageCount">17</span></a><a class="post-meta__box__tags" href="/tags/JavaScript/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JavaScript<span class="tagsPageCount">17</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://npm.elemecdn.com/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://npm.elemecdn.com/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><div class="post-copyright"><i class="anzhiyufont anzhiyu-icon-copyright"></i><div class="post-copyright__author"><a class="post-copyright__original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®" href="http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch11/">åŸåˆ›</a><a class="post-copyright-title"><span>ç¬¬11ç«  JavaScript æ ‡å‡†åº“</span></a></div><div class="post-copyright-info-box"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"></span><a class="link" href="http://www.houyanbin.com">Jack hou</a></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a class="link" href="http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch11/">http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch11/</a></span><span class="copy-button" onclick="rm.copyPageUrl('http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch11/')"><i class="anzhiyufont anzhiyu-icon-copy"></i></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://www.houyanbin.com" target="_blank">Jackhou Blog</a>ï¼</span></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch12/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover4.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ç¬¬12ç«  è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</div></div></a></div><div class="next-post pull-right"><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch10/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover10.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ç¬¬10ç«  æ¨¡å—</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch1/" title="ç¬¬1ç«  JavaScript æ¦‚è¿°"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬1ç«  JavaScript æ¦‚è¿°</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch10/" title="ç¬¬10ç«  æ¨¡å—"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover10.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬10ç«  æ¨¡å—</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch12/" title="ç¬¬12ç«  è¿­ä»£å™¨å’Œç”Ÿæˆå™¨"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬12ç«  è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch14/" title="ç¬¬14ç«  å…ƒç¼–ç¨‹"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬14ç«  å…ƒç¼–ç¨‹</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch17/" title="ç¬¬17ç«  JavaScript å·¥å…·å’Œæ‰©å±•"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover7.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬17ç«  JavaScript å·¥å…·å’Œæ‰©å±•</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch2/" title="ç¬¬2ç«  è¯æ³•ç»“æ„"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬2ç«  è¯æ³•ç»“æ„</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> è¯„è®º</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">åŒ¿åè¯„è®º</a></div><div class="comment-tips" id="comment-tips"><span>âœ… ä½ æ— éœ€åˆ é™¤ç©ºè¡Œï¼Œç›´æ¥è¯„è®ºä»¥è·å–æœ€ä½³å±•ç¤ºæ•ˆæœ</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="author-info-top"> <div class="card-info-avatar"></div></div><div class="author-info__sayhi" id="author-info__sayhi"></div><h1 class="author-info__name">Jack hou</h1><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">Hiï¼Œè¿™æ˜¯æˆ‘çš„åšå®¢ç½‘ç«™ï¼Œæ¬¢è¿ä½ èƒ½åˆ°è®¿~</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">æˆ‘ä¼šåœ¨è¿™é‡Œåˆ†äº«æˆ‘çš„<b style="color:#fff">æŠ€æœ¯çŸ¥è¯†</b>ã€<b style="color:#fff">æ—¥å¸¸ç”Ÿæ´»</b>å’Œ<b style="color:#fff">äººç”Ÿç»éªŒã€‚</b></div></div><div class="banner-button-group"><a class="banner-button" onclick="pjax.loadUrl(&quot;/about/&quot;)"><span class="banner-button-text">äº†è§£æ›´å¤š</span><i class="anzhiyufont anzhiyu-icon-arrow-circle-right" style="font-size: 1.5rem"></i></a></div><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Hou-yanbin" target="_blank" title="Github"><i class="fab fa-github faa-tada"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/478589474" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili faa-tada"></i></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=jackhou921@qq.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wxgzh1.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>æ–‡ç« ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-Sets-and-Maps"><span class="toc-text">11.1 Sets and Maps</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-1-The-Set-Class"><span class="toc-text">11.1.1 The Set Class</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NOTE"><span class="toc-text">NOTE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-2-The-Map-Class"><span class="toc-text">11.1.2 The Map Class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-3-WeakMap-and-WeakSet"><span class="toc-text">11.1.3 WeakMap and WeakSet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-Typed-Arrays-and-Binary-Data"><span class="toc-text">11.2 Typed Arrays and Binary Data</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-Typed-Array-Types"><span class="toc-text">11.2.1 Typed Array Types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-2-Creating-Typed-Arrays"><span class="toc-text">11.2.2 Creating Typed Arrays</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-3-Using-Typed-Arrays"><span class="toc-text">11.2.3 Using Typed Arrays</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-4-Typed-Array-Methods-and-Properties"><span class="toc-text">11.2.4 Typed Array Methods and Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-5-DataView-and-Endianness"><span class="toc-text">11.2.5 DataView and Endianness</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-Pattern-Matching-with-Regular-Expressions"><span class="toc-text">11.3 Pattern Matching with Regular Expressions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-1-Defining-Regular-Expressions"><span class="toc-text">11.3.1 Defining Regular Expressions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#REPETITION"><span class="toc-text">REPETITION</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NON-GREEDY-REPETITION"><span class="toc-text">NON-GREEDY REPETITION</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ALTERNATION-GROUPING-AND-REFERENCES"><span class="toc-text">ALTERNATION, GROUPING, AND REFERENCES</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LOOKBEHIND-ASSERTIONS"><span class="toc-text">LOOKBEHIND ASSERTIONS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FLAGS"><span class="toc-text">FLAGS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-2-String-Methods-for-Pattern-Matching"><span class="toc-text">11.3.2 String Methods for Pattern Matching</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-3-The-RegExp-Class"><span class="toc-text">11.3.3 The RegExp Class</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#REGEXP-PROPERTIES"><span class="toc-text">REGEXP PROPERTIES</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-Dates-and-Times"><span class="toc-text">11.4 Dates and Times</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-1-Timestamps"><span class="toc-text">11.4.1 Timestamps</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HIGH-RESOLUTION-TIMESTAMPS"><span class="toc-text">HIGH-RESOLUTION TIMESTAMPS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-2-Date-Arithmetic"><span class="toc-text">11.4.2 Date Arithmetic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-3-Formatting-and-Parsing-Date-Strings"><span class="toc-text">11.4.3 Formatting and Parsing Date Strings</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-5-Error-Classes"><span class="toc-text">11.5 Error Classes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-6-JSON-Serialization-and-Parsing"><span class="toc-text">11.6 JSON Serialization and Parsing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-1-JSON-Customizations"><span class="toc-text">11.6.1 JSON Customizations</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-7-The-Internationalization-API"><span class="toc-text">11.7 The Internationalization API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-7-1-Formatting-Numbers"><span class="toc-text">11.7.1 Formatting Numbers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-7-2-Formatting-Dates-and-Times"><span class="toc-text">11.7.2 Formatting Dates and Times</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-7-3-Comparing-Strings"><span class="toc-text">11.7.3 Comparing Strings</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-8-The-Console-API"><span class="toc-text">11.8 The Console API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-8-1-Formatted-Output-with-Console"><span class="toc-text">11.8.1 Formatted Output with Console</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-9-URL-APIs"><span class="toc-text">11.9 URL APIs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-9-1-Legacy-URL-Functions"><span class="toc-text">11.9.1 Legacy URL Functions</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-10-Timers"><span class="toc-text">11.10 Timers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-11-Summary"><span class="toc-text">11.11 Summary</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/07/22/%E5%8C%BF%E5%90%8D/%E7%A7%9F%E6%88%BF%E6%97%B6%E5%85%89/" title="ç§Ÿæˆ¿æ—¶å…‰"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ç§Ÿæˆ¿æ—¶å…‰"/></a><div class="content"><a class="title" href="/2023/07/22/%E5%8C%BF%E5%90%8D/%E7%A7%9F%E6%88%BF%E6%97%B6%E5%85%89/" title="ç§Ÿæˆ¿æ—¶å…‰">ç§Ÿæˆ¿æ—¶å…‰</a><time datetime="2023-07-21T16:00:00.000Z" title="å‘è¡¨äº 2023-07-22 00:00:00">2023-07-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/11/%E6%97%85%E8%A1%8C/%E6%95%85%E5%AE%AB%E8%AE%B0/" title="æ•…å®«è®°"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="æ•…å®«è®°"/></a><div class="content"><a class="title" href="/2023/06/11/%E6%97%85%E8%A1%8C/%E6%95%85%E5%AE%AB%E8%AE%B0/" title="æ•…å®«è®°">æ•…å®«è®°</a><time datetime="2023-06-10T16:00:00.000Z" title="å‘è¡¨äº 2023-06-11 00:00:00">2023-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/29/%E5%AE%89%E5%85%A8/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E9%81%93%E9%81%93%E4%B9%8B%E5%A4%96%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" title="ä¿¡æ¯æ”¶é›†é“é“ä¹‹å¤–ç½‘ä¿¡æ¯æ”¶é›†"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ä¿¡æ¯æ”¶é›†é“é“ä¹‹å¤–ç½‘ä¿¡æ¯æ”¶é›†"/></a><div class="content"><a class="title" href="/2023/05/29/%E5%AE%89%E5%85%A8/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E9%81%93%E9%81%93%E4%B9%8B%E5%A4%96%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" title="ä¿¡æ¯æ”¶é›†é“é“ä¹‹å¤–ç½‘ä¿¡æ¯æ”¶é›†">ä¿¡æ¯æ”¶é›†é“é“ä¹‹å¤–ç½‘ä¿¡æ¯æ”¶é›†</a><time datetime="2023-05-28T16:00:00.000Z" title="å‘è¡¨äº 2023-05-29 00:00:00">2023-05-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/24/%E5%AE%89%E5%85%A8/sqlmap%E4%BD%BF%E7%94%A8/" title="Sqlmapä½¿ç”¨"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sqlmapä½¿ç”¨"/></a><div class="content"><a class="title" href="/2023/05/24/%E5%AE%89%E5%85%A8/sqlmap%E4%BD%BF%E7%94%A8/" title="Sqlmapä½¿ç”¨">Sqlmapä½¿ç”¨</a><time datetime="2023-05-23T16:00:00.000Z" title="å‘è¡¨äº 2023-05-24 00:00:00">2023-05-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/09/%E5%AE%89%E5%85%A8/HTTP%E7%8A%B6%E6%80%81%E7%A0%81%E5%AF%B9%E7%85%A7%E8%A1%A8/" title="http response code(HTTPçŠ¶æ€ç å¯¹ç…§è¡¨)"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="http response code(HTTPçŠ¶æ€ç å¯¹ç…§è¡¨)"/></a><div class="content"><a class="title" href="/2023/05/09/%E5%AE%89%E5%85%A8/HTTP%E7%8A%B6%E6%80%81%E7%A0%81%E5%AF%B9%E7%85%A7%E8%A1%A8/" title="http response code(HTTPçŠ¶æ€ç å¯¹ç…§è¡¨)">http response code(HTTPçŠ¶æ€ç å¯¹ç…§è¡¨)</a><time datetime="2023-05-08T16:00:00.000Z" title="å‘è¡¨äº 2023-05-09 00:00:00">2023-05-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/å®‰çŸ¥é±¼-ä¸Šç­æ‘¸é±¼ä¸­.svg" alt="è·ç¦»æœˆå…¥25kä¹Ÿå°±è¿˜å·®ä¸€ä¸ªå¤§ä½¬å¸¦æˆ‘~" title="è·ç¦»æœˆå…¥25kä¹Ÿå°±è¿˜å·®ä¸€ä¸ªå¤§ä½¬å¸¦æˆ‘~"/><div id="runtimeTextTip"></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 By Jack hou </div></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="ä¸»é¢˜">ä¸»é¢˜</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"></a></div></div></div></footer></div></div></div><div id="sidebar"><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img02.anzhiy.cn/adminuploads/1/2022/09/15/63232b7d91d22.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">æ–‡ç« </div><div class="length-num">56</div></a><a href="/tags/" title="tag"><div class="headline">æ ‡ç­¾</div><div class="length-num">19</div></a><a href="/categories/" title="category"><div class="headline">åˆ†ç±»</div><div class="length-num">11</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å‹é“¾</span></a><ul class="menus_item_child" style="left:-31px;"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> ç•™è¨€æ¿</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=8868465080&amp;server=tencent&amp;type=0"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> éŸ³ä¹é¦†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> è¿½ç•ªé¡µ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œé›†</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæœ¬äºº</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> éšä¾¿é€›é€›</span></a></li></ul></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch_commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="å¼€å…³å¼¹å¹•"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">æ’­æ”¾éŸ³ä¹</a><div id="console-music-bg"></div><meting-js id="8868465080" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>å¼•ç”¨åˆ°è¯„è®º</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç«™å†…æœç´¢</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç™¾åº¦æœç´¢</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8868465080&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>åšå®¢åˆ†ç±»</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>æ–‡ç« æ ‡ç­¾</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶åœ°å€</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">å…³é—­çƒ­è¯„</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">æ·±è‰²æ¨¡å¼</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>è½‰ç‚ºç¹é«”</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.4.2/source/js/utils.js"></script><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.4.2/source/js/main.js"></script><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.4.2/source/js/tw_cn.js"></script><script src="https://npm.elemecdn.com/@fancyapps/ui@4.0.31/dist/fancybox.umd.js"></script><script src="https://npm.elemecdn.com/instant.page@5.1.1/instantpage.js" type="module"></script><script src="https://npm.elemecdn.com/vanilla-lazyload@17.3.1/dist/lazyload.iife.min.js"></script><script src="https://npm.elemecdn.com/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// æ¶ˆé™¤æ§åˆ¶å°æ‰“å°
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //åœ¨æ¢å¤å‰è¾“å‡ºæ—¥å¿—
  const grt = new Date("4/15/2023 00:00:00"); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `æ¬¢è¿ä½¿ç”¨å®‰çŸ¥é±¼!`,
    `ç”Ÿæ´»æ˜æœ—, ä¸‡ç‰©å¯çˆ±`,
    `
        
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
      â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â•
        
        `,
    "å·²ä¸Šçº¿",
    dnum,
    "å¤©",
    "Â©2023 By å®‰çŸ¥é±¼ 1.4.2",
  ];
  const ascll2 = [`NCC2-036`, `è°ƒç”¨å‰ç½®æ‘„åƒå¤´æ‹ç…§æˆåŠŸï¼Œè¯†åˆ«ä¸ºã€å°ç¬¨è›‹ã€‘.`, `Photo captured: `, `ğŸ¤ª`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c ä½ å¥½ï¼Œå°ç¬¨è›‹.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c âš¡ Powered by å®‰çŸ¥é±¼ %c ä½ æ­£åœ¨è®¿é—® Jack hou çš„åšå®¢.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c ä½ å·²æ‰“å¼€æ§åˆ¶å°.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c ä½ ç°åœ¨æ­£å¤„äºç›‘æ§ä¸­.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("4/15/2023 00:00:00"); //è®¾ç½®ç½‘ç«™ä¸Šçº¿æ—¶é—´
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // è®¡ç®—å¹¶æ›´æ–°å¤©æ•°ã€å°æ—¶æ•°ã€åˆ†é’Ÿæ•°å’Œç§’æ•°
  function updateTime() {
    now = new Date(); // æ›´æ–° now çš„å€¼
    nowHour = now.getHours(); // æ›´æ–° nowHour çš„å€¼
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // æ›´æ–°ç½‘é¡µä¸­æ˜¾ç¤ºçš„ç½‘ç«™è¿è¡Œæ—¶é—´
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // å¦‚æœæ˜¯ä¸Šç­æ—¶é—´ï¼Œé»˜è®¤å°±æ˜¯"å®‰çŸ¥é±¼-ä¸Šç­æ‘¸é±¼ä¸­.svg"å›¾ç‰‡ï¼Œä¸éœ€è¦æ›´æ”¹
      currentTimeHtml = `æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${dnum} å¤©<span id='runtime'> ${hnum} å°æ—¶ ${mnum} åˆ† ${snum} ç§’ </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // å¦‚æœæ˜¯ä¸‹ç­æ—¶é—´ï¼Œæ’å…¥"å®‰çŸ¥é±¼-ä¸‹ç­å•¦.svg"å›¾ç‰‡
      let img = document.querySelector("#workboard .workSituationImg");
      img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/å®‰çŸ¥é±¼-ä¸‹ç­å•¦.svg";
      img.title = "ä¸‹ç­äº†å°±è¯¥å¼€å¼€å¿ƒå¿ƒçš„ç©è€ï¼Œå˜¿å˜¿~";
      img.alt = "ä¸‹ç­äº†å°±è¯¥å¼€å¼€å¿ƒå¿ƒçš„ç©è€ï¼Œå˜¿å˜¿~";

      currentTimeHtml = `æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${dnum} å¤©<span id='runtime'> ${hnum} å°æ—¶ ${mnum} åˆ† ${snum} ç§’ </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.4.2/source/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.houyanbin.com/',
      region: '',
      onCommentLoaded: function () {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.houyanbin.com/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init();
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://npm.elemecdn.com/twikoo@1.6.16/dist/twikoo.all.min.js').then(runFn)
  }
  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[å›¾ç‰‡]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[é“¾æ¥]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[ä»£ç ]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.houyanbin.com/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "æ— æ³•è·å–è¯„è®ºï¼Œè¯·ç¡®è®¤ç›¸å…³é…ç½®æ˜¯å¦æ­£ç¡®"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://npm.elemecdn.com/twikoo@1.6.16/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick}</span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += 'æ²¡æœ‰è¯„è®º'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@anzhiy.cn";</script><script>//åŠ¨æ€æ ‡é¢˜
let leaveTitle = 'w(ï¾ŸĞ”ï¾Ÿ)w ä¸è¦èµ°ï¼å†çœ‹çœ‹å˜›ï¼';
let backTitle = 'â™ª(^âˆ‡^*)æ¬¢è¿è‚¥æ¥ï¼';
let OriginTitile = document.title
let titleTime
document.addEventListener('visibilitychange', function () {
  if (document.hidden) {
    //ç¦»å¼€å½“å‰é¡µé¢æ—¶æ ‡ç­¾æ˜¾ç¤ºå†…å®¹
    document.title = leaveTitle
    clearTimeout(titleTime)
  } else {
    //è¿”å›å½“å‰é¡µé¢æ—¶æ ‡ç­¾æ˜¾ç¤ºå†…å®¹
    document.title = backTitle + OriginTitile
    //ä¸¤ç§’åå˜å›æ­£å¸¸æ ‡é¢˜
    titleTime = setTimeout(function () {
      document.title = OriginTitile
    }, 2000)
  }
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script>// åˆå§‹åŒ–å‡½æ•°
let rm = {};

//ç¦æ­¢å›¾ç‰‡ä¸è¶…é“¾æ¥æ‹–æ‹½
let aElements = document.getElementsByTagName("a");
for (let i = 0; i < aElements.length; i++) {
  aElements[i].setAttribute("draggable", "false");
  let imgElements = aElements[i].getElementsByTagName("img");
  for (let j = 0; j < imgElements.length; j++) {
    imgElements[j].setAttribute("draggable", "false");
  }
}

// æ˜¾ç¤ºèœå•
rm.showRightMenu = function (isTrue, x = 0, y = 0) {
  console.info(x, y)
  let rightMenu = document.getElementById("rightMenu");
  rightMenu.style.top = x + "px";
  rightMenu.style.left = y + "px";
  if (isTrue) {
    rightMenu.style.display = "block";
    stopMaskScroll();
  } else {
    rightMenu.style.display = "none";
  }
};

// éšè—èœå•
rm.hideRightMenu = function () {
  rm.showRightMenu(false);
  let rightMenuMask = document.querySelector("#rightmenu-mask");
  rightMenuMask.style.display = "none";
};

// å°ºå¯¸
let rmWidth = document.getElementById("rightMenu").offsetWidth;
let rmHeight = document.getElementById("rightMenu").offsetHeight;

// é‡æ–°å®šä¹‰å°ºå¯¸
rm.reloadrmSize = function () {
  rightMenu.style.visibility = "hidden";
  rightMenu.style.display = "block";
  // è·å–å®½åº¦å’Œé«˜åº¦
  rmWidth = document.getElementById("rightMenu").offsetWidth;
  rmHeight = document.getElementById("rightMenu").offsetHeight;
  rightMenu.style.visibility = "visible";
};

// è·å–ç‚¹å‡»çš„href
let domhref = "";
let domImgSrc = "";
let globalEvent = null;

var oncontextmenuFunction = function (event) {
  if (document.body.clientWidth > 768) {
    let pageX = event.clientX + 10; //åŠ 10æ˜¯ä¸ºäº†é˜²æ­¢æ˜¾ç¤ºæ—¶é¼ æ ‡é®åœ¨èœå•ä¸Š
    let pageY = event.clientY;

    //å…¶ä»–é¢å¤–èœå•
    const $rightMenuOther = document.querySelector(".rightMenuOther");
    const $rightMenuPlugin = document.querySelector(".rightMenuPlugin");
    const $rightMenuCopyText = document.querySelector("#menu-copytext");
    const $rightMenuPasteText = document.querySelector("#menu-pastetext");
    const $rightMenuCommentText = document.querySelector("#menu-commenttext");
    const $rightMenuNewWindow = document.querySelector("#menu-newwindow");
    const $rightMenuNewWindowImg = document.querySelector("#menu-newwindowimg");
    const $rightMenuCopyLink = document.querySelector("#menu-copylink");
    const $rightMenuCopyImg = document.querySelector("#menu-copyimg");
    const $rightMenuDownloadImg = document.querySelector("#menu-downloadimg");
    const $rightMenuSearch = document.querySelector("#menu-search");
    const $rightMenuSearchBaidu = document.querySelector("#menu-searchBaidu");
    const $rightMenuMusicToggle = document.querySelector("#menu-music-toggle");
    const $rightMenuMusicBack = document.querySelector("#menu-music-back");
    const $rightMenuMusicForward = document.querySelector("#menu-music-forward");
    const $rightMenuMusicPlaylist = document.querySelector("#menu-music-playlist");
    const $rightMenuMusicCopyMusicName = document.querySelector("#menu-music-copyMusicName");

    let href = event.target.href;
    let imgsrc = event.target.currentSrc;

    // åˆ¤æ–­æ¨¡å¼ æ‰©å±•æ¨¡å¼ä¸ºæœ‰äº‹ä»¶
    let pluginMode = false;
    $rightMenuOther.style.display = "block";
    globalEvent = event;

    // æ£€æŸ¥æ˜¯å¦éœ€è¦å¤åˆ¶ æ˜¯å¦æœ‰é€‰ä¸­æ–‡æœ¬
    if (selectTextNow && window.getSelection()) {
      pluginMode = true;
      $rightMenuCopyText.style.display = "block";
      $rightMenuCommentText.style.display = "block";
      $rightMenuSearch.style.display = "block";
      $rightMenuSearchBaidu.style.display = "block";
    } else {
      $rightMenuCopyText.style.display = "none";
      $rightMenuCommentText.style.display = "none";
      $rightMenuSearchBaidu.style.display = "none";
      $rightMenuSearch.style.display = "none";
    }

    //æ£€æŸ¥æ˜¯å¦å³é”®ç‚¹å‡»äº†é“¾æ¥aæ ‡ç­¾
    if (href) {
      pluginMode = true;
      $rightMenuNewWindow.style.display = "block";
      $rightMenuCopyLink.style.display = "block";
      domhref = href;
    } else {
      $rightMenuNewWindow.style.display = "none";
      $rightMenuCopyLink.style.display = "none";
    }

    //æ£€æŸ¥æ˜¯å¦éœ€è¦å¤åˆ¶å›¾ç‰‡
    if (imgsrc) {
      pluginMode = true;
      $rightMenuCopyImg.style.display = "block";
      $rightMenuDownloadImg.style.display = "block";
      $rightMenuNewWindowImg.style.display = "block";
      document.getElementById("rightMenu").style.width="12rem"
      domImgSrc = imgsrc;
    } else {
      $rightMenuCopyImg.style.display = "none";
      $rightMenuDownloadImg.style.display = "none";
      $rightMenuNewWindowImg.style.display = "none";
    }

    // åˆ¤æ–­æ˜¯å¦ä¸ºè¾“å…¥æ¡†
    if (event.target.tagName.toLowerCase() === "input" || event.target.tagName.toLowerCase() === "textarea") {
      pluginMode = true;
      $rightMenuPasteText.style.display = "block";
    } else {
      $rightMenuPasteText.style.display = "none";
    }
    const navMusicEl = document.querySelector("#nav-music");
    //åˆ¤æ–­æ˜¯å¦æ˜¯éŸ³ä¹
    if (navMusicEl && navMusicEl.contains(event.target)) {
      pluginMode = true;
      $rightMenuMusicToggle.style.display = "block";
      $rightMenuMusicBack.style.display = "block";
      $rightMenuMusicForward.style.display = "block";
      $rightMenuMusicPlaylist.style.display = "block";
      $rightMenuMusicCopyMusicName.style.display = "block";
    } else {
      $rightMenuMusicToggle.style.display = "none";
      $rightMenuMusicBack.style.display = "none";
      $rightMenuMusicForward.style.display = "none";
      $rightMenuMusicPlaylist.style.display = "none";
      $rightMenuMusicCopyMusicName.style.display = "none";
    }

    // å¦‚æœä¸æ˜¯æ‰©å±•æ¨¡å¼åˆ™éšè—æ‰©å±•æ¨¡å—
    if (pluginMode) {
      $rightMenuOther.style.display = "none";
      $rightMenuPlugin.style.display = "block";
    } else {
      $rightMenuPlugin.style.display = "none";
    }

    rm.reloadrmSize();

    // é¼ æ ‡é»˜è®¤æ˜¾ç¤ºåœ¨é¼ æ ‡å³ä¸‹æ–¹ï¼Œå½“é¼ æ ‡é å³æˆ–é ä¸‹æ—¶ï¼Œå°†èœå•æ˜¾ç¤ºåœ¨é¼ æ ‡å·¦æ–¹\ä¸Šæ–¹
    if (pageX + rmWidth > window.innerWidth) {
      pageX -= rmWidth + 10;
    }
    if (pageY + rmHeight > window.innerHeight) {
      pageY -= pageY + rmHeight - window.innerHeight;
    }

    rm.showRightMenu(true, pageY, pageX);
    document.getElementById("rightmenu-mask").style.display = "flex";
    return false;
  }
};

// ç›‘å¬å³é”®åˆå§‹åŒ–
window.oncontextmenu = oncontextmenuFunction

// ä¸‹è½½å›¾ç‰‡çŠ¶æ€
rm.downloadimging = false;

// å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿
rm.writeClipImg = function (imgsrc) {
  console.log("æŒ‰ä¸‹å¤åˆ¶");
  rm.hideRightMenu();
  anzhiyu.snackbarShow("æ­£åœ¨ä¸‹è½½ä¸­ï¼Œè¯·ç¨å", false, 10000);
  if (rm.downloadimging == false) {
    rm.downloadimging = true;
    setTimeout(function () {
      copyImage(imgsrc);
      anzhiyu.snackbarShow("å¤åˆ¶æˆåŠŸï¼å›¾ç‰‡å·²æ·»åŠ ç›²æ°´å°ï¼Œè¯·éµå®ˆç‰ˆæƒåè®®");
      rm.downloadimging = false;
    }, "10000");
  }
};

function imageToBlob(imageURL) {
  const img = new Image();
  const c = document.createElement("canvas");
  const ctx = c.getContext("2d");
  img.crossOrigin = "";
  img.src = imageURL;
  return new Promise(resolve => {
    img.onload = function () {
      c.width = this.naturalWidth;
      c.height = this.naturalHeight;
      ctx.drawImage(this, 0, 0);
      c.toBlob(
        blob => {
          // here the image is a blob
          resolve(blob);
        },
        "image/png",
        0.75
      );
    };
  });
}

async function copyImage(imageURL) {
  const blob = await imageToBlob(imageURL);
  const item = new ClipboardItem({ "image/png": blob });
  navigator.clipboard.write([item]);
}

rm.copyUrl = function (id) {
  const input = document.createElement("input"); // Create a new <input> element
  input.id = "copyVal"; // Set the id of the new element to "copyVal"
  document.body.appendChild(input); // Append the new element to the end of the <body> element
  
  const text = id;
  input.value = text;
  input.select();
  input.setSelectionRange(0, input.value.length);
  document.execCommand("copy");
  
  input.remove(); // Remove the <input> element from the DOM
};

function stopMaskScroll() {
  if (document.getElementById("rightmenu-mask")) {
    let xscroll = document.getElementById("rightmenu-mask");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //é˜»æ­¢æµè§ˆå™¨é»˜è®¤æ–¹æ³•
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
  if (document.getElementById("rightMenu")) {
    let xscroll = document.getElementById("rightMenu");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //é˜»æ­¢æµè§ˆå™¨é»˜è®¤æ–¹æ³•
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
}

rm.rightmenuCopyText = function (txt) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(txt);
  }
  rm.hideRightMenu();
};

rm.copyPageUrl = function (url) {
  if (!url) {
    url = window.location.href;
  }
  rm.copyUrl(url);
  anzhiyu.snackbarShow("å¤åˆ¶æœ¬é¡µé“¾æ¥åœ°å€æˆåŠŸ", false, 2000);
  rm.hideRightMenu();
};

rm.sharePage = function () {
  var content = window.location.href;
  rm.copyUrl(url);
  anzhiyu.snackbarShow("å¤åˆ¶æœ¬é¡µé“¾æ¥åœ°å€æˆåŠŸ", false, 2000);
  rm.hideRightMenu();
};

// å¤åˆ¶å½“å‰é€‰ä¸­æ–‡æœ¬
var selectTextNow = "";
document.onmouseup = document.ondblclick = selceText;

function selceText() {
  var txt;
  if (document.selection) {
    txt = document.selection.createRange().text;
  } else {
    txt = window.getSelection().toString();
  }
  selectTextNow = txt !== "" ? txt : "";
}

// è¯»å–å‰ªåˆ‡æ¿
rm.readClipboard = function () {
  if (navigator.clipboard) {
    navigator.clipboard.readText().then(clipText => rm.insertAtCaret(globalEvent.target, clipText));
  }
};

// ç²˜è´´æ–‡æœ¬åˆ°ç„¦ç‚¹
rm.insertAtCaret = function (elemt, value) {
  const startPos = elemt.selectionStart,
    endPos = elemt.selectionEnd;
  if (document.selection) {
    elemt.focus();
    var sel = document.selection.createRange();
    sel.text = value;
    elemt.focus();
  } else {
    if (startPos || startPos == "0") {
      var scrollTop = elemt.scrollTop;
      elemt.value = elemt.value.substring(0, startPos) + value + elemt.value.substring(endPos, elemt.value.length);
      elemt.focus();
      elemt.selectionStart = startPos + value.length;
      elemt.selectionEnd = startPos + value.length;
      elemt.scrollTop = scrollTop;
    } else {
      elemt.value += value;
      elemt.focus();
    }
  }
};

//ç²˜è´´æ–‡æœ¬
rm.pasteText = function () {
  const result = rm.readClipboard() || "";
  rm.hideRightMenu();
};

//å¼•ç”¨åˆ°è¯„è®º
rm.rightMenuCommentText = function (txt) {
  rm.hideRightMenu();
  const postCommentDom = document.getElementById("post-comment");
  var domTop = postCommentDom.offsetTop;
  window.scrollTo(0, domTop - 80);
  if (txt == "undefined" || txt == "null") txt = "å¥½æ£’ï¼";
  function setText() {
    setTimeout(() => {
      var input = document.getElementsByClassName("el-textarea__inner")[0];
      if (!input) setText();
      let evt = document.createEvent("HTMLEvents");
      evt.initEvent("input", true, true);
      let inputValue = replaceAll(txt, "\n", "\n> ");
      input.value = "> " + inputValue + "\n\n";
      input.dispatchEvent(evt);
      input.focus();
      input.setSelectionRange(-1, -1);
      if (document.getElementById("comment-tips")) {
        document.getElementById("comment-tips").classList.add("show");
      }
    }, 100);
  }
  setText();
};

//æ›¿æ¢æ‰€æœ‰å†…å®¹
function replaceAll(string, search, replace) {
  return string.split(search).join(replace);
}

// ç™¾åº¦æœç´¢
rm.searchBaidu = function () {
  anzhiyu.snackbarShow("å³å°†è·³è½¬åˆ°ç™¾åº¦æœç´¢", false, 2000);
  setTimeout(function () {
    window.open("https://www.baidu.com/s?wd=" + selectTextNow);
  }, "2000");
  rm.hideRightMenu();
};

//åˆ†äº«é“¾æ¥
rm.copyLink = function () {
  rm.rightmenuCopyText(domhref);
  anzhiyu.snackbarShow("å·²å¤åˆ¶é“¾æ¥åœ°å€");
};

function addRightMenuClickEvent() {
  // æ·»åŠ ç‚¹å‡»äº‹ä»¶
  document.getElementById("menu-backward").addEventListener("click", function () {
  window.history.back();
    rm.hideRightMenu();
  });

  document.getElementById("menu-forward").addEventListener("click", function () {
    window.history.forward();
    rm.hideRightMenu();
  });

  document.getElementById("menu-refresh").addEventListener("click", function () {
    window.location.reload();
  });

  document.getElementById("menu-top").addEventListener("click", function () {
    anzhiyu.scrollToDest(0, 500);
    rm.hideRightMenu();
  });

  const menuLinks = document.querySelectorAll(".menu-link");
  menuLinks.forEach(function (link) {
    link.addEventListener("click", rm.hideRightMenu);
  });

  document.getElementById("menu-darkmode").addEventListener("click", anzhiyu.switchDarkMode);

  document.getElementById("menu-home") && document.getElementById("menu-home").addEventListener("click", function () {
    window.location.href = window.location.origin;
  });

  document.getElementById("menu-randomPost").addEventListener("click", function () {
    toRandomPost();
  });

  document.getElementById("menu-commentBarrage").addEventListener("click", anzhiyu.switchCommentBarrage);

  document.getElementById("rightmenu-mask").addEventListener("click", rm.hideRightMenu);

  document.getElementById("rightmenu-mask").addEventListener("contextmenu", function (event) {
    rm.hideRightMenu();
    event.preventDefault(); // Prevent the default context menu from appearing
  });

  document.getElementById("menu-copy").addEventListener("click", rm.copyPageUrl);

  document.getElementById("menu-pastetext").addEventListener("click", rm.pasteText);

  document.getElementById("menu-copytext").addEventListener("click", function () {
    rm.rightmenuCopyText(selectTextNow);
    anzhiyu.snackbarShow("å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€");
  });

  document.getElementById("menu-commenttext").addEventListener("click", function () {
    rm.rightMenuCommentText(selectTextNow);
  });

  document.getElementById("menu-newwindow").addEventListener("click", function () {
    window.open(domhref, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copylink").addEventListener("click", rm.copyLink);

  document.getElementById("menu-downloadimg").addEventListener("click", function () {
    anzhiyu.downloadImage(domImgSrc, "anzhiyu");
  });

  document.getElementById("menu-newwindowimg").addEventListener("click", function () {
    window.open(domImgSrc, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copyimg").addEventListener("click", function () {
    rm.writeClipImg(domImgSrc);
  });

  document.getElementById("menu-searchBaidu").addEventListener("click", rm.searchBaidu);

  //éŸ³ä¹
  document.getElementById("menu-music-toggle").addEventListener("click", anzhiyu.musicToggle);

  document.getElementById("menu-music-back").addEventListener("click", anzhiyu.musicSkipBack);

  document.getElementById("menu-music-forward").addEventListener("click", anzhiyu.musicSkipForward);

  document.getElementById("menu-music-copyMusicName").addEventListener("click", function () {
    rm.rightmenuCopyText(anzhiyu.musicGetName());
    anzhiyu.snackbarShow("å¤åˆ¶æ­Œæ›²åç§°æˆåŠŸ", false, 3000);
  });

}

addRightMenuClickEvent();</script><script data-pjax>var themeColorMeta = document.querySelector('meta[name="theme-color"]');
var pageHeaderEl = document.getElementById("page-header");
var navMusicEl = document.getElementById("nav-music");
var consoleEl = document.getElementById("console");
// å·²éšæœºçš„æ­Œæ›²
var selectRandomSong = [];
// éŸ³ä¹é»˜è®¤å£°éŸ³å¤§å°
var musicVolume = 0.8;
// æ˜¯å¦åˆ‡æ¢äº†å‘¨æ°ä¼¦éŸ³ä¹åˆ—è¡¨
var changeMusicListFlag = false;
// å½“å‰é»˜è®¤æ’­æ”¾åˆ—è¡¨
var defaultPlayMusicList = [];

document.getElementById("page-name").innerText = document.title.split(" | Jackhou Blog")[0];
anzhiyu.initIndexEssay();
anzhiyu.changeTimeInEssay();
anzhiyu.removeBodyPaceClass();
anzhiyu.qrcodeCreate();
anzhiyu.changeTimeInAlbumDetail();
anzhiyu.reflashEssayWaterFall();
anzhiyu.sayhi();
anzhiyu.stopImgRightDrag();
anzhiyu.addNavBackgroundInit();
anzhiyu.setValueToBodyType();
anzhiyu.catalogActive();
anzhiyu.tagsPageActive();
anzhiyu.categoriesBarActive();
anzhiyu.topCategoriesBarScroll();
anzhiyu.switchRightClickMenuHotReview();
anzhiyu.getCustomPlayList();
anzhiyu.addEventListenerConsoleMusicList(false);
setTimeout(() => {
  if (typeof addFriendLinksInFooter === "function") {
    addFriendLinksInFooter();
  }
}, 200)</script><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.1.8/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://npm.elemecdn.com/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://npm.elemecdn.com/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://npm.elemecdn.com/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div></body></html>