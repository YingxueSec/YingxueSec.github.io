<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>ç¬¬9ç«  ç±» | Jackhou Blog</title><meta name="keywords" content="ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹,JavaScript"><meta name="author" content="Jack hou"><meta name="copyright" content="Jack hou"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="ç¬¬9ç«  ç±»"><meta name="application-name" content="ç¬¬9ç«  ç±»"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="ç¬¬9ç«  ç±»"><meta property="og:url" content="http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch9/index.html"><meta property="og:site_name" content="Jackhou Blog"><meta property="og:description" content="JavaScript objects were covered in Chapter 6. That chapter treated each object as a unique set of properties, different from every other object. I"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg"><meta property="article:author" content="Jack hou"><meta property="article:tag" content="Jackhou, blog"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch9/"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.14/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  preloader: {"source":3},
  friends_vue_info: {"apiurl":null},
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€","rightMenuMsgToTraditionalChinese":"è½¬ä¸ºç¹ä½“","rightMenuMsgToSimplifiedChinese":"è½¬ä¸ºç®€ä½“"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ç¬¬9ç«  ç±»',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-26 21:44:44',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="åŠ è½½å¤´åƒ" src="data:image/jpeg;base64,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"/><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>if (GLOBAL_CONFIG.preloader.source == "2" || GLOBAL_CONFIG.preloader.source == "3") {
  const loadingPercentage = document.getElementById("loading-percentage");
  let loadingPercentageTimer = setInterval(function() {
    var progressBar = document.querySelector(".pace-progress");
    if (!progressBar) return
    var currentValue = progressBar.getAttribute("data-progress-text");
    if (currentValue !== loadingPercentage.textContent) {
      loadingPercentage.textContent = currentValue;
      if (currentValue === "100%") {
        clearInterval(loadingPercentageTimer);
      }
    }
  }, 100);
}

const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div id="web_box"><div id="web_container"><div id="menu-mask"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">ç½‘é¡µ</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.houyanbin.com/" title="åšå®¢" target="_blank"><img class="back-menu-item-icon" src="/img/favicon.png" alt="åšå®¢"/><span class="back-menu-item-text">åšå®¢</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">é¡¹ç›®</div><div class="back-menu-list"><a class="back-menu-item" href="https://image.anheyu.com/" title="å®‰çŸ¥é±¼å›¾åºŠ" target="_blank"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="å®‰çŸ¥é±¼å›¾åºŠ"/><span class="back-menu-item-text">å®‰çŸ¥é±¼å›¾åºŠ</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Jackhou Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å‹é“¾</span></a><ul class="menus_item_child" style="left:-31px;"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> ç•™è¨€æ¿</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=8868465080&amp;server=tencent&amp;type=0"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> éŸ³ä¹é¦†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> è¿½ç•ªé¡µ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œé›†</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæœ¬äºº</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> éšä¾¿é€›é€›</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="éšæœºå‰å¾€ä¸€ä¸ªå¼€å¾€é¡¹ç›®ç½‘ç«™"><a class="site-page" onclick="anzhiyu.totraveling()" title="éšæœºå‰å¾€ä¸€ä¸ªå¼€å¾€é¡¹ç›®ç½‘ç«™" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºå‰å¾€ä¸€ä¸ªæ–‡ç« " href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢ğŸ”" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> æœç´¢</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="ä¸­æ§å°" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wechat.jpg" target="_blank"><img class="post-qr-code-img" alt="wechat" src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wechat.jpg"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/alipay.jpg" target="_blank"><img class="post-qr-code-img" alt="alipay" src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/alipay.jpg"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">äº’åŠ¨</div><span class="author-content-item-title"> <span>æœ€æ–°è¯„è®º</span></span></div><div class="aside-list"><span>æ­£åœ¨åŠ è½½ä¸­...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">å…´è¶£ç‚¹</div><span class="author-content-item-title">å¯»æ‰¾ä½ æ„Ÿå…´è¶£çš„é¢†åŸŸ</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Article/" style="font-size: 1.05rem; color: rgb(2, 45, 80);">Article<sup>4</sup></a><a href="/tags/CSRF/" style="font-size: 1.05rem; color: rgb(143, 91, 36);">CSRF<sup>1</sup></a><a href="/tags/Git/" style="font-size: 1.05rem; color: rgb(128, 67, 56);">Git<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem; color: rgb(6, 48, 93);">Java<sup>3</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem; color: rgb(107, 4, 75);">JavaScript<sup>17</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem; color: rgb(32, 78, 79);">Linux<sup>1</sup></a><a href="/tags/Pikachu/" style="font-size: 1.05rem; color: rgb(96, 0, 56);">Pikachu<sup>1</sup></a><a href="/tags/SQL/" style="font-size: 1.05rem; color: rgb(170, 128, 62);">SQL<sup>2</sup></a><a href="/tags/XAUUSD/" style="font-size: 1.05rem; color: rgb(172, 168, 154);">XAUUSD<sup>1</sup></a><a href="/tags/XSS/" style="font-size: 1.05rem; color: rgb(107, 111, 41);">XSS<sup>2</sup></a><a href="/tags/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/" style="font-size: 1.05rem; color: rgb(161, 97, 158);">ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹<sup>17</sup></a><a href="/tags/%E5%8C%BF%E5%90%8D/" style="font-size: 1.05rem; color: rgb(32, 139, 133);">åŒ¿å<sup>2</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.05rem; color: rgb(143, 192, 123);">åšå®¢<sup>10</sup></a><a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem; color: rgb(59, 1, 77);">å®‰å…¨<sup>20</sup></a><a href="/tags/%E6%94%AF%E4%BB%98/" style="font-size: 1.05rem; color: rgb(107, 6, 182);">æ”¯ä»˜<sup>1</sup></a><a href="/tags/%E6%94%BB%E9%98%B2/" style="font-size: 1.05rem; color: rgb(117, 73, 175);">æ”»é˜²<sup>1</sup></a><a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 1.05rem; color: rgb(130, 153, 115);">æ—…è¡Œ<sup>1</sup></a><a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 1.05rem; color: rgb(9, 88, 84);">è™šæ‹Ÿæœº<sup>4</sup></a><a href="/tags/%E8%B6%8A%E6%9D%83/" style="font-size: 1.05rem; color: rgb(8, 119, 52);">è¶Šæƒ<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>æ–‡ç« </span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>å½’æ¡£</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">ä¸ƒæœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">å…­æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">äº”æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">å››æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">37</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">ä¸‰æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>ç¯‡</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="anzhiyu.switchDarkMode()" title="æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="è¾¹æ æ˜¾ç¤ºæ§åˆ¶"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="çƒ­è¯„å¼€å…³"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="éŸ³ä¹å¼€å…³"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">åŸåˆ›</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/JavaScript/">JavaScript</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/" tabindex="-1"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹</span></a><a class="article-meta__tags" href="/tags/JavaScript/" tabindex="-1"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JavaScript</span></a></span></div></div><h1 class="post-title">ç¬¬9ç«  ç±»</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-04-25T16:00:52.000Z" title="å‘è¡¨äº 2023-04-26 00:00:52">2023-04-26</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-04-26T13:44:44.142Z" title="æ›´æ–°äº 2023-04-26 21:44:44">2023-04-26</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="ç¬¬9ç«  ç±»"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="é˜…è¯»é‡">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="ä½œè€…IPå±åœ°ä¸ºåŒ—äº¬"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>åŒ—äº¬</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg"></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><meta name="referrer" content="no-referrer"/>



<p>JavaScript objects were covered in Chapter 6. That chapter treated each object as a unique set of properties, different from every other object. It is often useful, however, to define a class of objects that share certain properties. Members, or instances, of the class have their own properties to hold or define their state, but they also have methods that define their behavior. These methods are defined by the class and shared by all instances. Imagine a class named Complex that represents and performs arithmetic on complex numbers, for example. A Complex instance would have properties to hold the real and imaginary parts (the state) of the complex number. And the Complex class would define methods to perform addition and multiplication (the behavior) of those numbers.</p>
<blockquote>
<p>ç¬¬ 6 ç« è¯¦ç»†ä»‹ç»äº† JavaScript å¯¹è±¡ï¼Œæ¯ä¸ª JavaScript å¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªå±æ€§é›†åˆï¼Œç›¸äº’ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ã€‚åœ¨ JavaScript ä¸­ä¹Ÿå¯ä»¥å®šä¹‰å¯¹è±¡çš„ç±»ï¼Œè®©æ¯ä¸ªå¯¹è±¡éƒ½å…±äº«æŸäº›å±æ€§ï¼Œè¿™ç§â€œå…±äº«â€çš„ç‰¹æ€§æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ç±»çš„æˆå‘˜æˆ–å®ä¾‹éƒ½åŒ…å«ä¸€äº›å±æ€§ï¼Œç”¨ä»¥å­˜æ”¾æˆ–å®šä¹‰å®ƒä»¬çš„çŠ¶æ€ï¼Œå…¶ä¸­æœ‰äº›å±æ€§å®šä¹‰äº†å®ƒä»¬çš„è¡Œä¸ºï¼ˆé€šå¸¸ç§°ä¸ºæ–¹æ³•ï¼‰ã€‚è¿™äº›è¡Œä¸ºé€šå¸¸æ˜¯ç”±ç±»å®šä¹‰çš„ï¼Œè€Œä¸”ä¸ºæ‰€æœ‰å®ä¾‹æ‰€å…±äº«ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªåä¸º Complex çš„ç±»ç”¨æ¥è¡¨ç¤ºå¤æ•°ï¼ŒåŒæ—¶è¿˜å®šä¹‰äº†ä¸€äº›å¤æ•°è¿ç®—ã€‚ä¸€ä¸ª Complex å®ä¾‹åº”å½“åŒ…å«å¤æ•°çš„å®éƒ¨å’Œè™šéƒ¨ï¼ˆçŠ¶æ€ï¼‰ï¼ŒåŒæ · Complex ç±»è¿˜ä¼šå®šä¹‰å¤æ•°çš„åŠ æ³•å’Œä¹˜æ³•æ“ä½œï¼ˆè¡Œä¸ºï¼‰ã€‚</p>
</blockquote>
<p>In JavaScript, classes use prototype-based inheritance: if two objects inherit properties (generally function-valued properties, or methods) from the same prototype, then we say that those objects are instances of the same class. That, in a nutshell, is how JavaScript classes work. JavaScript prototypes and inheritance were covered in Â§6.2.3 and Â§6.3.2, and you will need to be familiar with the material in those sections to understand this chapter. This chapter covers prototypes in Â§9.1.</p>
<blockquote>
<p>åœ¨ JavaScript ä¸­ï¼Œç±»çš„å®ç°æ˜¯åŸºäºå…¶åŸå‹ç»§æ‰¿æœºåˆ¶çš„ã€‚å¦‚æœä¸¤ä¸ªå®ä¾‹éƒ½ä»åŒä¸€ä¸ªåŸå‹å¯¹è±¡ä¸Šç»§æ‰¿äº†å±æ€§ï¼Œæˆ‘ä»¬è¯´å®ƒä»¬æ˜¯åŒä¸€ä¸ªç±»çš„å®ä¾‹ã€‚JavaScript åŸå‹å’Œç»§æ‰¿åœ¨ Â§6.2.3 å’Œ Â§6.3.2 èŠ‚ä¸­æœ‰è¯¦ç»†è®¨è®ºï¼Œä¸ºäº†æ›´å¥½åœ°ç†è§£æœ¬ç« çš„å†…å®¹ï¼Œè¯·åŠ¡å¿…é¦–å…ˆé˜…è¯»è¿™ä¸¤ä¸ªç« èŠ‚ã€‚æœ¬ç« å°†ä¼šåœ¨ Â§9.1 ä¸­å¯¹åŸå‹åšè¿›ä¸€æ­¥è®¨è®ºã€‚</p>
</blockquote>
<p>If two objects inherit from the same prototype, this typically (but not necessarily) means that they were created and initialized by the same constructor function or factory function. Constructors have been covered in Â§4.6, Â§6.2.2, and Â§8.2.3, and this chapter has more in Â§9.2.</p>
<blockquote>
<p>å¦‚æœä¸¤ä¸ªå¯¹è±¡ç»§æ‰¿è‡ªåŒä¸€ä¸ªåŸå‹ï¼Œå¾€å¾€æ„å‘³ç€ï¼ˆä½†ä¸æ˜¯ç»å¯¹ï¼‰å®ƒä»¬æ˜¯ç”±åŒä¸€ä¸ªæ„é€ å‡½æ•°åˆ›å»ºå¹¶åˆå§‹åŒ–çš„ã€‚æˆ‘ä»¬å·²ç»åœ¨ Â§4.6ã€Â§6.2.2 å’Œ Â§8.2.3 èŠ‚ä¸­è¯¦ç»†è®²è§£äº†æ„é€ å‡½æ•°ï¼ŒÂ§9.2 ä¼šæœ‰è¿›ä¸€æ­¥è®¨è®ºã€‚</p>
</blockquote>
<p>JavaScript has always allowed the definition of classes. ES6 introduced a brand-new syntax (including a class keyword) that makes it even easier to create classes. These new JavaScript classes work in the same way that old-style classes do, and this chapter starts by explaining the old way of creating classes because that demonstrates more clearly what is going on behind the scenes to make classes work. Once weâ€™ve explained those fundamentals, weâ€™ll shift and start using the new, simplified class definition syntax.</p>
<blockquote>
<p>JavaScript ä¸€ç›´å…è®¸å®šä¹‰ç±»ã€‚ES6 å¼•å…¥äº†å…¨æ–°çš„è¯­æ³•ï¼ˆåŒ…æ‹¬ class å…³é”®å­—ï¼‰ï¼Œä½¿åˆ›å»ºç±»æ›´åŠ å®¹æ˜“ã€‚è¿™äº›æ–°çš„ JavaScript ç±»çš„å·¥ä½œæ–¹å¼ä¸æ—§å¼ç±»ç›¸åŒï¼Œæœ¬ç« é¦–å…ˆè§£é‡Šåˆ›å»ºç±»çš„æ—§æ–¹æ³•ï¼Œå› ä¸ºè¿™æ›´æ¸…æ¥šåœ°å±•ç¤ºäº†ç±»æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ä¸€æ—¦æˆ‘ä»¬è§£é‡Šäº†è¿™äº›åŸºæœ¬åŸç†ï¼Œæˆ‘ä»¬å°†æ”¹å˜å¹¶å¼€å§‹ä½¿ç”¨æ–°çš„ã€ç®€åŒ–çš„ç±»å®šä¹‰è¯­æ³•ã€‚</p>
</blockquote>
<p>If youâ€™re familiar with strongly typed object-oriented programming languages like Java or C++, youâ€™ll notice that JavaScript classes are quite different from classes in those languages. There are some syntactic similarities, and you can emulate many features of â€œclassicalâ€ classes in JavaScript, but it is best to understand up front that JavaScriptâ€™s classes and prototype-based inheritance mechanism are substantially different from the classes and class-based inheritance mechanism of Java and similar languages.</p>
<blockquote>
<p>å¦‚æœä½ å¯¹è¯¸å¦‚ Java å’Œ C++ è¿™ç§å¼ºç±»å‹çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ¯”è¾ƒç†Ÿæ‚‰ï¼Œä½ ä¼šå‘ç° JavaScript ä¸­çš„ç±»å’Œ Java ä»¥åŠ C++ ä¸­çš„ç±»æœ‰å¾ˆå¤§ä¸åŒã€‚å°½ç®¡åœ¨å†™æ³•ä¸Šç±»ä¼¼ï¼Œè€Œä¸”åœ¨ JavaScript ä¸­ä¹Ÿèƒ½â€œæ¨¡æ‹Ÿâ€å‡ºå¾ˆå¤šç»å…¸çš„ç±»çš„ç‰¹æ€§ï¼Œä½†æ˜¯æœ€å¥½è¦ç†è§£ JavaScript çš„ç±»å’ŒåŸºäºåŸå‹çš„ç»§æ‰¿æœºåˆ¶ï¼Œä»¥åŠå’Œä¼ ç»Ÿçš„ Javaï¼ˆå½“ç„¶è¿˜æœ‰ç±»ä¼¼ Java çš„è¯­è¨€ï¼‰çš„ç±»å’ŒåŸºäºç±»çš„ç»§æ‰¿æœºåˆ¶çš„ä¸åŒä¹‹å¤„ã€‚</p>
</blockquote>
<h2 id="9-1-Classes-and-Prototypes"><a href="#9-1-Classes-and-Prototypes" class="headerlink" title="9.1 Classes and Prototypes"></a>9.1 Classes and Prototypes</h2><p>In JavaScript, a class is a set of objects that inherit properties from the same prototype object. The prototype object, therefore, is the central feature of a class. Chapter 6 covered the Object.create() function that returns a newly created object that inherits from a specified prototype object. If we define a prototype object and then use Object.create() to create objects that inherit from it, we have defined a JavaScript class. Usually, the instances of a class require further initialization, and it is common to define a function that creates and initializes the new object. Example 9-1 demonstrates this: it defines a prototype object for a class that represents a range of values and also defines a factory function that creates and initializes a new instance of the class.</p>
<blockquote>
<p>åœ¨ JavaScript ä¸­ï¼Œç±»çš„æ‰€æœ‰å®ä¾‹å¯¹è±¡éƒ½ä»åŒä¸€ä¸ªåŸå‹å¯¹è±¡ä¸Šç»§æ‰¿å±æ€§ã€‚å› æ­¤ï¼ŒåŸå‹å¯¹è±¡æ˜¯ç±»çš„æ ¸å¿ƒã€‚åœ¨ç¤ºä¾‹ 6-1 ä¸­å®šä¹‰äº† inherit() å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œåè€…ç»§æ‰¿è‡ªæŸä¸ªåŸå‹å¯¹è±¡ã€‚å¦‚æœå®šä¹‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œç„¶åé€šè¿‡ inherit() å‡½æ•°åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ªå®ƒçš„å¯¹è±¡ï¼Œè¿™æ ·å°±å®šä¹‰äº†ä¸€ä¸ª JavaScript ç±»ã€‚é€šå¸¸ï¼Œç±»çš„å®ä¾‹è¿˜éœ€è¦è¿›ä¸€æ­¥çš„åˆå§‹åŒ–ï¼Œé€šå¸¸æ˜¯é€šè¿‡å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºå¹¶åˆå§‹åŒ–è¿™ä¸ªæ–°å¯¹è±¡ï¼Œå‚ç…§ç¤ºä¾‹ 9-1ã€‚ç¤ºä¾‹ 9-1 ç»™ä¸€ä¸ªè¡¨ç¤ºâ€œå€¼çš„èŒƒå›´â€çš„ç±»å®šä¹‰äº†åŸå‹å¯¹è±¡ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ªâ€œå·¥å‚â€å‡½æ•°ç”¨ä»¥åˆ›å»ºå¹¶åˆå§‹åŒ–ç±»çš„å®ä¾‹ã€‚</p>
</blockquote>
<p>Example 9-1. A simple JavaScript class</p>
<blockquote>
<p>ç¤ºä¾‹ 9-1ï¼šä¸€ä¸ªç®€å•çš„ JavaScript ç±»</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a factory function that returns a new range object.</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">range</span>(<span class="params"><span class="keyword">from</span>, to</span>) &#123;</span><br><span class="line">    <span class="comment">// Use Object.create() to create an object that inherits from the</span></span><br><span class="line">    <span class="comment">// prototype object defined below.  The prototype object is stored as</span></span><br><span class="line">    <span class="comment">// a property of this function, and defines the shared methods (behavior)</span></span><br><span class="line">    <span class="comment">// for all range objects.</span></span><br><span class="line">    <span class="keyword">let</span> r = <span class="title class_">Object</span>.<span class="title function_">create</span>(range.<span class="property">methods</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Store the start and end points (state) of this new range object.</span></span><br><span class="line">    <span class="comment">// These are noninherited properties that are unique to this object.</span></span><br><span class="line">    r.<span class="property">from</span> = <span class="keyword">from</span>;</span><br><span class="line">    r.<span class="property">to</span> = to;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Finally return the new object</span></span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This prototype object defines methods inherited by all range objects.</span></span><br><span class="line">range.<span class="property">methods</span> = &#123;</span><br><span class="line">    <span class="comment">// Return true if x is in the range, false otherwise</span></span><br><span class="line">    <span class="comment">// This method works for textual and Date ranges as well as numeric.</span></span><br><span class="line">    <span class="title function_">includes</span>(<span class="params">x</span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">from</span> &lt;= x &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A generator function that makes instances of the class iterable.</span></span><br><span class="line">    <span class="comment">// Note that it only works for numeric ranges.</span></span><br><span class="line">    *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> x = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">from</span>); x &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; x++) <span class="keyword">yield</span> x;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return a string representation of the range</span></span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">&quot;(&quot;</span> + <span class="variable language_">this</span>.<span class="property">from</span> + <span class="string">&quot;...&quot;</span> + <span class="variable language_">this</span>.<span class="property">to</span> + <span class="string">&quot;)&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Here are example uses of a range object.</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="title function_">range</span>(<span class="number">1</span>,<span class="number">3</span>);      <span class="comment">// Create a range object</span></span><br><span class="line">r.<span class="title function_">includes</span>(<span class="number">2</span>)            <span class="comment">// =&gt; true: 2 is in the range</span></span><br><span class="line">r.<span class="title function_">toString</span>()             <span class="comment">// =&gt; &quot;(1...3)&quot;</span></span><br><span class="line">[...r]                   <span class="comment">// =&gt; [1, 2, 3]; convert to an array via iterator</span></span><br></pre></td></tr></table></figure>
<p>There are a few things worth noting in the code of Example 9-1:</p>
<blockquote>
<p>åœ¨ç¤ºä¾‹ 9-1 çš„ä»£ç ä¸­æœ‰ä¸€ä¸‹å‡ ç‚¹å€¼å¾—æ³¨æ„ï¼š</p>
</blockquote>
<p>This code defines a factory function range() for creating new Range objects.</p>
<blockquote>
<p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªå·¥å‚å‡½æ•° range() ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ Range å¯¹è±¡ã€‚</p>
</blockquote>
<p>It uses the methods property of this range() function as a convenient place to store the prototype object that defines the class. There is nothing special or idiomatic about putting the prototype object here.</p>
<blockquote>
<p>ç”¨ range() å‡½æ•°çš„ methods å±æ€§æ¥å­˜æ”¾å®šä¹‰ç±»çš„åŸå‹å¯¹è±¡ã€‚åªæ˜¯å°†åŸå‹å¯¹è±¡éšæ„çš„æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªè§„çº¦æˆ–è€…ä¹ æƒ¯ã€‚</p>
</blockquote>
<p>The range() function defines from and to properties on each Range object. These are the unshared, noninherited properties that define the unique state of each individual Range object.</p>
<blockquote>
<p>range() å‡½æ•°åœ¨æ¯ä¸ª Range å¯¹è±¡ä¸­éƒ½å®šä¹‰ from å’Œ to å±æ€§ã€‚å®ƒä»¬æ˜¯éå…±äº«ã€éç»§æ‰¿å±æ€§ï¼Œæ˜¯æ¯ä¸ªç‹¬ç«‹çš„ Range å¯¹è±¡çš„ç‹¬ç‰¹è‡ªæœ‰çŠ¶æ€ã€‚</p>
</blockquote>
<p>The range.methods object uses the ES6 shorthand syntax for defining methods, which is why you donâ€™t see the function keyword anywhere. (See Â§6.10.5 to review object literal shorthand method syntax.)</p>
<blockquote>
<p>range.methods å¯¹è±¡åº”ç”¨äº† ES6 çš„é€Ÿè®°è¯­æ³•æ¥å®šä¹‰æ–¹æ³•ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆæ²¡æœ‰çœ‹åˆ° function å…³é”®å­—çš„åŸå› ã€‚ï¼ˆå‚ç…§ Â§6.10.5 æ¥å¤ä¹ å¯¹è±¡å­—é¢é‡é€Ÿè®°æ–¹æ³•è¯­æ³•ã€‚ï¼‰</p>
</blockquote>
<p>One of the methods in the prototype has the computed name (Â§6.10.2) Symbol.iterator, which means that it is defining an iterator for Range objects. The name of this method is prefixed with *, which indicates that it is a generator function instead of a regular function. Iterators and generators are covered in detail in Chapter 12. For now, the upshot is that instances of this Range class can be used with the for&#x2F;of loop and with the â€¦ spread operator.</p>
<blockquote>
<p>åŸå‹ä¸­çš„ä¸€ä¸ªæ–¹æ³• Symbol.iterator ä½¿ç”¨äº†è®¡ç®—å±æ€§åï¼ˆÂ§6.10.2ï¼‰ï¼Œè¡¨æ˜å®ƒæ˜¯ä¸º Range å¯¹è±¡å®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨ã€‚æ–¹æ³•åç§°å¸¦æœ‰ä¸€ä¸ªå‰ç¼€ *ï¼Œæ ‡è¯†å®ƒæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°è€Œä¸æ˜¯æ™®é€šçš„å‡½æ•°ã€‚è¿­ä»£å™¨å’Œç”Ÿæˆå™¨åœ¨ç¬¬ 12 ç« ä¼šè¯¦ç»†æè¿°ã€‚ç°åœ¨ï¼Œåªéœ€è¦çŸ¥é“ Range ç±»çš„å®ä¾‹å¯ä»¥ç”¨ for&#x2F;of å¾ªç¯å’Œå¯ä»¥ç”¨ â€¦ å±•å¼€è¿ç®—ç¬¦ã€‚</p>
</blockquote>
<p>The shared, inherited methods defined in range.methods all use the from and to properties that were initialized in the range() factory function. In order to refer to them, they use the this keyword to refer to the object through which they were invoked. This use of this is a fundamental characteristic of the methods of any class.</p>
<blockquote>
<p>å®šä¹‰åœ¨ range.methods ä¸­çš„å…±äº«ç»§æ‰¿æ–¹æ³•éƒ½ä½¿ç”¨åœ¨ range() å·¥å‚å‡½æ•°åˆå§‹åŒ–çš„ from å’Œ to å±æ€§ã€‚åœ¨è¿™äº›æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¸ºäº†å¼•ç”¨ from å’Œ to å±æ€§ï¼Œéƒ½ä½¿ç”¨ this å…³é”®å­—æ¥è·å–å¯¹è±¡çš„å¼•ç”¨ã€‚this è¿™ç§ç”¨æ³•æ˜¯ä»»ä½•ç±»ä¸­æ–¹æ³•çš„åŸºæœ¬ç‰¹å¾ã€‚</p>
</blockquote>
<h2 id="9-2-Classes-and-Constructors"><a href="#9-2-Classes-and-Constructors" class="headerlink" title="9.2 Classes and Constructors"></a>9.2 Classes and Constructors</h2><p>Example 9-1 demonstrates a simple way to define a JavaScript class. It is not the idiomatic way to do so, however, because it did not define a constructor. A constructor is a function designed for the initialization of newly created objects. Constructors are invoked using the new keyword as described in Â§8.2.3. Constructor invocations using new automatically create the new object, so the constructor itself only needs to initialize the state of that new object. The critical feature of constructor invocations is that the prototype property of the constructor is used as the prototype of the new object. Â§6.2.3 introduced prototypes and emphasized that while almost all objects have a prototype, only a few objects have a prototype property. Finally, we can clarify this: it is function objects that have a prototype property. This means that all objects created with the same constructor function inherit from the same object and are therefore members of the same class. Example 9-2 shows how we could alter the Range class of Example 9-1 to use a constructor function instead of a factory function. Example 9-2 demonstrates the idiomatic way to create a class in versions of JavaScript that do not support the ES6 class keyword. Even though class is well supported now, there is still lots of older JavaScript code around that defines classes like this, and you should be familiar with the idiom so that you can read old code and so that you understand what is going on â€œunder the hoodâ€ when you use the class keyword.</p>
<blockquote>
<p>ç¤ºä¾‹ 9-1 å±•ç¤ºäº†ä¸€ä¸ªç®€å•æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ª JavaScript ç±»ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•å¹¶ä¸å¸¸ç”¨ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚æ„é€ å‡½æ•°æ˜¯ç”¨æ¥åˆå§‹åŒ–æ–°å»ºå¯¹è±¡çš„ã€‚å¦‚ Â§8.2.3 ä¸­æ‰€è¿°æ„é€ å‡½æ•°ç”¨ new å…³é”®å­—æ¥è°ƒç”¨ã€‚ä½¿ç”¨ new è°ƒç”¨æ„é€ å‡½æ•°ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå› æ­¤æ„é€ å‡½æ•°æœ¬èº«åªéœ€åˆå§‹åŒ–è¿™ä¸ªæ–°å¯¹è±¡çš„çŠ¶æ€å³å¯ã€‚Â§6.2.3 ä»‹ç»å¹¶å¼ºè°ƒäº†è™½ç„¶æ‰€æœ‰å¯¹è±¡éƒ½æœ‰åŸå‹ï¼Œä½†æ˜¯åªæœ‰ä¸€éƒ¨åˆ†å¯¹è±¡æœ‰ä¸€ä¸ª prototype å±æ€§ã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æ¾„æ¸…è¿™ä¸€ç‚¹ï¼šæ˜¯å‡½æ•°å¯¹è±¡å…·æœ‰ prototype å±æ€§ã€‚è¿™æ„å‘³ç€æ‰€æœ‰ç”¨åŒä¸€æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ç»§æ‰¿åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å®ƒä»¬æ˜¯åŒä¸€ç±»çš„æˆå‘˜ã€‚ç¤ºä¾‹ 9-2 è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªæ„é€ å‡½æ•°æ¥æ›¿ä»£ç¤ºä¾‹ 9-1 ä¸­çš„å·¥å‚å‡½æ•°æ¥ä¿®æ”¹ Range ç±»ã€‚ç¤ºä¾‹ 9-2 æ¼”ç¤ºäº†åœ¨ä¸æ”¯æŒ ES6 class å…³é”®å­—ç‰ˆæœ¬çš„ JavaScript ä¸­åˆ›å»ºä¸€ä¸ªç±»çš„é€šç”¨æ–¹æ³•ã€‚å³ä½¿æ˜¯ class å·²ç»å¾ˆå¥½æ”¯æŒçš„ä»Šå¤©ï¼Œä»ç„¶æœ‰å¾ˆå¤šæ—§ JavaScript ä»£ç ç”¨è¿™ç§æ–¹å¼å®šä¹‰ç±»ï¼Œå¹¶ä¸”ä½ å¿…é¡»ç†Ÿæ‚‰è¿™ç§ä¹ æƒ¯ç”¨æ³•ï¼Œä»¥ä¾¿äºé˜…è¯»æ—§ä»£ç ï¼Œä¹Ÿèƒ½å¤Ÿåœ¨ä½¿ç”¨ class å…³é”®å­—æ—¶æ˜ç™½åœ¨åº•å±‚ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
</blockquote>
<p>Example 9-2. A Range class using a constructor</p>
<blockquote>
<p>ç¤ºä¾‹ 9-2ï¼šä½¿ç”¨æ„é€ å‡½æ•°çš„ Range ç±»</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a constructor function that initializes new Range objects.</span></span><br><span class="line"><span class="comment">// Note that it does not create or return the object. It just initializes this.</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Range</span>(<span class="params"><span class="keyword">from</span>, to</span>) &#123;</span><br><span class="line">    <span class="comment">// Store the start and end points (state) of this new range object.</span></span><br><span class="line">    <span class="comment">// These are noninherited properties that are unique to this object.</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">from</span> = <span class="keyword">from</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">to</span> = to;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// All Range objects inherit from this object.</span></span><br><span class="line"><span class="comment">// Note that the property name must be &quot;prototype&quot; for this to work.</span></span><br><span class="line"><span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">    <span class="comment">// Return true if x is in the range, false otherwise</span></span><br><span class="line">    <span class="comment">// This method works for textual and Date ranges as well as numeric.</span></span><br><span class="line">    <span class="attr">includes</span>: <span class="keyword">function</span>(<span class="params">x</span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">from</span> &lt;= x &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A generator function that makes instances of the class iterable.</span></span><br><span class="line">    <span class="comment">// Note that it only works for numeric ranges.</span></span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]: <span class="keyword">function</span>*() &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> x = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">from</span>); x &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; x++) <span class="keyword">yield</span> x;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return a string representation of the range</span></span><br><span class="line">    <span class="attr">toString</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">&quot;(&quot;</span> + <span class="variable language_">this</span>.<span class="property">from</span> + <span class="string">&quot;...&quot;</span> + <span class="variable language_">this</span>.<span class="property">to</span> + <span class="string">&quot;)&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Here are example uses of this new Range class</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="keyword">new</span> <span class="title class_">Range</span>(<span class="number">1</span>,<span class="number">3</span>);   <span class="comment">// Create a Range object; note the use of new</span></span><br><span class="line">r.<span class="title function_">includes</span>(<span class="number">2</span>)             <span class="comment">// =&gt; true: 2 is in the range</span></span><br><span class="line">r.<span class="title function_">toString</span>()              <span class="comment">// =&gt; &quot;(1...3)&quot;</span></span><br><span class="line">[...r]                    <span class="comment">// =&gt; [1, 2, 3]; convert to an array via iterator</span></span><br></pre></td></tr></table></figure>
<p>It is worth comparing Examples 9-1 and 9-2 fairly carefully and noting the differences between these two techniques for defining classes. First, notice that we renamed the range() factory function to Range() when we converted it to a constructor. This is a very common coding convention: constructor functions define, in a sense, classes, and classes have names that (by convention) begin with capital letters. Regular functions and methods have names that begin with lowercase letters.</p>
<blockquote>
<p>å°†ç¤ºä¾‹ 9-1 å’Œç¤ºä¾‹ 9-2 ä¸­çš„ä»£ç åšä¸€ä¸ªä»”ç»†çš„å¯¹æ¯”ï¼Œå¯ä»¥å‘ç°ä¸¤ç§ç±»å®šä¹‰æŠ€æœ¯çš„å·®åˆ«ã€‚é¦–å…ˆï¼Œæ³¨æ„å½“å·¥å‚å‡½æ•° range() è½¬åŒ–ä¸ºæ„é€ å‡½æ•°æ—¶è¢«é‡å‘½åä¸º Range()ã€‚è¿™é‡Œéµå¾ªäº†ä¸€ä¸ªå¸¸è§çš„ç¼–ç¨‹çº¦å®šï¼šä»æŸç§æ„ä¹‰ä¸Šè®²ï¼Œå®šä¹‰æ„é€ å‡½æ•°å³æ˜¯å®šä¹‰ç±»ï¼Œå¹¶ä¸”ç±»åé¦–å­—æ¯è¦å¤§å†™ã€‚è€Œæ™®é€šçš„å‡½æ•°å’Œæ–¹æ³•éƒ½æ˜¯é¦–å­—æ¯å°å†™ã€‚</p>
</blockquote>
<p>Next, notice that the Range() constructor is invoked (at the end of the example) with the new keyword while the range() factory function was invoked without it. Example 9-1 uses regular function invocation (Â§8.2.1) to create the new object, and Example 9-2 uses constructor invocation (Â§8.2.3). Because the Range() constructor is invoked with new, it does not have to call Object.create() or take any action to create a new object. The new object is automatically created before the constructor is called, and it is accessible as the this value. The Range() constructor merely has to initialize this. Constructors do not even have to return the newly created object. Constructor invocation automatically creates a new object, invokes the constructor as a method of that object, and returns the new object. The fact that constructor invocation is so different from regular function invocation is another reason that we give constructors names that start with capital letters. Constructors are written to be invoked as constructors, with the new keyword, and they usually wonâ€™t work properly if they are invoked as regular functions. A naming convention that keeps constructor functions distinct from regular functions helps programmers know when to use new.</p>
<blockquote>
<p>å†è€…ï¼Œæ³¨æ„ Range() æ„é€ å‡½æ•°æ˜¯é€šè¿‡ new å…³é”®å­—è°ƒç”¨çš„ï¼ˆåœ¨ç¤ºä¾‹ä»£ç çš„æœ«å°¾ï¼‰ï¼Œ è€Œ range() å·¥å‚å‡½æ•°åˆ™ä¸å¿…ä½¿ç”¨ newã€‚ç¤ºä¾‹ 9-1 é€šè¿‡è°ƒç”¨æ™®é€šå‡½æ•°ï¼ˆÂ§8.2.1ï¼‰æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œç¤ºä¾‹ 9-2 åˆ™ä½¿ç”¨æ„é€ å‡½æ•°è°ƒç”¨ï¼ˆÂ§8.2.3ï¼‰æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚ç”±äº Range() æ„é€ å‡½æ•°æ˜¯é€šè¿‡ new å…³é”®å­—è°ƒç”¨çš„ï¼Œå› æ­¤ä¸å¿…è°ƒç”¨ Object.create() æˆ–å…¶ä»–ä»€ä¹ˆé€»è¾‘æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚åœ¨è°ƒç”¨æ„é€ å‡½æ•°ä¹‹å‰å°±å·²ç»åˆ›å»ºäº†æ–°å¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡ this å…³é”®å­—å¯ä»¥è·å–è¿™ä¸ªæ–°å¯¹è±¡ã€‚Range() æ„é€ å‡½æ•°åªä¸è¿‡æ˜¯åˆå§‹åŒ– this è€Œå·²ã€‚æ„é€ å‡½æ•°ç”šè‡³ä¸å¿…è¿”å›è¿™ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œæ„é€ å‡½æ•°ä¼šè‡ªåŠ¨åˆ›å»ºå¯¹è±¡ï¼Œç„¶åå°†æ„é€ å‡½æ•°ä½œä¸ºè¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•æ¥è°ƒç”¨ä¸€æ¬¡ï¼Œæœ€åè¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚æ„é€ å‡½æ•°è°ƒç”¨ä¸å¸¸è§„å‡½æ•°è°ƒç”¨å¦‚æ­¤ä¸åŒï¼Œå®é™…ä¸Šï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸ºæ„é€ å‡½æ•°å‘½åä»¥å¤§å†™å­—æ¯ä¸ºåçš„å¦ä¸€ä¸ªåŸå› ã€‚æ„é€ å‡½æ•°å°±æ˜¯ç”¨æ¥â€œæ„é€ æ–°å¯¹è±¡â€çš„ï¼Œå®ƒå¿…é¡»é€šè¿‡å…³é”®å­— new è°ƒç”¨ï¼Œå¦‚æœå°†æ„é€ å‡½æ•°ç”¨åšæ™®é€šå‡½æ•°çš„è¯ï¼Œå¾€å¾€ä¸ä¼šæ­£å¸¸å·¥ä½œã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡å‘½åè§„çº¦æ¥ï¼ˆæ„é€ å‡½æ•°é¦–å­—æ¯å¤§å†™ï¼Œæ™®é€šæ–¹æ³•é¦–å­—æ¯å°å†™ï¼‰åˆ¤æ–­æ˜¯å¦åº”å½“åœ¨å‡½æ•°ä¹‹å‰å† ä»¥å…³é”®å­— newã€‚</p>
</blockquote>
<p><strong>CONSTRUCTORS AND NEW.TARGET</strong><br>Within a function body, you can tell whether the function has been invoked as a constructor with the special expression new.target. If the value of that expression is defined, then you know that the function was invoked as a constructor, with the new keyword. When we discuss subclasses in Â§9.5, weâ€™ll see that new.target is not always a reference to the constructor it is used in: it might also refer to the constructor function of a subclass.</p>
<blockquote>
<p>åœ¨å‡½æ•°æ­£æ–‡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„è¡¨è¾¾å¼ new.target æ¥åˆ¤æ–­å‡½æ•°æ˜¯å¦ä»¥æ„é€ å‡½æ•°çš„æ–¹å¼è°ƒç”¨ã€‚å¦‚æœå®šä¹‰äº†è¯¥è¡¨è¾¾å¼çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°æ˜¯é€šè¿‡ new å…³é”®å­—è°ƒç”¨çš„æ„é€ å‡½æ•°ã€‚å½“æˆ‘ä»¬åœ¨ Â§9.5 ä¸­è®¨è®ºå­ç±»æ—¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ° new.target ä¸æ€»æ˜¯å…¶æ‰€åœ¨çš„æ„é€ å‡½æ•°çš„å¼•ç”¨ï¼šå®ƒå¯èƒ½è¿˜å¼•ç”¨å­ç±»çš„æ„é€ å‡½æ•°ã€‚</p>
</blockquote>
<p>If new.target is undefined, then the containing function was invoked as a function, without the new keyword. JavaScriptâ€™s various error constructors can be invoked without new, and if you want to emulate this feature in your own constructors, you can write them like this:</p>
<blockquote>
<p>å¦‚æœ new.target æ˜¯ undefinedï¼Œé‚£ä¹ˆåŒ…å«å®ƒçš„å‡½æ•°æ˜¯ä½œä¸ºå‡½æ•°è°ƒç”¨çš„ï¼Œæ²¡æœ‰ä½¿ç”¨ new å…³é”®å­—ã€‚JavaScript å¾ˆå¤šå¼‚å¸¸æ„é€ å‡½æ•°å¯ä»¥ä¸ä½¿ç”¨ new æ¥è°ƒç”¨ï¼Œå¦‚æœæƒ³æ¨¡ä»¿è¿™ä¸ªç‰¹æ€§å¯ä»¥è¿™æ ·å†™ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">C</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">new</span>.<span class="property">target</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">C</span>();</span><br><span class="line">    <span class="comment">// initialization code goes here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This technique only works for constructors defined in this old-fashioned way. Classes created with the class keyword do not allow their constructors to be invoked without new.</p>
<blockquote>
<p>è¿™ä¸ªè€å¼æŠ€å·§åªåœ¨æ„é€ å‡½æ•°å®šä¹‰æ—¶ç”Ÿæ•ˆã€‚ç±»ä½¿ç”¨ class å…³é”®å­—åˆ›å»ºï¼Œä¸å…è®¸ä¸ä½¿ç”¨ new è°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°ã€‚</p>
</blockquote>
<p>Another critical difference between Examples 9-1 and 9-2 is the way the prototype object is named. In the first example, the prototype was range.methods. This was a convenient and descriptive name, but arbitrary. In the second example, the prototype is Range.prototype, and this name is mandatory. An invocation of the Range() constructor automatically uses Range.prototype as the prototype of the new Range object.</p>
<blockquote>
<p>ç¤ºä¾‹ 9-1 å’Œ 9-2 ä¹‹é—´çš„å¦ä¸€ä¸ªå…³é”®åŒºåˆ«æ˜¯åŸå‹å¯¹è±¡çš„å‘½åæ–¹å¼ã€‚åœ¨ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼ŒåŸå‹æ˜¯ range.methodsã€‚è¿™æ˜¯ä¸€ä¸ªæ–¹ä¾¿å’Œæè¿°æ€§çš„åç§°ï¼Œä½†éšæ„ã€‚åœ¨ç¬¬äºŒä¸ªç¤ºä¾‹ä¸­ï¼ŒåŸå‹ä¸º Range.prototypeï¼Œæ­¤åç§°æ˜¯è§„å®šçš„ã€‚Range() æ„é€ å‡½æ•°çš„è°ƒç”¨è‡ªåŠ¨ä½¿ç”¨ Range.prototype ä½œä¸ºæ–° Range å¯¹è±¡çš„åŸå‹ã€‚</p>
</blockquote>
<p>Finally, also note the things that do not change between Examples 9-1 and 9-2 : the range methods are defined and invoked in the same way for both classes. Because Example 9-2 demonstrates the idiomatic way to create classes in versions of JavaScript before ES6, it does not use the ES6 shorthand method syntax in the prototype object and explicitly spells out the methods with the function keyword. But you can see that the implementation of the methods is the same in both examples.</p>
<blockquote>
<p>æœ€åï¼Œè¿˜è¦æ³¨æ„ç¤ºä¾‹ 9-1 å’Œ 9-2 ä¹‹é—´ä¸å˜çš„éƒ¨åˆ†ï¼šå¯¹ä¸¤ä¸ªç±»æ¥è¯´ï¼Œrange æ–¹æ³•ä»¥ç›¸åŒçš„æ–¹å¼å®šä¹‰å’Œè°ƒç”¨ã€‚ç”±äºç¤ºä¾‹ 9-2 æ¼”ç¤ºäº†åœ¨ ES6 ä¹‹å‰åœ¨ JavaScript ç‰ˆæœ¬ä¸­åˆ›å»ºç±»çš„æƒ¯ç”¨æ–¹æ³•ï¼Œå› æ­¤å®ƒæ²¡åŸå‹å¯¹è±¡ä¸­ä½¿ç”¨ ES6 é€Ÿè®°æ–¹æ³•è¯­æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨ function å…³é”®å­—æ˜¾å¼æ‹¼å‡ºæ–¹æ³•åã€‚ä½†æ˜¯ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ä¸¤ä¸ªç¤ºä¾‹ä¸­ï¼Œæ–¹æ³•çš„å®ç°æ˜¯ç›¸åŒçš„ã€‚</p>
</blockquote>
<p>Importantly, note that neither of the two range examples uses arrow functions when defining constructors or methods. Recall from Â§8.1.3 that functions defined in this way do not have a prototype property and so cannot be used as constructors. Also, arrow functions inherit the this keyword from the context in which they are defined rather than setting it based on the object through which they are invoked, and this makes them useless for methods because the defining characteristic of methods is that they use this to refer to the instance on which they were invoked.</p>
<blockquote>
<p>è¯·æ³¨æ„ï¼Œåœ¨å®šä¹‰æ„é€ å‡½æ•°æˆ–æ–¹æ³•æ—¶ï¼Œä¸¤ä¸ª range ç¤ºä¾‹éƒ½æ²¡ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚å›æƒ³ä¸€ä¸‹ï¼Œä» Â§8.1.3 ä¸­ï¼Œç”¨è¿™ç§æ–¹å¼å®šä¹‰çš„å‡½æ•°æ²¡æœ‰åŸå‹å±æ€§ï¼Œå› æ­¤ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚æ­¤å¤–ï¼Œç®­å¤´å‡½æ•°ä»å®šä¹‰å®ƒä»¬çš„ä¸Šä¸‹æ–‡ä¸­ç»§æ‰¿ this å…³é”®å­—ï¼Œè€Œä¸æ˜¯åŸºäºè°ƒç”¨å®ƒä»¬çš„å¯¹è±¡è®¾ç½® this å€¼ï¼Œè¿™ä½¿å¾—ç®­å¤´å‡½æ•°å¯¹æ–¹æ³•æ¯«æ— ç”¨å¤„ï¼Œå› ä¸ºæ–¹æ³•çš„å®šä¹‰ç‰¹å¾æ˜¯æ–¹æ³•ä½¿ç”¨ this å…³é”®å­—æ¥å¼•ç”¨è°ƒç”¨æ–¹æ³•çš„å®ä¾‹ã€‚</p>
</blockquote>
<p>Fortunately, the new ES6 class syntax doesnâ€™t allow the option of defining methods with arrow functions, so this is not a mistake that you can accidentally make when using that syntax. We will cover the ES6 class keyword soon, but first, there are more details to cover about constructors.</p>
<blockquote>
<p>å¹¸è¿çš„æ˜¯ï¼Œæ–°çš„ ES6 ç±»è¯­æ³•ä¸å…è®¸ä½¿ç”¨ arrow å‡½æ•°å®šä¹‰æ–¹æ³•ï¼Œå› æ­¤è¿™ä¸æ˜¯ä½¿ç”¨è¯¥è¯­æ³•æ—¶å¯èƒ½ä¼šæ„å¤–çŠ¯çš„é”™è¯¯ã€‚æˆ‘ä»¬å°†å¾ˆå¿«ä»‹ç» ES6 ç±»å…³é”®å­—ï¼Œä½†é¦–å…ˆï¼Œæœ‰æ›´å¤šå…³äºæ„é€ å‡½æ•°çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
</blockquote>
<h3 id="9-2-1-Constructors-Class-Identity-and-instanceof"><a href="#9-2-1-Constructors-Class-Identity-and-instanceof" class="headerlink" title="9.2.1 Constructors, Class Identity, and instanceof"></a>9.2.1 Constructors, Class Identity, and instanceof</h3><p>As weâ€™ve seen, the prototype object is fundamental to the identity of a class: two objects are instances of the same class if and only if they inherit from the same prototype object. The constructor function that initializes the state of a new object is not fundamental: two constructor functions may have prototype properties that point to the same prototype object. Then, both constructors can be used to create instances of the same class.</p>
<blockquote>
<p>æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼ŒåŸå‹å¯¹è±¡æ˜¯ç±»çš„åŸºæœ¬æ ‡è¯†ï¼šåªæœ‰ä¸¤ä¸ªå¯¹è±¡ç»§æ‰¿åŒä¸€åŸå‹å¯¹è±¡æ—¶ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯åŒä¸€ç±»å®ä¾‹ã€‚æ„é€ å‡½æ•°çš„å…³é”®ç‚¹ä¸æ˜¯åˆå§‹åŒ–æ–°åˆ›å»ºå¯¹è±¡çš„çŠ¶æ€ï¼šä¸¤ä¸ªæ„é€ å‡½æ•°å¯èƒ½å…·æœ‰æŒ‡å‘åŒä¸€åŸå‹å¯¹è±¡çš„åŸå‹å±æ€§ã€‚é‚£ä¹ˆï¼Œä¸¤ä¸ªæ„é€ å‡½æ•°éƒ½å¯ç”¨äºåˆ›å»ºåŒä¸€ç±»çš„å®ä¾‹ã€‚</p>
</blockquote>
<p>Even though constructors are not as fundamental as prototypes, the constructor serves as the public face of a class. Most obviously, the name of the constructor function is usually adopted as the name of the class. We say, for example, that the Range() constructor creates Range objects. More fundamentally, however, constructors are used as the righthand operand of the instanceof operator when testing objects for membership in a class. If we have an object r and want to know if it is a Range object, we can write:</p>
<blockquote>
<p>å°½ç®¡æ„é€ å‡½æ•°ä¸åƒåŸå‹é‚£æ ·é‡è¦ï¼Œä½†æ˜¯æ„é€ å‡½æ•°å……å½“ class çš„å¤§ä¼—è„¸ã€‚æœ€æ˜æ˜¾çš„æ˜¯ï¼Œæ„é€ å‡½æ•°çš„åç§°é€šå¸¸ç”¨ä½œç±»çš„åç§°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¯´ Range() æ„é€ å‡½æ•°åˆ›å»º Range å¯¹è±¡ã€‚ç„¶è€Œï¼Œæ›´é‡è¦çš„æ˜¯æµ‹è¯•ç±»ä¸­å¯¹è±¡çš„æˆå‘˜å…³ç³»ï¼Œæ„é€ å‡½æ•°åœ¨å³è¾¹è¢«ç”¨ä½œ instanceof è¿ç®—ç¬¦çš„æ“ä½œæ•°ã€‚å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡ rï¼Œå¹¶ä¸”æƒ³çŸ¥é“å®ƒæ˜¯ä¸æ˜¯ä¸€ä¸ª Range å¯¹è±¡ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r <span class="keyword">instanceof</span> <span class="title class_">Range</span>   <span class="comment">// =&gt; true: r inherits from Range.prototype</span></span><br></pre></td></tr></table></figure>
<p>The instanceof operator was described in Â§4.9.4. The lefthand operand should be the object that is being tested, and the righthand operand should be a constructor function that names a class. The expression o instanceof C evaluates to true if o inherits from C.prototype. The inheritance need not be direct: if o inherits from an object that inherits from an object that inherits from C.prototype, the expression will still evaluate to true.</p>
<blockquote>
<p>instanceof è¿ç®—ç¬¦åœ¨ Â§4.9.4 ä¸­æœ‰æè¿°ã€‚å·¦è¾¹çš„æ“ä½œæ•°æ˜¯æƒ³è¦æµ‹è¯•çš„å¯¹è±¡ï¼Œå³è¾¹çš„æ“ä½œæ•°æ˜¯å‘½åç±»çš„æ„é€ å‡½æ•°ã€‚è¡¨è¾¾å¼ <code>o instanceof C</code> è®¡ç®—ç»“æœä¸º true æ—¶ï¼Œo ç»§æ‰¿è‡ª C.prototypeã€‚ä¸éœ€è¦ç›´æ¥ç»§æ‰¿ï¼šå¦‚æœ o ç»§æ‰¿äºä¸€ä¸ªç»§æ‰¿äº† C.prototype çš„å¯¹è±¡ï¼Œè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¹Ÿä»ä¼šæ˜¯ trueã€‚</p>
</blockquote>
<p>Technically speaking, in the previous code example, the instanceof operator is not checking whether r was actually initialized by the Range constructor. Instead, it is checking whether r inherits from Range.prototype. If we define a function Strange() and set its prototype to be the same as Range.prototype, then objects created with new Strange() will count as Range objects as far as instanceof is concerned (they wonâ€™t actually work as Range objects, however, because their from and to properties have not been initialized):</p>
<blockquote>
<p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œåœ¨ä¸Šä¸€ä¸ªä»£ç ç¤ºä¾‹ä¸­ï¼Œinstanceof è¿ç®—ç¬¦çš„å®ä¾‹æ²¡æœ‰æ£€æŸ¥ r æ˜¯å¦å®é™…ç”± Range æ„é€ å‡½æ•°åˆå§‹åŒ–ã€‚ç›¸åï¼Œå®ƒæ˜¯æ£€æŸ¥ r æ˜¯å¦ç»§æ‰¿ Range.prototypeã€‚å¦‚æœæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•° Strange() å¹¶å°†å…¶åŸå‹è®¾ç½®ä¸ Range.prototype ç›¸åŒï¼Œåˆ™ä½¿ç”¨æ–° Strange() åˆ›å»ºçš„å¯¹è±¡ç”¨ instanceof è¿ç®—ç¬¦å°†ç®—ä½œ Range å¯¹è±¡ï¼ˆä½†æ˜¯ï¼Œå®ƒä»¬å®é™…ä¸Šä¸ä¼šä½œä¸º Range å¯¹è±¡å·¥ä½œï¼Œå› ä¸ºå®ƒä»¬çš„ from å’Œ to å±æ€§å°šæœªåˆå§‹åŒ–ï¼‰ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Strange</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="title class_">Strange</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Strange</span>() <span class="keyword">instanceof</span> <span class="title class_">Range</span>   <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>Even though instanceof cannot actually verify the use of a constructor, it still uses a constructor function as its righthand side because constructors are the public identity of a class.</p>
<blockquote>
<p>å®é™…ä¸Šå³ä½¿ instanceof ä¸èƒ½éªŒè¯ä½¿ç”¨äº†æ„é€ å‡½æ•°ï¼Œå®ƒä»ç„¶ä½¿ç”¨æ„é€ å‡½æ•°ä½œä¸ºå…¶å³ä¾§ï¼Œå› ä¸ºæ„é€ å‡½æ•°æ˜¯ç±»çš„å…¬å…±æ ‡è¯†ã€‚</p>
</blockquote>
<p>If you want to test the prototype chain of an object for a specific prototype and do not want to use the constructor function as an intermediary, you can use the isPrototypeOf() method. In Example 9-1, for example, we defined a class without a constructor function, so there is no way to use instanceof with that class. Instead, however, we could test whether an object r was a member of that constructor-less class with this code:</p>
<blockquote>
<p>å¦‚æœè¦ä¸ºç‰¹å®šåŸå‹æµ‹è¯•å¯¹è±¡çš„åŸå‹é“¾ï¼Œå¹¶ä¸”ä¸æƒ³å°†æ„é€ å‡½æ•°ç”¨ä½œåª’ä»‹ï¼Œå¯ä»¥ä½¿ç”¨ isPrototypeOf() æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¤ºä¾‹ 9-1 ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ²¡æœ‰æ„é€ å‡½æ•°çš„ç±»ï¼Œå› æ­¤æ— æ³•å°† instanceof ä¸è¯¥ç±»ä¸€èµ·ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•å¯¹è±¡ r æ˜¯å¦æ˜¯å…·æœ‰æ­¤ä»£ç çš„æ— æ„é€ å‡½æ•°ç±»çš„æˆå‘˜ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">range.<span class="property">methods</span>.<span class="title function_">isPrototypeOf</span>(r);  <span class="comment">// range.methods is the prototype object.</span></span><br></pre></td></tr></table></figure>
<h3 id="9-2-2-The-constructor-Property"><a href="#9-2-2-The-constructor-Property" class="headerlink" title="9.2.2 The constructor Property"></a>9.2.2 The constructor Property</h3><p>In Example 9-2, we set Range.prototype to a new object that contained the methods for our class. Although it was convenient to express those methods as properties of a single object literal, it was not actually necessary to create a new object. Any regular JavaScript function (excluding arrow functions, generator functions, and async functions) can be used as a constructor, and constructor invocations need a prototype property. Therefore, every regular JavaScript function1 automatically has a prototype property. The value of this property is an object that has a single, non-enumerable constructor property. The value of the constructor property is the function object:</p>
<blockquote>
<p>åœ¨ç¤ºä¾‹ 9-2 ä¸­ï¼Œå°† Range.prototype å®šä¹‰ä¸ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ç±»æ‰€éœ€è¦çš„æ–¹æ³•ã€‚å…¶å®æ²¡æœ‰å¿…è¦æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç”¨å•ä¸ªå¯¹è±¡å­—é¢é‡çš„å±æ€§å°±å¯ä»¥æ–¹ä¾¿åœ°å®šä¹‰åŸå‹ä¸Šçš„æ–¹æ³•ã€‚ä»»ä½•æ™®é€š JavaScript å‡½æ•°ï¼ˆé™¤ç®­å¤´å‡½æ•°ã€ç”Ÿæˆå™¨å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°ä¹‹å¤–ï¼‰éƒ½å¯ä»¥ç”¨åšæ„é€ å‡½æ•°ï¼Œå¹¶ä¸”è°ƒç”¨æ„é€ å‡½æ•°æ˜¯éœ€è¦ä¸€ä¸ª prototype å±æ€§çš„ã€‚å› æ­¤ï¼Œæ¯ä¸ª JavaScript å‡½æ•°éƒ½è‡ªåŠ¨æ‹¥æœ‰ä¸€ä¸ª prototype å±æ€§ã€‚è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«å”¯ä¸€ä¸€ä¸ªä¸å¯æšä¸¾å±æ€§ constructorã€‚constructor å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> F = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;; <span class="comment">// This is a function object.</span></span><br><span class="line"><span class="keyword">let</span> p = F.<span class="property"><span class="keyword">prototype</span></span>;   <span class="comment">// This is the prototype object associated with F.</span></span><br><span class="line"><span class="keyword">let</span> c = p.<span class="property">constructor</span>; <span class="comment">// This is the function associated with the prototype.</span></span><br><span class="line">c === F                <span class="comment">// =&gt; true: F.prototype.constructor === F for any F</span></span><br></pre></td></tr></table></figure>
<p>The existence of this predefined prototype object with its constructor property means that objects typically inherit a constructor property that refers to their constructor. Since constructors serve as the public identity of a class, this constructor property gives the class of an object:</p>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°æ„é€ å‡½æ•°çš„åŸå‹ä¸­å­˜åœ¨é¢„å…ˆå®šä¹‰å¥½çš„ constructor å±æ€§ï¼Œè¿™æ„å‘³ç€å¯¹è±¡é€šå¸¸ç»§æ‰¿çš„ constructor æ˜¯å®ƒä»¬çš„æ„é€ å‡½æ•°çš„å¼•ç”¨ã€‚ç”±äºæ„é€ å‡½æ•°æ˜¯ç±»çš„â€œå…¬å…±æ ‡è¯†â€ï¼Œ å› æ­¤è¿™ä¸ª constructor å±æ€§ä¸ºå¯¹è±¡æä¾›äº†ç±»ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> <span class="title function_">F</span>();      <span class="comment">// Create an object o of class F</span></span><br><span class="line">o.<span class="property">constructor</span> === F   <span class="comment">// =&gt; true: the constructor property specifies the class</span></span><br></pre></td></tr></table></figure>
<p>Figure 9-1 illustrates this relationship between the constructor function, its prototype object, the back reference from the prototype to the constructor, and the instances created with the constructor.</p>
<blockquote>
<p>å¦‚å›¾ 9-1 æ‰€ç¤ºï¼Œå›¾ 9-1 å±•ç¤ºäº†æ„é€ å‡½æ•°å’ŒåŸå‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼ŒåŒ…æ‹¬åŸå‹åˆ°æ„é€ å‡½æ•°çš„åå‘å¼•ç”¨ä»¥åŠæ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹ã€‚</p>
</blockquote>
<p><Figures figure="9-1">A constructor function, its prototype, and instances</Figures></p>
<p>Notice that Figure 9-1 uses our Range() constructor as an example. In fact, however, the Range class defined in Example 9-2 overwrites the predefined Range.prototype object with an object of its own. And the new prototype object it defines does not have a constructor property. So instances of the Range class, as defined, do not have a constructor property. We can remedy this problem by explicitly adding a constructor to the prototype:</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå›¾ 9-1 ç”¨ Range() æ„é€ å‡½æ•°ä½œä¸ºç¤ºä¾‹ã€‚ä½†å®é™…ä¸Šï¼Œç¤ºä¾‹ 9-2 ä¸­å®šä¹‰çš„ Range ç±»ä½¿ç”¨å®ƒè‡ªèº«çš„ä¸€ä¸ªæ–°å¯¹è±¡é‡å†™äº†é¢„å®šä¹‰çš„ Range.prototype å¯¹è±¡ã€‚è¿™ä¸ªæ–°å®šä¹‰çš„åŸå‹å¯¹è±¡ä¸å«æœ‰ constructor å±æ€§ã€‚å› æ­¤ Range ç±»çš„å®ä¾‹ä¹Ÿä¸å«æœ‰ constructor å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¡¥æ•‘æªæ–½æ¥ä¿®æ­£è¿™ä¸ªé—®é¢˜ï¼Œæ˜¾å¼ç»™åŸå‹æ·»åŠ ä¸€ä¸ªæ„é€ å‡½æ•°ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">    <span class="attr">constructor</span>: <span class="title class_">Range</span>,  <span class="comment">// Explicitly set the constructor back-reference</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* method definitions go here */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Another common technique that you are likely to see in older JavaScript code is to use the predefined prototype object with its constructor property and add methods to it one at a time with code like this:</p>
<blockquote>
<p>å¦ä¸€ç§å¸¸è§çš„è§£å†³åŠæ³•æ˜¯ä½¿ç”¨é¢„å®šä¹‰çš„åŸå‹å¯¹è±¡ï¼Œé¢„å®šä¹‰çš„åŸå‹å¯¹è±¡åŒ…å« constructor å±æ€§ï¼Œç„¶åä¾æ¬¡ç»™åŸå‹å¯¹è±¡æ·»åŠ æ–¹æ³•ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Extend the predefined Range.prototype object so we don&#x27;t overwrite</span></span><br><span class="line"><span class="comment">// the automatically created Range.prototype.constructor property.</span></span><br><span class="line"><span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">includes</span> = <span class="keyword">function</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">from</span> &lt;= x &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">to</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;(&quot;</span> + <span class="variable language_">this</span>.<span class="property">from</span> + <span class="string">&quot;...&quot;</span> + <span class="variable language_">this</span>.<span class="property">to</span> + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="9-3-Classes-with-the-class-Keyword"><a href="#9-3-Classes-with-the-class-Keyword" class="headerlink" title="9.3 Classes with the class Keyword"></a>9.3 Classes with the class Keyword</h2><p>Classes have been part of JavaScript since the very first version of the language, but in ES6, they finally got their own syntax with the introduction of the class keyword. Example 9-3 shows what our Range class looks like when written with this new syntax.</p>
<blockquote>
<p>ç±»è‡ªç¬¬ä¸€ä¸ªç‰ˆæœ¬ä»¥æ¥ä¸€ç›´æ˜¯ JavaScript çš„ä¸€éƒ¨åˆ†ï¼Œä½†åœ¨ ES6 ä¸­ï¼Œå®ƒä»¬æœ€ç»ˆå¼•å…¥ class å…³é”®å­—å¾—åˆ°äº†è‡ªå·±çš„è¯­æ³•ã€‚ç¤ºä¾‹ 9-3 æ˜¾ç¤ºäº†ä½¿ç”¨æ­¤æ–°è¯­æ³•ç¼–å†™ Range ç±»çš„å®ç°ã€‚</p>
</blockquote>
<p>Example 9-3. The Range class rewritten using class</p>
<blockquote>
<p>ç¤ºä¾‹ 9-3ï¼šä½¿ç”¨ class ç¼–å†™ Range ç±»</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Range</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">from</span>, to</span>) &#123;</span><br><span class="line">        <span class="comment">// Store the start and end points (state) of this new range object.</span></span><br><span class="line">        <span class="comment">// These are noninherited properties that are unique to this object.</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">from</span> = <span class="keyword">from</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">to</span> = to;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return true if x is in the range, false otherwise</span></span><br><span class="line">    <span class="comment">// This method works for textual and Date ranges as well as numeric.</span></span><br><span class="line">    <span class="title function_">includes</span>(<span class="params">x</span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">from</span> &lt;= x &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A generator function that makes instances of the class iterable.</span></span><br><span class="line">    <span class="comment">// Note that it only works for numeric ranges.</span></span><br><span class="line">    *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> x = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">from</span>); x &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; x++) <span class="keyword">yield</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return a string representation of the range</span></span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="variable language_">this</span>.<span class="keyword">from</span>&#125;</span>...<span class="subst">$&#123;<span class="variable language_">this</span>.to&#125;</span>)`</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Here are example uses of this new Range class</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="keyword">new</span> <span class="title class_">Range</span>(<span class="number">1</span>,<span class="number">3</span>);   <span class="comment">// Create a Range object</span></span><br><span class="line">r.<span class="title function_">includes</span>(<span class="number">2</span>)             <span class="comment">// =&gt; true: 2 is in the range</span></span><br><span class="line">r.<span class="title function_">toString</span>()              <span class="comment">// =&gt; &quot;(1...3)&quot;</span></span><br><span class="line">[...r]                    <span class="comment">// =&gt; [1, 2, 3]; convert to an array via iterator</span></span><br></pre></td></tr></table></figure>
<p>It is important to understand that the classes defined in Examples 9-2 and 9-3 work in exactly the same way. The introduction of the class keyword to the language does not alter the fundamental nature of JavaScriptâ€™s prototype-based classes. And although Example 9-3 uses the class keyword, the resulting Range object is a constructor function, just like the version defined in Example 9-2. The new class syntax is clean and convenient but is best thought of as â€œsyntactic sugarâ€ for the more fundamental class definition mechanism shown in Example 9-2.</p>
<blockquote>
<p>é‡è¦çš„æ˜¯è¦äº†è§£ï¼Œåœ¨ç¤ºä¾‹ 9-2 å’Œ 9-3 ä¸­å®šä¹‰çš„ç±»çš„å·¥ä½œæ–¹å¼å®Œå…¨ç›¸åŒã€‚å°† class å…³é”®å­—å¼•å…¥è¯­è¨€å¹¶ä¸ä¼šæ”¹å˜ JavaScript åŸºäºåŸå‹çš„ç±»çš„åŸºæœ¬æ€§è´¨ã€‚å°½ç®¡ç¤ºä¾‹ 9-3 ä½¿ç”¨ class å…³é”®å­—ï¼Œä½†ç”Ÿæˆçš„ Range å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå°±åƒç¤ºä¾‹ 9-2 ä¸­å®šä¹‰çš„ç‰ˆæœ¬ä¸€æ ·ã€‚æ–°çš„ class è¯­æ³•æ›´æ¸…æ´æ–¹ä¾¿ï¼Œä½†æ˜¯æœ€å¥½å°†å…¶çœ‹ä½œç¤ºä¾‹ 9-2 æ‰€ç¤ºçš„åŸºæœ¬ç±»å®šä¹‰æœºåˆ¶çš„è¯­æ³•ç³–ã€‚</p>
</blockquote>
<p>Note the following things about the class syntax in Example 9-3:</p>
<blockquote>
<p>æ³¨æ„åœ¨ç¤ºä¾‹ 9-3 ä¸­å…³äº class è¯­æ³•çš„ä¸€ä¸‹å‡ ç‚¹ï¼š</p>
</blockquote>
<p>The class is declared with the class keyword, which is followed by the name of class and a class body in curly braces.</p>
<blockquote>
<p>ç”¨ class å…³é”®å­—å£°æ˜ç±»ï¼Œåé¢æ¥ä¸€ä¸ªç±»åï¼Œæœ€åæ˜¯èŠ±æ‹¬å·åŒ…å«ç±»çš„æ­£æ–‡ã€‚</p>
</blockquote>
<p>The class body includes method definitions that use object literal method shorthand (which we also used in Example 9-1), where the function keyword is omitted. Unlike object literals, however, no commas are used to separate the methods from each other. (Although class bodies are superficially similar to object literals, they are not the same thing. In particular, they do not support the definition of properties with name&#x2F;value pairs.)</p>
<blockquote>
<p>ç±»æ­£æ–‡åŒ…æ‹¬ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ–¹æ³•é€Ÿè®°å®šä¹‰çš„æ–¹æ³•ï¼ˆæˆ‘ä»¬åœ¨ç¤ºä¾‹ 9-1 ä¸­ä¹Ÿä½¿ç”¨äº†ï¼‰ï¼Œå…¶ä¸­çœç•¥äº†å‡½æ•°å…³é”®å­—ã€‚ä½†æ˜¯ï¼Œä¸å¯¹è±¡å­—é¢é‡ä¸åŒï¼Œæ²¡æœ‰ç”¨é€—å·å°†æ–¹æ³•å½¼æ­¤åˆ†å¼€ã€‚ï¼ˆè™½ç„¶ç±»æ­£æ–‡è¡¨é¢ä¸Šä¸å¯¹è±¡å­—é¢é‡ç›¸ä¼¼ï¼Œä½†å®ƒä»¬ä¸æ˜¯ä¸€å›äº‹ã€‚ä¸å¯¹è±¡ä¸åŒï¼Œç±»ä¸æ”¯æŒå…·æœ‰å&#x2F;å€¼å¯¹çš„å±æ€§çš„å®šä¹‰ã€‚</p>
</blockquote>
<p>The keyword constructor is used to define the constructor function for the class. The function defined is not actually named â€œconstructorâ€, however. The class declaration statement defines a new variable Range and assigns the value of this special constructor function to that variable.</p>
<blockquote>
<p>å…³é”®å­— constructor ç”¨äºå®šä¹‰ç±»çš„æ„é€ å‡½æ•°ã€‚ä½†æ˜¯ï¼Œå®šä¹‰çš„å‡½æ•°å®é™…ä¸Šå¹¶ä¸å‘½åä¸º constructorã€‚ç±»å£°æ˜è¯­å¥å®šä¹‰ä¸€ä¸ªæ–°çš„å˜é‡ Rangeï¼Œå¹¶å°†æ­¤ç‰¹æ®Šæ„é€ å‡½æ•°çš„å€¼åˆ†é…ç»™è¯¥å˜é‡ã€‚</p>
</blockquote>
<p>If your class does not need to do any initialization, you can omit the constructor keyword and its body, and an empty constructor function will be implicitly created for you.</p>
<blockquote>
<p>å¦‚æœç±»ä¸éœ€è¦æ‰§è¡Œä»»ä½•åˆå§‹åŒ–ï¼Œå¯ä»¥çœç•¥æ„é€ å‡½æ•°å…³é”®å­—åŠå…¶æ­£æ–‡ï¼Œå¹¶å°†éšå¼åˆ›å»ºä¸€ä¸ªç©ºæ„é€ å‡½æ•°ã€‚</p>
</blockquote>
<p>If you want to define a class that subclassesâ€”or inherits fromâ€”another class, you can use the extends keyword with the class keyword:</p>
<blockquote>
<p>å¦‚æœè¦å®šä¹‰å­ç±»ï¼ˆæˆ–ç»§æ‰¿æ¥è‡ªå¦ä¸€ä¸ªç±»çš„ç±»ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ extends å…³é”®å­—ä¸ class å…³é”®å­—ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A Span is like a Range, but instead of initializing it with</span></span><br><span class="line"><span class="comment">// a start and an end, we initialize it with a start and a length</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Span</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Range</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">start, length</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (length &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable language_">super</span>(start, start + length);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">super</span>(start + length, start);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Creating subclasses is a whole topic of its own. Weâ€™ll return to it, and explain the extends and super keywords shown here, in Â§9.5.</p>
<blockquote>
<p>åˆ›å»ºå­ç±»æ˜¯å®Œæ•´çš„ä¸€èŠ‚ã€‚æˆ‘ä»¬å°†åœ¨ Â§9.5 é‡æ–°è®²åˆ°å®ƒï¼Œå¹¶è§£é‡Šè¿™é‡Œçš„ extends å’Œ super å…³é”®å­—ã€‚</p>
</blockquote>
<p>Like function declarations, class declarations have both statement and expression forms. Just as we can write:</p>
<blockquote>
<p>ä¸å‡½æ•°å£°æ˜ä¸€æ ·ï¼Œç±»å£°æ˜åŒæ—¶å…·æœ‰è¯­å¥å’Œè¡¨è¾¾å¼å½¢å¼ã€‚æ­£å¦‚æˆ‘ä»¬å¯ä»¥å†™ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> square = <span class="keyword">function</span>(<span class="params">x</span>) &#123; <span class="keyword">return</span> x * x; &#125;;</span><br><span class="line"><span class="title function_">square</span>(<span class="number">3</span>)  <span class="comment">// =&gt; 9</span></span><br><span class="line">we can also <span class="attr">write</span>:</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Square</span> = <span class="keyword">class</span> &#123; <span class="title function_">constructor</span>(<span class="params">x</span>) &#123; <span class="variable language_">this</span>.<span class="property">area</span> = x * x; &#125; &#125;;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Square</span>(<span class="number">3</span>).<span class="property">area</span>  <span class="comment">// =&gt; 9</span></span><br></pre></td></tr></table></figure>
<p>As with function definition expressions, class definition expressions can include an optional class name. If you provide such a name, that name is only defined within the class body itself.</p>
<blockquote>
<p>ä¸å‡½æ•°å®šä¹‰è¡¨è¾¾å¼ä¸€æ ·ï¼Œç±»å®šä¹‰è¡¨è¾¾å¼å¯ä»¥åŒ…å«å¯é€‰ç±»åã€‚å¦‚æœæä¾›è¿™æ ·çš„åç§°ï¼Œåˆ™è¯¥åç§°ä»…åœ¨ç±»æ­£æ–‡æœ¬èº«ä¸­æœ‰å®šä¹‰ã€‚</p>
</blockquote>
<p>Although function expressions are quite common (particularly with the arrow function shorthand), in JavaScript programming, class definition expressions are not something that you are likely to use much unless you find yourself writing a function that takes a class as its argument and returns a subclass.</p>
<blockquote>
<p>å°½ç®¡å‡½æ•°è¡¨è¾¾å¼å¾ˆå¸¸è§ï¼ˆå°¤å…¶æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼‰ï¼Œä½† JavaScript ç¼–ç¨‹ä¸­ï¼Œç±»å®šä¹‰è¡¨è¾¾å¼å¯èƒ½å¹¶ä¸æ˜¯ç»å¸¸ä½¿ç”¨ï¼Œé™¤éæ­£åœ¨ç¼–å†™ä¸€ä¸ªä»¥ç±»ä¸ºå®å‚å¹¶è¿”å›å­ç±»çš„å‡½æ•°ã€‚</p>
</blockquote>
<p>Weâ€™ll conclude this introduction to the class keyword by mentioning a couple of important things you should know that are not apparent from class syntax:</p>
<blockquote>
<p>ç»“æŸå¯¹ class å…³é”®å­—çš„ä»‹ç»å‰ï¼Œæœ€åæå‡ ä¸ªé‡è¦ä½†æ˜¯ä¸æ˜“æ³¨æ„çš„ç±»è¯­æ³•ï¼š</p>
</blockquote>
<p>All code within the body of a class declaration is implicitly in strict mode (Â§5.6.3), even if no â€œuse strictâ€ directive appears. This means, for example, that you canâ€™t use octal integer literals or the with statement within class bodies and that you are more likely to get syntax errors if you forget to declare a variable before using it.</p>
<blockquote>
<p>ç±»å£°æ˜æ­£æ–‡ä¸­çš„æ‰€æœ‰ä»£ç éƒ½éšå¼é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ˆÂ§5.6.3ï¼‰ï¼Œå³ä½¿æœªå‡ºç°â€use strictâ€æŒ‡ä»¤ã€‚ä¾‹å¦‚ï¼Œè¿™æ„å‘³ç€ä¸èƒ½åœ¨ç±»æ­£æ–‡ä¸­ä½¿ç”¨å…«è¿›åˆ¶æ•´æ•°å­—é¢é‡æˆ– with è¯­å¥ï¼Œå¹¶ä¸”å¦‚æœåœ¨ä½¿ç”¨å˜é‡ä¹‹å‰å¿˜è®°å£°æ˜å˜é‡ï¼Œåˆ™æ›´æœ‰å¯èƒ½å‡ºç°è¯­æ³•é”™è¯¯ã€‚</p>
</blockquote>
<p>Unlike function declarations, class declarations are not â€œhoisted.â€ Recall from Â§8.1.1 that function definitions behave as if they had been moved to the top of the enclosing file or enclosing function, meaning that you can invoke a function in code that comes before the actual definition of the function. Although class declarations are like function declarations in some ways, they do not share this hoisting behavior: you cannot instantiate a class before you declare it.</p>
<blockquote>
<p>ä¸å‡½æ•°å£°æ˜ä¸åŒï¼Œç±»å£°æ˜ä¸æ˜¯â€å£°æ˜æå‰â€çš„ã€‚å›æƒ³ä¸€ä¸‹ Â§8.1.1 ä¸­ï¼Œå‡½æ•°å®šä¹‰çš„è¡Œä¸ºå°±åƒå®ƒä»¬è¢«ç§»åŠ¨åˆ°å°é—­æ–‡ä»¶çš„é¡¶éƒ¨æˆ–å°é—­å‡½æ•°çš„é¡¶éƒ¨ä¸€æ ·ï¼Œè¿™æ„å‘³ç€å¯ä»¥åœ¨å‡½æ•°å®é™…å®šä¹‰ä¹‹å‰çš„ä»£ç ä¸­è°ƒç”¨å‡½æ•°ã€‚å°½ç®¡ç±»å£°æ˜åœ¨æŸäº›æ–¹é¢ä¸å‡½æ•°å£°æ˜ä¸€æ ·ï¼Œä½†å®ƒä»¬ä¸å…±äº«è¿™ç§æå‰è¡Œä¸ºï¼šåœ¨å£°æ˜ç±»ä¹‹å‰ï¼Œä¸èƒ½å®ä¾‹åŒ–ç±»ã€‚</p>
</blockquote>
<h3 id="9-3-1-Static-Methods"><a href="#9-3-1-Static-Methods" class="headerlink" title="9.3.1 Static Methods"></a>9.3.1 Static Methods</h3><p>You can define a static method within a class body by prefixing the method declaration with the static keyword. Static methods are defined as properties of the constructor function rather than properties of the prototype object.</p>
<blockquote>
<p>å¯ä»¥é€šè¿‡ä½¿ç”¨ static å…³é”®å­—ä½œä¸ºæ–¹æ³•å£°æ˜å‰ç¼€æ¥å®šä¹‰ç±»æ­£æ–‡ä¸­çš„é™æ€æ–¹æ³•ã€‚é™æ€æ–¹æ³•å®šä¹‰ä¸ºæ„é€ å‡½æ•°çš„å±æ€§ï¼Œè€Œä¸æ˜¯åŸå‹å¯¹è±¡çš„å±æ€§ã€‚</p>
</blockquote>
<p>For example, suppose we added the following code to Example 9-3:</p>
<blockquote>
<p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°ç¤ºä¾‹ 9-3 ä¸­ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="title function_">parse</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> matches = s.<span class="title function_">match</span>(<span class="regexp">/^\((\d+)\.\.\.(\d+)\)$/</span>);</span><br><span class="line">    <span class="keyword">if</span> (!matches) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">`Cannot parse Range from &quot;<span class="subst">$&#123;s&#125;</span>&quot;.`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Range</span>(<span class="built_in">parseInt</span>(matches[<span class="number">1</span>]), <span class="built_in">parseInt</span>(matches[<span class="number">2</span>]));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The method defined by this code is Range.parse(), not Range.prototype.parse(), and you must invoke it through the constructor, not through an instance:</p>
<blockquote>
<p>æ­¤ä»£ç å®šä¹‰çš„æ–¹æ³•æ˜¯ Range.parse()ï¼Œ è€Œä¸æ˜¯ Range.prototype.parse()ï¼Œ å¿…é¡»é€šè¿‡æ„é€ å‡½æ•°è€Œä¸æ˜¯é€šè¿‡å®ä¾‹è°ƒç”¨å®ƒï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="title class_">Range</span>.<span class="title function_">parse</span>(<span class="string">&#x27;(1...10)&#x27;</span>); <span class="comment">// Returns a new Range object</span></span><br><span class="line">r.<span class="title function_">parse</span>(<span class="string">&#x27;(1...10)&#x27;</span>);             <span class="comment">// TypeError: r.parse is not a function</span></span><br></pre></td></tr></table></figure>
<p>Youâ€™ll sometimes see static methods called class methods because they are invoked using the name of the class&#x2F;constructor. When this term is used, it is to contrast class methods with the regular instance methods that are invoked on instances of the class. Because static methods are invoked on the constructor rather than on any particular instance, it almost never makes sense to use the this keyword in a static method.</p>
<blockquote>
<p>æœ‰æ—¶ä¼šçœ‹åˆ°é™æ€æ–¹æ³•ç§°ä¸ºç±»æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä½¿ç”¨ç±»&#x2F;æ„é€ å‡½æ•°çš„åç§°è°ƒç”¨çš„ã€‚ä½¿ç”¨æ­¤æœ¯è¯­æ—¶ï¼Œå°†ç±»æ–¹æ³•ä¸åœ¨ç±»å®ä¾‹ä¸Šè°ƒç”¨çš„å¸¸è§„å®ä¾‹æ–¹æ³•è¿›è¡Œå¯¹æ¯”ï¼Œç”±äºé™æ€æ–¹æ³•åœ¨æ„é€ å‡½æ•°ä¸Šè°ƒç”¨ï¼Œè€Œä¸æ˜¯åœ¨ä»»ä½•ç‰¹å®šå®ä¾‹ä¸Šè°ƒç”¨ï¼Œå› æ­¤åœ¨é™æ€æ–¹æ³•ä¸­ä½¿ç”¨ this å…³é”®å­—å‡ ä¹ä»æ¥å°±æ²¡æœ‰æ„ä¹‰ã€‚</p>
</blockquote>
<p>Weâ€™ll see examples of static methods in Example 9-4.</p>
<blockquote>
<p>æˆ‘ä»¬å°†åœ¨ç¤ºä¾‹ 9-4 ä¸­çœ‹åˆ°é™æ€æ–¹æ³•çš„ç¤ºä¾‹ã€‚</p>
</blockquote>
<h3 id="9-3-2-Getters-Setters-and-other-Method-Forms"><a href="#9-3-2-Getters-Setters-and-other-Method-Forms" class="headerlink" title="9.3.2 Getters, Setters, and other Method Forms"></a>9.3.2 Getters, Setters, and other Method Forms</h3><p>Within a class body, you can define getter and setter methods (Â§6.10.6) just as you can in object literals. The only difference is that in class bodies, you donâ€™t put a comma after the getter or setter. Example 9-4 includes a practical example of a getter method in a class.</p>
<blockquote>
<p>åœ¨ç±»æ­£æ–‡ä¸­ï¼Œå¯ä»¥å®šä¹‰ getter å’Œ setter æ–¹æ³•ï¼ˆÂ§6.10.6ï¼‰ï¼Œå°±åƒåœ¨å¯¹è±¡å­—é¢é‡ä¸­ä¸€æ ·ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œåœ¨ç±»æ­£æ–‡ä¸­ï¼Œä¸ä¼šå°†é€—å·æ”¾åœ¨ getter æˆ– setter ä¹‹åã€‚ç¤ºä¾‹ 9-4 åŒ…æ‹¬ç±»ä¸­ getter æ–¹æ³•çš„å®é™…ç¤ºä¾‹ã€‚</p>
</blockquote>
<p>In general, all of the shorthand method definition syntaxes allowed in object literals are also allowed in class bodies. This includes generator methods (marked with *) and methods whose names are the value of an expression in square brackets. In fact, youâ€™ve already seen (in Example 9-3) a generator method with a computed name that makes the Range class iterable:</p>
<blockquote>
<p>é€šå¸¸ï¼Œå¯¹è±¡å­—é¢é‡ä¸­å…è®¸çš„æ‰€æœ‰é€Ÿè®°æ–¹æ³•å®šä¹‰è¯­æ³•ä¹Ÿå…è®¸åœ¨ç±»æ­£æ–‡ä¸­ä½¿ç”¨ã€‚è¿™åŒ…æ‹¬ç”Ÿæˆå™¨æ–¹æ³•ï¼ˆç”¨ * æ ‡è®°ï¼‰å’Œåç§°ä¸ºæ–¹æ‹¬å·ä¸­è¡¨è¾¾å¼å€¼çš„æ–¹æ³•ã€‚äº‹å®ä¸Šï¼Œå·²ç»çœ‹åˆ°äº†ï¼ˆåœ¨ç¤ºä¾‹ 9-3 ä¸­ï¼‰å…·æœ‰è®¡ç®—åç§°çš„ç”Ÿæˆå™¨æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½¿ Range ç±»å¯é‡å¤ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> x = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="variable language_">this</span>.<span class="property">from</span>); x &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; x++) <span class="keyword">yield</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-3-3-Public-Private-and-Static-Fields"><a href="#9-3-3-Public-Private-and-Static-Fields" class="headerlink" title="9.3.3 Public, Private, and Static Fields"></a>9.3.3 Public, Private, and Static Fields</h3><p>In the discussion here of classes defined with the class keyword, we have only described the definition of methods within the class body. The ES6 standard only allows the creation of methods (including getters, setters, and generators) and static methods; it does not include syntax for defining fields. If you want to define a field (which is just an object-oriented synonym for â€œpropertyâ€) on a class instance, you must do that in the constructor function or in one of the methods. And if you want to define a static field for a class, you must do that outside the class body, after the class has been defined. Example 9-4 includes examples of both kinds of fields.</p>
<blockquote>
<p>åœ¨æ­¤å¤„å¯¹ä½¿ç”¨ class å…³é”®å­—å®šä¹‰çš„ç±»çš„è®¨è®ºä¸­ï¼Œæˆ‘ä»¬åªæè¿°äº†ç±»æ­£æ–‡ä¸­æ–¹æ³•çš„å®šä¹‰ã€‚ES6 æ ‡å‡†åªå…è®¸åˆ›å»ºæ–¹æ³•ï¼ˆåŒ…æ‹¬ getterã€setter å’Œç”Ÿæˆå™¨ï¼‰å’Œé™æ€æ–¹æ³•ï¼›å®ƒä¸åŒ…æ‹¬ç”¨äºå®šä¹‰å­—æ®µçš„è¯­æ³•ã€‚å¦‚æœè¦åœ¨ç±»å®ä¾‹ä¸Šå®šä¹‰å­—æ®µï¼ˆè¿™åªæ˜¯é¢å‘å¯¹è±¡ä¸­â€å±æ€§â€çš„åŒä¹‰è¯ï¼‰ï¼Œåˆ™å¿…é¡»åœ¨æ„é€ å‡½æ•°å‡½æ•°æˆ–å…¶ä¸­ä¸€ä¸ªæ–¹æ³•ä¸­è¿™æ ·åšã€‚å¿…é¡»åœ¨ç±»æ­£æ–‡ä¹‹å¤–ç±»å®šä¹‰åï¼Œæ‰èƒ½ä¸ºç±»å®šä¹‰é™æ€å­—æ®µã€‚ç¤ºä¾‹ 9-4 åŒ…æ‹¬è¿™å„ç§å­—æ®µçš„ç¤ºä¾‹ã€‚</p>
</blockquote>
<p>Standardization is underway, however, for extended class syntax that allows the definition of instance and static fields, in both public and private forms. The code shown in the rest of this section is not yet standard JavaScript as of early 2020 but is already supported in Chrome and partially supported (public instance fields only) in Firefox. The syntax for public instance fields is in common use by JavaScript programmers using the React framework and the Babel transpiler.</p>
<blockquote>
<p>ä½†æ˜¯ï¼Œå¯¹äºå…è®¸ä»¥å…¬æœ‰å’Œç§æœ‰å½¢å¼å®šä¹‰å®ä¾‹å’Œé™æ€å­—æ®µçš„æ‰©å±•ç±»è¯­æ³•æ­£åœ¨è¿›è¡Œæ ‡å‡†åŒ–ã€‚æœ¬èŠ‚å…¶ä½™éƒ¨åˆ†ä¸­æ˜¾ç¤ºçš„ä»£ç åœ¨ 2020 å¹´åˆè¿˜ä¸æ˜¯æ ‡å‡† JavaScriptï¼Œä½†åœ¨ Chrome ä¸­å·²ç»æ”¯æŒï¼Œå¹¶ä¸” Firefox ä¸­å·²éƒ¨åˆ†æ”¯æŒï¼ˆä»…ä½¿å…¬æœ‰å®ä¾‹å­—æ®µï¼‰ã€‚ä½¿ç”¨ React æ¡†æ¶å’Œ Babel ç¼–è¯‘å™¨çš„ JavaScript ç¨‹åºå‘˜å¸¸ç”¨å…¬æœ‰å®ä¾‹å­—æ®µçš„è¯­æ³•ã€‚</p>
</blockquote>
<p>Suppose youâ€™re writing a class like this one, with a constructor that initializes three fields:</p>
<blockquote>
<p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªè¿™æ ·çš„ç±»ï¼Œå…¶ä¸­ä¸€ä¸ªæ„é€ å‡½æ•°åˆå§‹åŒ–äº†ä¸‰ä¸ªå­—æ®µï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Buffer</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">size</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">capacity</span> = <span class="number">4096</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">buffer</span> = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="variable language_">this</span>.<span class="property">capacity</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>With the new instance field syntax that is likely to be standardized, you could instead write:</p>
<blockquote>
<p>ä½¿ç”¨å¯èƒ½æ ‡å‡†åŒ–çš„æ–°å®ä¾‹å­—æ®µè¯­æ³•ï¼Œå¯ä»¥è¿™æ ·ç¼–å†™ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Buffer</span> &#123;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">    capacity = <span class="number">4096</span>;</span><br><span class="line">    buffer = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="variable language_">this</span>.<span class="property">capacity</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The field initialization code has moved out of the constructor and now appears directly in the class body. (That code is still run as part of the constructor, of course. If you do not define a constructor, the fields are initialized as part of the implicitly created constructor.) The this. prefixes that appeared on the lefthand side of the assignments are gone, but note that you still must use this. to refer to these fields, even on the righthand side of the initializer assignments. The advantage of initializing your instance fields in this way is that this syntax allows (but does not require) you to put the initializers up at the top of the class definition, making it clear to readers exactly what fields will hold the state of each instance. You can declare fields without an initializer by just writing the name of the field followed by a semicolon. If you do that, the initial value of the field will be undefined. It is better style to always make the initial value explicit for all of your class fields.</p>
<blockquote>
<p>å­—æ®µåˆå§‹åŒ–ä»£ç å·²ç§»å‡ºæ„é€ å‡½æ•°ï¼Œç°åœ¨ç›´æ¥æ˜¾ç¤ºåœ¨ç±»æ­£æ–‡ä¸­ã€‚ï¼ˆå½“ç„¶ï¼Œè¯¥ä»£ç ä»ä½œä¸ºæ„é€ å‡½æ•°çš„ä¸€éƒ¨åˆ†è¿è¡Œã€‚å¦‚æœä¸å®šä¹‰æ„é€ å‡½æ•°ï¼Œåˆ™å­—æ®µåˆå§‹åŒ–ä¸ºéšå¼åˆ›å»ºçš„æ„é€ å‡½æ•°çš„ä¸€éƒ¨åˆ†ã€‚èµ‹å€¼å·¦ä¾§çš„ this. å‰ç¼€æ¶ˆå¤±ï¼Œä½†è¯·æ³¨æ„å³ä½¿æ˜¯åœ¨åˆå§‹åŒ–èµ‹å€¼çš„å³ä¾§ï¼Œä»å¿…é¡»ä½¿ç”¨ this. å‰ç¼€å¼•ç”¨è¿™äº›å­—æ®µã€‚è¿™ç§æ–¹å¼åˆå§‹åŒ–å®ä¾‹å­—æ®µçš„ä¼˜ç‚¹æ˜¯ï¼Œæ­¤è¯­æ³•å…è®¸ï¼ˆä½†ä¸éœ€è¦ï¼‰å°†åˆå§‹åŒ–æ”¾åœ¨ç±»å®šä¹‰çš„é¡¶éƒ¨ï¼Œä½¿è¯»è€…æ¸…æ¥šåœ°äº†è§£å­—æ®µåœ¨æ¯ä¸ªå®ä¾‹å°†ä¿å­˜çš„çŠ¶æ€ã€‚å¯ä»¥é€šè¿‡å­—æ®µååé¢è·Ÿä¸€ä¸ªåˆ†å·æ¥åªå£°æ˜ä¸åˆå§‹åŒ–ä¸€ä¸ªå­—æ®µã€‚å¦‚æœè¿™æ ·åšï¼Œå­—æ®µçš„åˆå§‹å€¼å°†æ˜¯ undefinedã€‚æ˜¾å¼è®¾å®šåˆå§‹åŒ–å­—æ®µçš„å€¼æ˜¯æ¯”è¾ƒå¥½çš„é£æ ¼ã€‚</p>
</blockquote>
<p>Before the addition of this field syntax, class bodies looked a lot like object literals using shortcut method syntax, except that the commas had been removed. This field syntaxâ€”with equals signs and semicolons instead of colons and commasâ€”makes it clear that class bodies are not at all the same as object literals.</p>
<blockquote>
<p>åœ¨æ·»åŠ å­—æ®µè¯­æ³•ä¹‹å‰ï¼Œç±»æ­£æ–‡çœ‹èµ·æ¥å¾ˆåƒä½¿ç”¨å¿«æ·æ–¹æ³•è¯­æ³•çš„å¯¹è±¡å­—é¢é‡ï¼Œåªä¸è¿‡é€—å·è¢«åˆ é™¤ã€‚å­—æ®µè¯­æ³•ï¼ˆä½¿ç”¨ç­‰å·å’Œåˆ†å·ä»£æ›¿å†’å·å’Œé€—å·ï¼‰æ¸…æ¥šåœ°è¡¨æ˜ç±»æ­£æ–‡ä¸å¯¹è±¡å­—é¢é‡ä¸å®Œå…¨ç›¸åŒã€‚</p>
</blockquote>
<p>The same proposal that seeks to standardize these instance fields also defines private instance fields. If you use the instance field initialization syntax shown in the previous example to define a field whose name begins with # (which is not normally a legal character in JavaScript identifiers), that field will be usable (with the # prefix) within the class body but will be invisible and inaccessible (and therefore immutable) to any code outside of the class body. If, for the preceding hypothetical Buffer class, you wanted to ensure that users of the class could not inadvertently modify the size field of an instance, you could use a private #size field instead, then define a getter function to provide read-only access to the value:</p>
<blockquote>
<p>æ ‡å‡†åŒ–ä¸­çš„å®ä¾‹å­—æ®µåŒæ—¶ä¹Ÿå®šä¹‰äº†ç§æœ‰å®ä¾‹å­—æ®µã€‚å¦‚æœä½¿ç”¨ä¸Šä¾‹ä¸­æ‰€ç¤ºçš„å®ä¾‹å­—æ®µåˆå§‹åŒ–è¯­æ³•æ¥å®šä¹‰å…¶åç§°ä»¥ # å¼€å¤´çš„å­—æ®µï¼ˆåœ¨ JavaScript æ ‡è¯†ç¬¦ä¸­é€šå¸¸ä¸æ˜¯åˆæ³•å­—ç¬¦ï¼‰ï¼Œåˆ™è¯¥å­—æ®µåœ¨ç±»æ­£æ–‡ä¸­å¯ç”¨ï¼ˆä½¿ç”¨ # å‰ç¼€ï¼‰ï¼Œä½†å¯¹ç±»æ­£æ–‡ä¹‹å¤–çš„ä»»ä½•ä»£ç ä¸å¯è§ä¸”ä¸å¯è®¿é—®ï¼ˆå› æ­¤ä¸å¯å˜ï¼‰ã€‚å¦‚æœå¯¹äºå‰é¢çš„ Buffer ç±»ï¼Œè¦ç¡®ä¿ç±»çš„ç”¨æˆ·ä¸ä¼šæ— æ„ä¸­ä¿®æ”¹å®ä¾‹çš„ size å­—æ®µï¼Œå¯ä»¥æ”¹ä¸ºä½¿ç”¨ç§æœ‰ #size å­—æ®µï¼Œç„¶åå®šä¹‰ getter å‡½æ•°ä»¥æä¾›å¯¹å€¼çš„åªè¯»è®¿é—®ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Buffer</span> &#123;</span><br><span class="line">    #size = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">size</span>() &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.#size; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note that private fields must be declared using this new field syntax before they can be used. You canâ€™t just write this.#size &#x3D; 0; in the constructor of a class unless you include a â€œdeclarationâ€ of the field directly in the class body.</p>
<blockquote>
<p>è¯·æ³¨æ„ï¼Œå¿…é¡»å…ˆä½¿ç”¨æ–°å­—æ®µè¯­æ³•å£°æ˜ç§æœ‰å­—æ®µï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚ä½ ä¸èƒ½åªåœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­å†™ <code>this.#size = 0;</code>ï¼Œé™¤éç›´æ¥åœ¨ç±»æ­£æ–‡ä¸­åŒ…å«å­—æ®µçš„â€å£°æ˜â€ã€‚</p>
</blockquote>
<p>Finally, a related proposal seeks to standardize the use of the static keyword for fields. If you add static before a public or private field declaration, those fields will be created as properties of the constructor function instead of properties of instances. Consider the static Range.parse() method weâ€™ve defined. It included a fairly complex regular expression that might be good to factor out into its own static field. With the proposed new static field syntax, we could do that like this:</p>
<blockquote>
<p>æœ€åï¼Œåœ¨æ ‡å‡†åŒ–è¿‡ç¨‹ä¸­ç›¸å…³å»ºè®®å­—æ®µä½¿ç”¨ static å…³é”®å­—ã€‚å¦‚æœåœ¨å…¬æœ‰æˆ–ç§æœ‰å­—æ®µå£°æ˜ä¹‹å‰æ·»åŠ é™æ€å­—æ®µï¼Œè¿™äº›å­—æ®µå°†åˆ›å»ºä¸ºæ„é€ å‡½æ•°çš„å±æ€§ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„å±æ€§ã€‚æ€è€ƒæˆ‘ä»¬å®šä¹‰çš„é™æ€ Range.parse() æ–¹æ³•ã€‚å®ƒåŒ…æ‹¬ä¸€ä¸ªç›¸å½“å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°†å…¶æ‹†åˆ†åˆ°å®ƒè‡ªæœ‰çš„é™æ€å­—æ®µä¸­å¯èƒ½ä¼šæ›´å¥½ã€‚ä½¿ç”¨å»ºè®®çš„æ–°é™æ€å­—æ®µè¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ç¼–å†™ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> integerRangePattern = <span class="regexp">/^\((\d+)\.\.\.(\d+)\)$/</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="title function_">parse</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> matches = s.<span class="title function_">match</span>(<span class="title class_">Range</span>.<span class="property">integerRangePattern</span>);</span><br><span class="line">    <span class="keyword">if</span> (!matches) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">`Cannot parse Range from &quot;<span class="subst">$&#123;s&#125;</span>&quot;.`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Range</span>(<span class="built_in">parseInt</span>(matches[<span class="number">1</span>]), matches[<span class="number">2</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If we wanted this static field to be accessible only within the class, we could make it private using a name like #pattern.</p>
<blockquote>
<p>å¦‚æœæˆ‘ä»¬å¸Œæœ›æ­¤é™æ€å­—æ®µåªèƒ½åœ¨ç±»ä¸­è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åƒ #pattern è¿™æ ·çš„åç§°å°†å…¶ç§æœ‰åŒ–ã€‚</p>
</blockquote>
<h3 id="9-3-4-Example-A-Complex-Number-Class"><a href="#9-3-4-Example-A-Complex-Number-Class" class="headerlink" title="9.3.4 Example: A Complex Number Class"></a>9.3.4 Example: A Complex Number Class</h3><p>Example 9-4 defines a class to represent complex numbers. The class is a relatively simple one, but it includes instance methods (including getters), static methods, instance fields, and static fields. It includes some commented-out code demonstrating how we might use the not-yet-standard syntax for defining instance fields and static fields within the class body.</p>
<blockquote>
<p>ç¤ºä¾‹ 9-4 å®šä¹‰äº†ä¸€ä¸ªè¡¨ç¤ºå¤æ•°çš„ç±»ã€‚è¯¥ç±»ç›¸å¯¹ç®€å•ï¼Œä½†å®ƒåŒ…æ‹¬å®ä¾‹æ–¹æ³•ï¼ˆåŒ…æ‹¬ gettersï¼‰ã€é™æ€æ–¹æ³•ã€å®ä¾‹å­—æ®µå’Œé™æ€å­—æ®µã€‚å®ƒåŒ…æ‹¬ä¸€äº›æ³¨é‡Šæ‰çš„ä»£ç ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å°šæœªåŠ å…¥æ ‡å‡†çš„è¯­æ³•å®šä¹‰ç±»æ­£æ–‡ä¸­çš„å®ä¾‹å­—æ®µå’Œé™æ€å­—æ®µã€‚</p>
</blockquote>
<p>Example 9-4. Complex.js: a complex number class</p>
<blockquote>
<p>ç¤ºä¾‹ 9-4ï¼šComplex.jsï¼šä¸€ä¸ªå¤æ•°ç±»</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Instances of this Complex class represent complex numbers.</span></span><br><span class="line"><span class="comment"> * Recall that a complex number is the sum of a real number and an</span></span><br><span class="line"><span class="comment"> * imaginary number and that the imaginary number i is the square root of -1.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Complex</span> &#123;</span><br><span class="line">    <span class="comment">// Once class field declarations are standardized, we could declare</span></span><br><span class="line">    <span class="comment">// private fields to hold the real and imaginary parts of a complex number</span></span><br><span class="line">    <span class="comment">// here, with code like this:</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// #r = 0;</span></span><br><span class="line">    <span class="comment">// #i = 0;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This constructor function defines the instance fields r and i on every</span></span><br><span class="line">    <span class="comment">// instance it creates. These fields hold the real and imaginary parts of</span></span><br><span class="line">    <span class="comment">// the complex number: they are the state of the object.</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">real, imaginary</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">r</span> = real;       <span class="comment">// This field holds the real part of the number.</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">i</span> = imaginary;  <span class="comment">// This field holds the imaginary part.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Here are two instance methods for addition and multiplication</span></span><br><span class="line">    <span class="comment">// of complex numbers. If c and d are instances of this class, we</span></span><br><span class="line">    <span class="comment">// might write c.plus(d) or d.times(c)</span></span><br><span class="line">    <span class="title function_">plus</span>(<span class="params">that</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Complex</span>(<span class="variable language_">this</span>.<span class="property">r</span> + that.<span class="property">r</span>, <span class="variable language_">this</span>.<span class="property">i</span> + that.<span class="property">i</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">times</span>(<span class="params">that</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Complex</span>(<span class="variable language_">this</span>.<span class="property">r</span> * that.<span class="property">r</span> - <span class="variable language_">this</span>.<span class="property">i</span> * that.<span class="property">i</span>,</span><br><span class="line">                           <span class="variable language_">this</span>.<span class="property">r</span> * that.<span class="property">i</span> + <span class="variable language_">this</span>.<span class="property">i</span> * that.<span class="property">r</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// And here are static variants of the complex arithmetic methods.</span></span><br><span class="line">    <span class="comment">// We could write Complex.sum(c,d) and Complex.product(c,d)</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">sum</span>(<span class="params">c, d</span>) &#123; <span class="keyword">return</span> c.<span class="title function_">plus</span>(d); &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">product</span>(<span class="params">c, d</span>) &#123; <span class="keyword">return</span> c.<span class="title function_">times</span>(d); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// These are some instance methods that are defined as getters</span></span><br><span class="line">    <span class="comment">// so they&#x27;re used like fields. The real and imaginary getters would</span></span><br><span class="line">    <span class="comment">// be useful if we were using private fields this.#r and this.#i</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">real</span>() &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">r</span>; &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">imaginary</span>() &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">i</span>; &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">magnitude</span>() &#123; <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">hypot</span>(<span class="variable language_">this</span>.<span class="property">r</span>, <span class="variable language_">this</span>.<span class="property">i</span>); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Classes should almost always have a toString() method</span></span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">`&#123;<span class="subst">$&#123;<span class="variable language_">this</span>.r&#125;</span>,<span class="subst">$&#123;<span class="variable language_">this</span>.i&#125;</span>&#125;`</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// It is often useful to define a method for testing whether</span></span><br><span class="line">    <span class="comment">// two instances of your class represent the same value</span></span><br><span class="line">    <span class="title function_">equals</span>(<span class="params">that</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> that <span class="keyword">instanceof</span> <span class="title class_">Complex</span> &amp;&amp;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">r</span> === that.<span class="property">r</span> &amp;&amp;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">i</span> === that.<span class="property">i</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Once static fields are supported inside class bodies, we could</span></span><br><span class="line">    <span class="comment">// define a useful Complex.ZERO constant like this:</span></span><br><span class="line">    <span class="comment">// static ZERO = new Complex(0,0);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Here are some class fields that hold useful predefined complex numbers.</span></span><br><span class="line"><span class="title class_">Complex</span>.<span class="property">ZERO</span> = <span class="keyword">new</span> <span class="title class_">Complex</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line"><span class="title class_">Complex</span>.<span class="property">ONE</span> = <span class="keyword">new</span> <span class="title class_">Complex</span>(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="title class_">Complex</span>.<span class="property">I</span> = <span class="keyword">new</span> <span class="title class_">Complex</span>(<span class="number">0</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>With the Complex class of Example 9-4 defined, we can use the constructor, instance fields, instance methods, class fields, and class methods with code like this:</p>
<blockquote>
<p>å®šä¹‰äº†ç¤ºä¾‹ 9-4 çš„ Complex ç±»åï¼Œæˆ‘ä»¬å¯ä»¥å°†æ„é€ å‡½æ•°ã€å®ä¾‹å­—æ®µã€å®ä¾‹æ–¹æ³•ã€ç±»å­—æ®µå’Œç±»æ–¹æ³•å¦‚ä¸‹ä½¿ç”¨ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> c = <span class="keyword">new</span> <span class="title class_">Complex</span>(<span class="number">2</span>, <span class="number">3</span>);     <span class="comment">// Create a new object with the constructor</span></span><br><span class="line"><span class="keyword">let</span> d = <span class="keyword">new</span> <span class="title class_">Complex</span>(c.<span class="property">i</span>, c.<span class="property">r</span>); <span class="comment">// Use instance fields of c</span></span><br><span class="line">c.<span class="title function_">plus</span>(d).<span class="title function_">toString</span>()           <span class="comment">// =&gt; &quot;&#123;5,5&#125;&quot;; use instance methods</span></span><br><span class="line">c.<span class="property">magnitude</span>                    <span class="comment">// =&gt; Math.hypot(2,3); use a getter function</span></span><br><span class="line"><span class="title class_">Complex</span>.<span class="title function_">product</span>(c, d)          <span class="comment">// =&gt; new Complex(0, 13); a static method</span></span><br><span class="line"><span class="title class_">Complex</span>.<span class="property">ZERO</span>.<span class="title function_">toString</span>()        <span class="comment">// =&gt; &quot;&#123;0,0&#125;&quot;; a static property</span></span><br></pre></td></tr></table></figure>
<h2 id="9-4-Adding-Methods-to-Existing-Classes"><a href="#9-4-Adding-Methods-to-Existing-Classes" class="headerlink" title="9.4 Adding Methods to Existing Classes"></a>9.4 Adding Methods to Existing Classes</h2><p>JavaScriptâ€™s prototype-based inheritance mechanism is dynamic: an object inherits properties from its prototype, even if the properties of the prototype change after the object is created. This means that we can augment JavaScript classes simply by adding new methods to their prototype objects.</p>
<blockquote>
<p>JavaScript åŸºäºåŸå‹çš„ç»§æ‰¿æœºåˆ¶æ˜¯åŠ¨æ€çš„ï¼šå¯¹è±¡ä»å…¶åŸå‹ç»§æ‰¿å±æ€§ï¼Œå³ä½¿åŸå‹çš„å±æ€§åœ¨åˆ›å»ºå¯¹è±¡åå‘ç”Ÿæ›´æ”¹ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬åªéœ€å‘åŸå‹å¯¹è±¡æ·»åŠ æ–°æ–¹æ³•ï¼Œå³å¯æ‰©å±• JavaScript ç±»ã€‚</p>
</blockquote>
<p>Here, for example, is code that adds a method for computing the complex conjugate to the Complex class of Example 9-4:</p>
<blockquote>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯å°†è®¡ç®—å…±è½­å¤æ•°çš„æ–¹æ³•æ·»åŠ åˆ°ç¤ºä¾‹ 9-4 çš„ Complex ç±»çš„ä»£ç ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Return a complex number that is the complex conjugate of this one.</span></span><br><span class="line"><span class="title class_">Complex</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">conj</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Complex</span>(<span class="variable language_">this</span>.<span class="property">r</span>, -<span class="variable language_">this</span>.<span class="property">i</span>); &#125;;</span><br></pre></td></tr></table></figure>

<p>The prototype object of built-in JavaScript classes is also open like this, which means that we can add methods to numbers, strings, arrays, functions, and so on. This is useful for implementing new language features in older versions of the language:</p>
<blockquote>
<p>JavaScript ç±»å†…ç½®çš„åŸå‹å¯¹è±¡ä¹Ÿæ˜¯è¿™æ ·å±•ç°çš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å‘æ•°å­—ã€å­—ç¬¦ä¸²ã€æ•°ç»„ã€å‡½æ•°ç­‰æ·»åŠ æ–¹æ³•ã€‚è¿™å¯¹äºåœ¨æ—§ç‰ˆæœ¬çš„è¯­è¨€ä¸­å®ç°æ–°ç‰¹æ€§éå¸¸æœ‰ç”¨ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// If the new String method startsWith() is not already defined...</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="title class_">String</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">startsWith</span>) &#123;</span><br><span class="line">    <span class="comment">// ...then define it like this using the older indexOf() method.</span></span><br><span class="line">    <span class="title class_">String</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">startsWith</span> = <span class="keyword">function</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">indexOf</span>(s) === <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Here is another example:</p>
<blockquote>
<p>è¿™æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Invoke the function f this many times, passing the iteration number</span></span><br><span class="line"><span class="comment">// For example, to print &quot;hello&quot; 3 times:</span></span><br><span class="line"><span class="comment">//     let n = 3;</span></span><br><span class="line"><span class="comment">//     n.times(i =&gt; &#123; console.log(`hello $&#123;i&#125;`); &#125;);</span></span><br><span class="line"><span class="title class_">Number</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">times</span> = <span class="keyword">function</span>(<span class="params">f, context</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> n = <span class="variable language_">this</span>.<span class="title function_">valueOf</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) f.<span class="title function_">call</span>(context, i);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Adding methods to the prototypes of built-in types like this is generally considered to be a bad idea because it will cause confusion and compatibility problems in the future if a new version of JavaScript defines a method with the same name. It is even possible to add methods to Object.prototype, making them available for all objects. But this is never a good thing to do because properties added to Object.prototype are visible to for&#x2F;in loops (though you can avoid this by using Object.defineProperty() [Â§14.1] to make the new property non-enumerable).</p>
<blockquote>
<p>å‘è¿™æ ·åœ¨å†…ç½®ç±»å‹çš„åŸå‹æ·»åŠ æ–¹æ³•é€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªåä¸»æ„ï¼Œå› ä¸ºå¦‚æœæ–°ç‰ˆæœ¬çš„ JavaScript å®šä¹‰å…·æœ‰ç›¸åŒåç§°çš„æ–¹æ³•ï¼Œå°†æ¥å°±ä¼šé€ æˆæ··æ·†å’Œå…¼å®¹æ€§é—®é¢˜ã€‚ç”šè‡³å¯ä»¥å‘ Object.prototype æ·»åŠ æ–¹æ³•ï¼Œä½¿å®ƒä»¬å¯ä½œç”¨äºæ‰€æœ‰å¯¹è±¡ã€‚ä½†è¿™ä»æ¥å°±ä¸æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œå› ä¸ºæ·»åŠ åˆ° Object.prototype çš„å±æ€§å¯¹ for&#x2F;in å¾ªç¯å¯è§ï¼ˆå°½ç®¡å¯ä»¥ä½¿ç”¨ Object.defineProperty()ï¼ˆÂ§14.1ï¼‰æ¥ä½¿æ–°å±æ€§ä¸å¯æšä¸¾æ¥é¿å…è¿™ç§æƒ…å†µï¼‰ã€‚</p>
</blockquote>
<h2 id="9-5-Subclasses"><a href="#9-5-Subclasses" class="headerlink" title="9.5 Subclasses"></a>9.5 Subclasses</h2><p>In object-oriented programming, a class B can extend or subclass another class A. We say that A is the superclass and B is the subclass. Instances of B inherit the methods of A. The class B can define its own methods, some of which may override methods of the same name defined by class A. If a method of B overrides a method of A, the overriding method in B often needs to invoke the overridden method in A. Similarly, the subclass constructor B() must typically invoke the superclass constructor A() in order to ensure that instances are completely initialized.</p>
<blockquote>
<p>åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼ŒB ç±»å¯ä»¥æ‰©å±• A ç±»æˆ–æˆä¸º A ç±»å­ç±»ã€‚æˆ‘ä»¬ç§° A æ˜¯çˆ¶ç±»ï¼ŒB æ˜¯å­ç±»ã€‚B çš„å®ä¾‹ç»§æ‰¿ A çš„æ–¹æ³•ã€‚B ç±»å¯ä»¥å®šä¹‰è‡ªæœ‰æ–¹æ³•ï¼Œä½¿ç”¨ç›¸åŒåç§°å¯ä»¥é‡å†™ç±» A ä¸­çš„æ–¹æ³•ã€‚å¦‚æœ B çš„æ–¹æ³•é‡å†™ A æ–¹æ³•ï¼Œåˆ™ B ä¸­çš„é‡å†™æ–¹æ³•é€šå¸¸éœ€è¦è°ƒç”¨ A ä¸­çš„é‡å†™æ–¹æ³•ã€‚åŒæ ·ï¼Œå­ç±»æ„é€ å‡½æ•° B() é€šå¸¸å¿…é¡»è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•° A()ï¼Œä»¥ç¡®ä¿å®ä¾‹å®Œå…¨åˆå§‹åŒ–ã€‚</p>
</blockquote>
<p>This section starts by showing how to define subclasses the old, pre-ES6 way, and then quickly moves on to demonstrate subclassing using the class and extends keywords and superclass constructor method invocation with the super keyword. Next is a subsection about avoiding subclasses and relying on object composition instead of inheritance. The section ends with an extended example that defines a hierarchy of Set classes and demonstrates how abstract classes can be used to separate interface from implementation.</p>
<blockquote>
<p>æœ¬èŠ‚é¦–å…ˆæ¼”ç¤º ES6 ä¹‹å‰å¦‚ä½•å®šä¹‰å­ç±»ï¼Œç„¶åæ¼”ç¤ºä½¿ç”¨ class å’Œ extends å…³é”®å­—çš„å­ç±»å’Œä½¿ç”¨ super å…³é”®å­—è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ã€‚å†æ¥ä¸‹æ¥ä¸€èŠ‚æ˜¯å…³äºé¿å…ä½¿ç”¨å­ç±»è€Œä¾é å¯¹è±¡ç»„åˆä»£æ›¿ç»§æ‰¿ã€‚æœ¬ç« æœ€åç»“æŸäºä¸€ä¸ªæ‰©å±•çš„ç¤ºä¾‹ï¼Œå®šä¹‰ Set ç±»çš„å±‚æ¬¡ç»“æ„å’Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨æŠ½è±¡ç±»å°†æ¥å£ä¸å®ç°åˆ†ç¦»ã€‚</p>
</blockquote>
<h3 id="9-5-1-Subclasses-and-Prototypes"><a href="#9-5-1-Subclasses-and-Prototypes" class="headerlink" title="9.5.1 Subclasses and Prototypes"></a>9.5.1 Subclasses and Prototypes</h3><p>Suppose we wanted to define a Span subclass of the Range class from Example 9-2. This subclass will work just like a Range, but instead of initializing it with a start and an end, weâ€™ll instead specify a start and a distance, or span. An instance of this Span class is also an instance of the Range superclass. A span instance inherits a customized toString() method from Span.prototype, but in order to be a subclass of Range, it must also inherit methods (such as includes()) from Range.prototype.</p>
<blockquote>
<p>å‡è®¾æˆ‘ä»¬æƒ³è¦ç»™ç¤ºä¾‹ 9-2 ä¸­ Range ç±»å®šä¹‰ Span å­ç±»ã€‚æ­¤å­ç±»çš„å·¥ä½œæ–¹å¼ä¸ Range ä¸€æ ·ï¼Œä½†æˆ‘ä»¬åˆå§‹åŒ–æ”¹ä¸ºæŒ‡å®šå¼€å§‹å’ŒèŒƒå›´ï¼Œè€Œä¸æ˜¯åˆ¶å®šå¼€å§‹å’Œç»“æŸã€‚Span ç±»çš„å®ä¾‹ä¹Ÿæ˜¯çˆ¶ç±» Range çš„å®ä¾‹ã€‚Span å®ä¾‹ä» Span.prototype ç»§æ‰¿è‡ªå®šä¹‰çš„ toString() æ–¹æ³•ï¼Œä½†ä¸ºäº†æˆä¸º Range çš„å­ç±»ï¼Œå®ƒè¿˜å¿…é¡»ä» Range.prototype ç»§æ‰¿æ–¹æ³•ï¼ˆå¦‚ includes()ï¼‰ã€‚</p>
</blockquote>
<p>Example 9-5. Span.js: a simple subclass of Range</p>
<blockquote>
<p>å®ä¾‹ 9-5ï¼šSpan.jsï¼šRange ä¸€ä¸ªç®€å•çš„å­ç±»</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is the constructor function for our subclass</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Span</span>(<span class="params">start, span</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (span &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">from</span> = start;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">to</span> = start + span;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">to</span> = start;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">from</span> = start + span;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ensure that the Span prototype inherits from the Range prototype</span></span><br><span class="line"><span class="title class_">Span</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// We don&#x27;t want to inherit Range.prototype.constructor, so we</span></span><br><span class="line"><span class="comment">// define our own constructor property.</span></span><br><span class="line"><span class="title class_">Span</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Span</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// By defining its own toString() method, Span overrides the</span></span><br><span class="line"><span class="comment">// toString() method that it would otherwise inherit from Range.</span></span><br><span class="line"><span class="title class_">Span</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="variable language_">this</span>.<span class="keyword">from</span>&#125;</span>... +<span class="subst">$&#123;<span class="variable language_">this</span>.to - <span class="variable language_">this</span>.<span class="keyword">from</span>&#125;</span>)`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>In order to make Span a subclass of Range, we need to arrange for Span.prototype to inherit from Range.prototype. The key line of code in the preceding example is this one, and if it makes sense to you, you understand how subclasses work in JavaScript:</p>
<blockquote>
<p>ä¸ºäº†ä½¿ Span æˆä¸º Range çš„å­ç±»ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ Span.prototype ä» Range.prototype ç»§æ‰¿ã€‚å‰é¢ç¤ºä¾‹ä¸­çš„å…³é”®ä»£ç è¡Œæ˜¯æ­¤ä»£ç è¡Œï¼Œå¦‚æœèƒ½ç†è§£å­ç±»ä½¿å¦‚ä½•å·¥ä½œçš„ï¼Œå®ƒæ˜¯éå¸¸æœ‰æ„ä¹‰çš„ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Span</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Range</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br></pre></td></tr></table></figure>

<p>Objects created with the Span() constructor will inherit from the Span.prototype object. But we created that object to inherit from Range.prototype, so Span objects will inherit from both Span.prototype and Range.prototype.</p>
<blockquote>
<p>ä½¿ç”¨ Span() æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡å°†ä» Span.prototype å¯¹è±¡ç»§æ‰¿ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åˆ›å»ºäº†è¯¥å¯¹è±¡å¹¶ç»§æ‰¿ Range.prototypeï¼Œå› æ­¤ Span å¯¹è±¡å°†åŒæ—¶ä» Span.prototype å’Œ Range.prototype ç»§æ‰¿ã€‚</p>
</blockquote>
<p>You may notice that our Span() constructor sets the same from and to properties that the Range() constructor does and so does not need to invoke the Range() constructor to initialize the new object. Similarly, Spanâ€™s toString() method completely re-implements the string conversion without needing to call Rangeâ€™s version of toString(). This makes Span a special case, and we can only really get away with this kind of subclassing because we know the implementation details of the superclass. A robust subclassing mechanism needs to allow classes to invoke the methods and constructor of their superclass, but prior to ES6, JavaScript did not have a simple way to do these things.</p>
<blockquote>
<p>å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„ Span() æ„é€ å‡½æ•°è®¾ç½®ä¸ Range() æ„é€ å‡½æ•°ç›¸åŒçš„ from å’Œ to å±æ€§ï¼Œå› æ­¤ä¸éœ€è¦è°ƒç”¨ Range() æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–æ–°å¯¹è±¡ã€‚åŒæ ·ï¼ŒSpan çš„ toString() æ–¹æ³•å®Œå…¨é‡æ–°å®ç°å­—ç¬¦ä¸²è½¬æ¢ï¼Œè€Œæ— éœ€è°ƒç”¨ Range ç‰ˆæœ¬çš„ toString()ã€‚è¿™ä½¿å¾— Span æˆä¸ºç‰¹ä¾‹ï¼Œæˆ‘ä»¬å¿…é¡»æ‘†è„±è¿™ç§å­ç±»ï¼Œå› ä¸ºè¿™ç§æƒ…å†µæ˜¯æˆ‘ä»¬çŸ¥é“çˆ¶ç±»çš„å®ç°ç»†èŠ‚ã€‚ä¸€ä¸ªå¥å£®çš„å­ç±»æœºåˆ¶éœ€è¦å…è®¸ç±»è°ƒç”¨å…¶çˆ¶ç±»çš„æ–¹æ³•å’Œæ„é€ å‡½æ•°ï¼Œä½†åœ¨ ES6 ä¹‹å‰ï¼ŒJavaScript æ²¡æœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ¥æ‰§è¡Œè¿™äº›æ“ä½œã€‚</p>
</blockquote>
<p>Fortunately, ES6 solves these problems with the super keyword as part of the class syntax. The next section demonstrates how it works.</p>
<blockquote>
<p>å¹¸è¿çš„æ˜¯ï¼ŒES6 ç”¨ super å…³é”®å­—ä½œä¸ºç±»è¯­æ³•ä¸€éƒ¨åˆ†è§£å†³äº†è¿™äº›é—®é¢˜ã€‚ä¸‹ä¸€èŠ‚æ¼”ç¤ºå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
</blockquote>
<h3 id="9-5-2-Subclasses-with-extends-and-super"><a href="#9-5-2-Subclasses-with-extends-and-super" class="headerlink" title="9.5.2 Subclasses with extends and super"></a>9.5.2 Subclasses with extends and super</h3><p>In ES6 and later, you can create a superclass simply by adding an extends clause to a class declaration, and you can do this even for built-in classes:</p>
<blockquote>
<p>åœ¨ ES6 ä¹‹åï¼Œå¯ä»¥ç®€å•çš„åœ¨ç±»å£°æ˜æ—¶æ¥ä¸€ä¸ª extends ä»å¥æ·»åŠ ä¸€ä¸ªçˆ¶ç±»ï¼Œå³ä½¿å¯¹äºå†…ç½®ç±»ä¹Ÿå¯ä»¥è¿™æ ·åšï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A trivial Array subclass that adds getters for the first and last elements.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EZArray</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Array</span> &#123;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">first</span>() &#123; <span class="keyword">return</span> <span class="variable language_">this</span>[<span class="number">0</span>]; &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">last</span>() &#123; <span class="keyword">return</span> <span class="variable language_">this</span>[<span class="variable language_">this</span>.<span class="property">length</span>-<span class="number">1</span>]; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="title class_">EZArray</span>();</span><br><span class="line">a <span class="keyword">instanceof</span> <span class="title class_">EZArray</span>  <span class="comment">// =&gt; true: a is subclass instance</span></span><br><span class="line">a <span class="keyword">instanceof</span> <span class="title class_">Array</span>    <span class="comment">// =&gt; true: a is also a superclass instance.</span></span><br><span class="line">a.<span class="title function_">push</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);      <span class="comment">// a.length == 4; we can use inherited methods</span></span><br><span class="line">a.<span class="title function_">pop</span>()               <span class="comment">// =&gt; 4: another inherited method</span></span><br><span class="line">a.<span class="property">first</span>               <span class="comment">// =&gt; 1: first getter defined by subclass</span></span><br><span class="line">a.<span class="property">last</span>                <span class="comment">// =&gt; 3: last getter defined by subclass</span></span><br><span class="line">a[<span class="number">1</span>]                  <span class="comment">// =&gt; 2: regular array access syntax still works.</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">isArray</span>(a)      <span class="comment">// =&gt; true: subclass instance really is an array</span></span><br><span class="line"><span class="title class_">EZArray</span>.<span class="title function_">isArray</span>(a)    <span class="comment">// =&gt; true: subclass inherits static methods, too!</span></span><br></pre></td></tr></table></figure>
<p>This EZArray subclass defines two simple getter methods. Instances of EZArray behave like ordinary arrays, and we can use inherited methods and properties like push(), pop(), and length. But we can also use the first and last getters defined in the subclass. Not only are instance methods like pop() inherited, but static methods like Array.isArray are also inherited. This is a new feature enabled by ES6 class syntax: EZArray() is a function, but it inherits from Array():</p>
<blockquote>
<p>EZArray å­ç±»å®šä¹‰äº†ä¸¤ä¸ªç®€å•çš„ getter æ–¹æ³•ã€‚EZArray å®ä¾‹çš„è¡Œä¸ºç±»ä¼¼äºæ™®é€šæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»§æ‰¿çš„æ–¹æ³•å’Œå±æ€§ï¼Œå¦‚ push()ã€pop() å’Œ lengthã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å­ç±»ä¸­å®šä¹‰çš„ first å’Œ last getter æ–¹æ³•ã€‚ä¸ä»…ç»§æ‰¿å®ä¾‹æ–¹æ³•å¦‚ pop() ï¼Œä¹Ÿç»§æ‰¿ Array.isArray ç­‰é™æ€æ–¹æ³•ã€‚è¿™æ˜¯ ES6 ç±»è¯­æ³•å¯ç”¨çš„æ–°ç‰¹æ€§ï¼šEZArray() æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†å®ƒä» Array() ç»§æ‰¿ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// EZArray inherits instance methods because EZArray.prototype</span></span><br><span class="line"><span class="comment">// inherits from Array.prototype</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(<span class="title class_">EZArray</span>.<span class="property"><span class="keyword">prototype</span></span>) <span class="comment">// =&gt; true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// And EZArray inherits static methods and properties because</span></span><br><span class="line"><span class="comment">// EZArray inherits from Array. This is a special feature of the</span></span><br><span class="line"><span class="comment">// extends keyword and is not possible before ES6.</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">isPrototypeOf</span>(<span class="title class_">EZArray</span>) <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>Our EZArray subclass is too simple to be very instructive. Example 9-6 is a more fully fleshed-out example. It defines a TypedMap subclass of the built-in Map class that adds type checking to ensure that the keys and values of the map are of the specified types (according to typeof). Importantly, this example demonstrates the use of the super keyword to invoke the constructor and methods of the superclass.</p>
<blockquote>
<p>EZArray å­ç±»å¤ªç®€å•äº†ï¼Œæ²¡æœ‰æ•™è‚²æ„ä¹‰ã€‚ç¤ºä¾‹ 9-6 æ˜¯ä¸€ä¸ªæ›´å……å®çš„ç¤ºä¾‹ã€‚å®ƒå®šä¹‰äº†å†…ç½® Map ç±»çš„ TypedMap å­ç±»ï¼Œè¯¥å­ç±»æ·»åŠ ç±»å‹æ£€æŸ¥ä»¥ç¡®ä¿æ˜ å°„çš„é”®å’Œå€¼æ˜¯æŒ‡å®šçš„ç±»å‹ï¼ˆæ ¹æ® typeofï¼‰ã€‚é‡è¦çš„æ˜¯ï¼Œæ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ä½¿ç”¨ super å…³é”®å­—æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°å’Œæ–¹æ³•ã€‚</p>
</blockquote>
<p>Example 9-6. TypedMap.js: a subclass of Map that checks key and value types</p>
<blockquote>
<p>ç¤ºä¾‹ 9-6ï¼šTypedMap.jsï¼šä¸€ä¸ªæ£€æµ‹ key å’Œ value ç±»å‹çš„ Map å­ç±»</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TypedMap</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Map</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">keyType, valueType, entries</span>) &#123;</span><br><span class="line">        <span class="comment">// If entries are specified, check their types</span></span><br><span class="line">        <span class="keyword">if</span> (entries) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> [k, v] <span class="keyword">of</span> entries) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> k !== keyType || <span class="keyword">typeof</span> v !== valueType) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">`Wrong type for entry [<span class="subst">$&#123;k&#125;</span>, <span class="subst">$&#123;v&#125;</span>]`</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Initialize the superclass with the (type-checked) initial entries</span></span><br><span class="line">        <span class="variable language_">super</span>(entries);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// And then initialize this subclass by storing the types</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">keyType</span> = keyType;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">valueType</span> = valueType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Now redefine the set() method to add type checking for any</span></span><br><span class="line">    <span class="comment">// new entries added to the map.</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">        <span class="comment">// Throw an error if the key or value are of the wrong type</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">keyType</span> &amp;&amp; <span class="keyword">typeof</span> key !== <span class="variable language_">this</span>.<span class="property">keyType</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span> is not of type <span class="subst">$&#123;<span class="variable language_">this</span>.keyType&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">valueType</span> &amp;&amp; <span class="keyword">typeof</span> value !== <span class="variable language_">this</span>.<span class="property">valueType</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">`<span class="subst">$&#123;value&#125;</span> is not of type <span class="subst">$&#123;<span class="variable language_">this</span>.valueType&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// If the types are correct, we invoke the superclass&#x27;s version of</span></span><br><span class="line">        <span class="comment">// the set() method, to actually add the entry to the map. And we</span></span><br><span class="line">        <span class="comment">// return whatever the superclass method returns.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">set</span>(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The first two arguments to the TypedMap() constructor are the desired key and value types. These should be strings, such as â€œnumberâ€ and â€œbooleanâ€, that the typeof operator returns. You can also specify a third argument: an array (or any iterable object) of [key,value] arrays that specify the initial entries in the map. If you specify any initial entries, then the first thing the constructor does is verify that their types are correct. Next, the constructor invokes the superclass constructor, using the super keyword as if it was a function name. The Map() constructor takes one optional argument: an iterable object of [key,value] arrays. So the optional third argument of the TypedMap() constructor is the optional first argument to the Map() constructor, and we pass it to that superclass constructor with super(entries).</p>
<blockquote>
<p>TypedMap() æ„é€ å‡½æ•°çš„å‰ä¸¤ä¸ªå®å‚æ˜¯æ‰€éœ€çš„é”®å’Œå€¼ç±»å‹ã€‚è¿™äº›å®å‚åº”è¯¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚â€numberâ€å’Œâ€booleanâ€ï¼Œè¿™äº›å­—ç¬¦ä¸²åº”è¯¥æ˜¯ typeof è¿ç®—ç¬¦çš„è¿”å›å€¼ã€‚è¿˜å¯ä»¥æŒ‡å®šç¬¬ä¸‰ä¸ªå®å‚ï¼šæŒ‡å®š map ä¸­åˆå§‹æ¡ç›®çš„ [key,value] æ•°ç»„ï¼ˆæˆ–ä»»ä½•å¯è¿­ä»£å¯¹è±¡ï¼‰ã€‚å¦‚æœæŒ‡å®šä»»ä½•åˆå§‹æ¡ç›®ï¼Œåˆ™æ„é€ å‡½æ•°è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯éªŒè¯å…¶ç±»å‹æ˜¯å¦æ­£ç¡®ã€‚æ¥ä¸‹æ¥ï¼Œæ„é€ å‡½æ•°è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œä½¿ç”¨ super å…³é”®å­—ï¼Œå°±åƒå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°åç§°ä¸€æ ·ã€‚Map() æ„é€ å‡½æ•°é‡‡ç”¨ä¸€ä¸ªå¯é€‰å®å‚ï¼šå¯è¿­ä»£å¯¹è±¡ [key,value] çš„æ•°ç»„ã€‚å› æ­¤ï¼ŒTypedMap() æ„é€ å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå¯é€‰å®å‚æ˜¯ Map() æ„é€ å‡½æ•°çš„ç¬¬ä¸€ä¸ªå¯é€‰å®å‚ï¼Œæˆ‘ä»¬ç”¨ <code>super(entries)</code> å°†å®ƒä¼ é€’ç»™çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚</p>
</blockquote>
<p>After invoking the superclass constructor to initialize superclass state, the TypedMap() constructor next initializes its own subclass state by setting this.keyType and this.valueType to the specified types. It needs to set these properties so that it can use them again in the set() method.</p>
<blockquote>
<p>è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°åˆå§‹åŒ–çˆ¶ç±»çŠ¶æ€åï¼Œæ¥ä¸‹æ¥ TypedMap() æ„é€ å‡½æ•°åˆå§‹åŒ–å…¶è‡ªå·±çš„å­ç±»çŠ¶æ€ this.keyType å’Œ this.valueTypeã€‚å®ƒéœ€è¦è®¾ç½®è¿™äº›å±æ€§ï¼Œä»¥ä¾¿å®ƒå¯ä»¥åœ¨ set() æ–¹æ³•ä¸­å†æ¬¡ä½¿ç”¨å®ƒä»¬ã€‚</p>
</blockquote>
<p>There are a few important rules that you will need to know about using super() in constructors:</p>
<blockquote>
<p>åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ super() éœ€è¦äº†è§£ä¸€äº›é‡è¦è§„åˆ™ï¼š</p>
</blockquote>
<p>If you define a class with the extends keyword, then the constructor for your class must use super() to invoke the superclass constructor.</p>
<blockquote>
<p>å¦‚æœä½¿ç”¨ extends å…³é”®å­—å®šä¹‰ç±»ï¼Œåˆ™ç±»çš„æ„é€ å‡½æ•°å¿…é¡»ä½¿ç”¨ super() è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ã€‚</p>
</blockquote>
<p>If you donâ€™t define a constructor in your subclass, one will be defined automatically for you. This implicitly defined constructor simply takes whatever values are passed to it and passes those values to super().</p>
<blockquote>
<p>å¦‚æœæœªåœ¨å­ç±»ä¸­å®šä¹‰æ„é€ å‡½æ•°ï¼Œå°†è‡ªåŠ¨ä¸ºä½ å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚æ­¤éšå¼å®šä¹‰çš„æ„é€ å‡½æ•°åªå°†ä¼ é€’ç»™å®ƒå€¼ä¼ é€’ç»™ super()ã€‚</p>
</blockquote>
<p>You may not use the this keyword in your constructor until after you have invoked the superclass constructor with super(). This enforces a rule that superclasses get to initialize themselves before subclasses do.</p>
<blockquote>
<p>åœ¨ä½¿ç”¨ super() è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¹‹å‰ï¼Œä¸èƒ½åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ this å…³é”®å­—ã€‚è¿™ä¸ªå¼ºåˆ¶è§„åˆ™ç¡®ä¿çˆ¶ç±»å…ˆäºå­ç±»åˆå§‹åŒ–ã€‚</p>
</blockquote>
<p>The special expression new.target is undefined in functions that are invoked without the new keyword. In constructor functions, however, new.target is a reference to the constructor that was invoked. When a subclass constructor is invoked and uses super() to invoke the superclass constructor, that superclass constructor will see the subclass constructor as the value of new.target. A well-designed superclass should not need to know whether it has been subclassed, but it might be useful to be able to use new.target.name in logging messages, for example.</p>
<blockquote>
<p>åœ¨æœªä½¿ç”¨ new å…³é”®å­—è°ƒç”¨çš„å‡½æ•°ä¸­ï¼Œnew.target è¡¨è¾¾å¼æ˜¯ undefinedã€‚ä½†æ˜¯ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œnew.target æ˜¯å¼•ç”¨è°ƒç”¨çš„æ„é€ å‡½æ•°ã€‚å½“è°ƒç”¨å­ç±»æ„é€ å‡½æ•°å¹¶ä½¿ç”¨ super() è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°æ—¶ï¼Œè¯¥çˆ¶ç±»æ„é€ å‡½æ•°å°†çœ‹åˆ°å­ç±»æ„é€ å‡½æ•°ä½œä¸º new.target çš„å€¼ã€‚è™½ç„¶è®¾è®¡è‰¯å¥½çš„çˆ¶ç±»ä¸éœ€è¦çŸ¥é“å®ƒæ˜¯å¦æœ‰å­ç±»ï¼Œä½†ï¼Œåœ¨æ—¥å¿—è®°å½•æ¶ˆæ¯çš„åœºæ™¯ä¸­ä½¿ç”¨ new.target.name ä¼šå¾ˆæœ‰ç”¨ã€‚</p>
</blockquote>
<p>After the constructor, the next part of Example 9-6 is a method named set(). The Map superclass defines a method named set() to add a new entry to the map. We say that this set() method in TypedMap overrides the set() method of its superclass. This simple TypedMap subclass doesnâ€™t know anything about adding new entries to map, but it does know how to check types, so that is what it does first, verifying that the key and value to be added to the map have the correct types and throwing an error if they do not. This set() method doesnâ€™t have any way to add the key and value to the map itself, but that is what the superclass set() method is for. So we use the super keyword again to invoke the superclassâ€™s version of the method. In this context, super works much like the this keyword does: it refers to the current object but allows access to overridden methods defined in the superclass.</p>
<blockquote>
<p>åœ¨æ„é€ å‡½æ•°ä¹‹åï¼Œç¤ºä¾‹ 9-6 çš„ä¸‹ä¸€éƒ¨åˆ†æ˜¯åä¸º set() çš„æ–¹æ³•ã€‚Map çˆ¶ç±»å®šä¹‰äº†åä¸º set() çš„æ–¹æ³•ï¼Œä»¥å‘ Map æ·»åŠ æ–°æ¡ç›®ã€‚TypedMap ä¸­çš„ set() æ–¹æ³•å°†é‡å†™å…¶çˆ¶ç±»çš„ set() æ–¹æ³•ã€‚è¿™ä¸ªç®€å•çš„ TypedMap å­ç±»å¯¹å‘ Map æ·»åŠ æ–°æ¡ç›®ä¸€æ— æ‰€çŸ¥ï¼Œä½†å®ƒçŸ¥é“å¦‚ä½•æ£€æŸ¥ç±»å‹ï¼Œå› æ­¤å®ƒé¦–å…ˆä¼šè¿™æ ·åšï¼ŒéªŒè¯è¦æ·»åŠ åˆ°åœ°å›¾ä¸­çš„é”®å’Œå€¼çš„ç±»å‹æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœå®ƒä»¬ä¸æ­£ç¡®åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚æ­¤ set() æ–¹æ³•æ— æ³•å°†é”®å’Œå€¼æ·»åŠ åˆ° Map æœ¬èº«ï¼Œä½†è¿™å°±æ˜¯çˆ¶ç±» set() æ–¹æ³•çš„ç”¨é€”ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å†æ¬¡ä½¿ç”¨ super å…³é”®å­—æ¥è°ƒç”¨çˆ¶ç±»ç‰ˆæœ¬çš„ set() æ–¹æ³•ã€‚åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­ï¼Œsuper çš„å·¥ä½œæ–¹å¼ä¸ this å…³é”®å­—çš„å·¥ä½œæ–¹å¼éå¸¸ç›¸ä¼¼ï¼šå®ƒå¼•ç”¨å½“å‰å¯¹è±¡ï¼Œä½†å…è®¸è®¿é—®åœ¨çˆ¶çº§ç±»ä¸­å®šä¹‰çš„è¢«é‡å†™æ–¹æ³•ã€‚</p>
</blockquote>
<p>In constructors, you are required to invoke the superclass constructor before you can access this and initialize the new object yourself. There are no such rules when you override a method. A method that overrides a superclass method is not required to invoke the superclass method. If it does use super to invoke the overridden method (or any method) in the superclass, it can do that at the beginning or the middle or the end of the overriding method.</p>
<blockquote>
<p>åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œéœ€è¦å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œç„¶åæ‰èƒ½è®¿é—® this å’Œåˆå§‹åŒ–æ–°å¯¹è±¡ã€‚ä½†é‡å†™æ–¹æ³•æ—¶æ²¡æœ‰æ­¤ç±»è§„åˆ™ã€‚è°ƒç”¨é‡å†™çˆ¶ç±»æ–¹æ³•æ—¶ä¸éœ€è¦è°ƒç”¨çˆ¶ç±»æ–¹æ³•ã€‚å¦‚æœå®ƒç¡®å®ä½¿ç”¨ super æ¥è°ƒç”¨çˆ¶ç±»ä¸­çš„é‡å†™æ–¹æ³•ï¼ˆæˆ–ä»»ä½•æ–¹æ³•ï¼‰ï¼Œå®ƒå¯ä»¥åœ¨é‡å†™æ–¹æ³•çš„å¼€å¤´ã€ä¸­é—´æˆ–æœ«å°¾è°ƒç”¨ã€‚</p>
</blockquote>
<p>Finally, before we leave the TypedMap example behind, it is worth noting that this class is an ideal candidate for the use of private fields. As the class is written now, a user could change the keyType or valueType properties to subvert the type checking. Once private fields are supported, we could change these properties to #keyType and #valueType so that they could not be altered from the outside.</p>
<blockquote>
<p>æœ€åï¼Œåœ¨å°† TypedMap ç¤ºä¾‹æŠ›åœ¨è„‘åä¹‹å‰ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ­¤ç±»æ˜¯ä½¿ç”¨ç§æœ‰å­—æ®µçš„ç†æƒ³åœºæ™¯ã€‚ç°åœ¨ç¼–å†™ç±»æ—¶ï¼Œç”¨æˆ·å¯ä»¥æ›´æ”¹ keyType æˆ– valueType å±æ€§ä»¥ç ´åç±»å‹æ£€æŸ¥ã€‚ä¸€æ—¦æ”¯æŒç§æœ‰å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å±æ€§æ”¹ä¸º #keyType å’Œ #valueTypeï¼Œä»¥ä¾¿å®ƒä»¬ä¸èƒ½ä»å¤–éƒ¨æ›´æ”¹ã€‚</p>
</blockquote>
<h3 id="9-5-3-Delegation-Instead-of-Inheritance"><a href="#9-5-3-Delegation-Instead-of-Inheritance" class="headerlink" title="9.5.3 Delegation Instead of Inheritance"></a>9.5.3 Delegation Instead of Inheritance</h3><p>The extends keyword makes it easy to create subclasses. But that does not mean that you should create lots of subclasses. If you want to write a class that shares the behavior of some other class, you can try to inherit that behavior by creating a subclass. But it is often easier and more flexible to get that desired behavior into your class by having your class create an instance of the other class and simply delegating to that instance as needed. You create a new class not by subclassing, but instead by wrapping or â€œcomposingâ€ other classes. This delegation approach is often called â€œcompositionâ€, and it is an oft-quoted maxim of object-oriented programming that one should â€œfavor composition over inheritance.â€2</p>
<blockquote>
<p>extends å…³é”®å­—ä¾¿äºåˆ›å»ºå­ç±»ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€åº”è¯¥åˆ›å»ºå¤§é‡çš„å­ç±»ã€‚å¦‚æœè¦ç¼–å†™æŸäº›å…¶ä»–ç±»å…±äº«çš„è¡Œä¸ºçš„ç±»ï¼Œå¯ä»¥å°è¯•é€šè¿‡åˆ›å»ºå­ç±»æ¥ç»§æ‰¿è¯¥è¡Œä¸ºã€‚ä½†æ˜¯ï¼Œé€šå¸¸å°†æœŸæœ›çš„è¡Œä¸ºç¼–å†™åœ¨ç±»ä¸­æ¯”ç”¨ç±»åˆ›å»ºå…¶ä»–ç±»çš„å®ä¾‹å¹¶æ ¹æ®éœ€è¦å§”æ‰˜ç»™è¯¥å®ä¾‹æ›´ç®€å•ä¹Ÿæ›´çµæ´»ã€‚åˆ›å»ºæ–°ç±»ä¸å°†å…¶ä½œä¸ºå­ç±»ï¼Œè€Œæ˜¯é€šè¿‡åŒ…è£…æˆ–â€ç»„åˆâ€å…¶ä»–ç±»ã€‚è¿™ç§å§”æ‰˜æ–¹æ³•é€šå¸¸ç§°ä¸ºâ€ç»„åˆâ€ï¼Œå®ƒæ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹ç»å¸¸è¢«å¼•ç”¨çš„åº§å³é“­â€å€¾å‘äºç»„åˆè€Œä¸æ˜¯ç»§æ‰¿â€ã€‚^2</p>
</blockquote>
<p>Suppose, for example, we wanted a Histogram class that behaves something like JavaScriptâ€™s Set class, except that instead of just keeping track of whether a value has been added to set or not, it instead maintains a count of the number of times the value has been added. Because the API for this Histogram class is similar to Set, we might consider subclassing Set and adding a count() method. On the other hand, once we start thinking about how we might implement this count() method, we might realize that the Histogram class is more like a Map than a Set because it needs to maintain a mapping between values and the number of times they have been added. So instead of subclassing Set, we can create a class that defines a Set-like API but implements those methods by delegating to an internal Map object. Example 9-7 shows how we could do this.</p>
<blockquote>
<p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªè¡Œä¸ºç±»ä¼¼äº JavaScript çš„ Set ç±»çš„ Histogram ç±»ï¼Œåªä¸è¿‡ï¼Œå®ƒä¸åªæ˜¯è·Ÿè¸ªæ˜¯å¦ç»™é›†åˆæ·»åŠ äº†å€¼ï¼Œè¿˜ç»´æŠ¤è¯¥å€¼æ·»åŠ æ¬¡æ•°çš„è®¡æ•°ã€‚ç”±äº Histogram ç±»çš„ API ä¸ Set ç±»ä¼¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘ Set å­ç±»å¹¶æ·»åŠ  count() æ–¹æ³•ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€æ—¦æˆ‘ä»¬å¼€å§‹è€ƒè™‘å¦‚ä½•å®ç° count() æ–¹æ³•ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ„è¯†åˆ° Histogram ç±»æ›´åƒæ˜¯ä¸€ä¸ª Map è€Œä¸æ˜¯ä¸€ä¸ª Setï¼Œå› ä¸ºå®ƒéœ€è¦ç»´æŠ¤å€¼ä¸æ·»åŠ å®ƒä»¬æ¬¡æ•°ä¹‹é—´çš„æ˜ å°„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»ï¼Œè¯¥ç±»å®šä¹‰ä¸€ä¸ªç±»ä¼¼ Set çš„ APIï¼Œä½†å§”æ‰˜å†…éƒ¨ Map å¯¹è±¡æ¥å®ç°è¿™äº›æ–¹æ³•ï¼Œè€Œä¸æ˜¯åˆ›å»º Set çš„å­ç±»ã€‚ç¤ºä¾‹ 9-7 æ˜¾ç¤ºäº†æˆ‘ä»¬å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
</blockquote>
<p>Example 9-7. Histogram.js: a Set-like class implemented with delegation</p>
<blockquote>
<p>ç¤ºä¾‹ 9-7ï¼šHistogram.jsï¼šä½¿ç”¨å§”æ‰˜å®ç°ä¸€ä¸ªç±»ä¼¼ Set çš„ç±»</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A Set-like class that keeps track of how many times a value has</span></span><br><span class="line"><span class="comment"> * been added. Call add() and remove() like you would for a Set, and</span></span><br><span class="line"><span class="comment"> * call count() to find out how many times a given value has been added.</span></span><br><span class="line"><span class="comment"> * The default iterator yields the values that have been added at least</span></span><br><span class="line"><span class="comment"> * once. Use entries() if you want to iterate [value, count] pairs.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Histogram</span> &#123;</span><br><span class="line">    <span class="comment">// To initialize, we just create a Map object to delegate to</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123; <span class="variable language_">this</span>.<span class="property">map</span> = <span class="keyword">new</span> <span class="title class_">Map</span>(); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// For any given key, the count is the value in the Map, or zero</span></span><br><span class="line">    <span class="comment">// if the key does not appear in the Map.</span></span><br><span class="line">    <span class="title function_">count</span>(<span class="params">key</span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">get</span>(key) || <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The Set-like method has() returns true if the count is non-zero</span></span><br><span class="line">    <span class="title function_">has</span>(<span class="params">key</span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">count</span>(key) &gt; <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The size of the histogram is just the number of entries in the Map.</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">size</span>() &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="property">size</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// To add a key, just increment its count in the Map.</span></span><br><span class="line">    <span class="title function_">add</span>(<span class="params">key</span>) &#123; <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">set</span>(key, <span class="variable language_">this</span>.<span class="title function_">count</span>(key) + <span class="number">1</span>); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Deleting a key is a little trickier because we have to delete</span></span><br><span class="line">    <span class="comment">// the key from the Map if the count goes back down to zero.</span></span><br><span class="line">    <span class="title function_">delete</span>(<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> count = <span class="variable language_">this</span>.<span class="title function_">count</span>(key);</span><br><span class="line">        <span class="keyword">if</span> (count === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">delete</span>(key);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (count &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">set</span>(key, count - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Iterating a Histogram just returns the keys stored in it</span></span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">keys</span>(); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// These other iterator methods just delegate to the Map object</span></span><br><span class="line">    <span class="title function_">keys</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">keys</span>(); &#125;</span><br><span class="line">    <span class="title function_">values</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">values</span>(); &#125;</span><br><span class="line">    <span class="title function_">entries</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">entries</span>(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>All the Histogram() constructor does in Example 9-7 is create a Map object. And most of the methods are one-liners that just delegate to a method of the map, making the implementation quite simple. Because we used delegation rather than inheritance, a Histogram object is not an instance of Set or Map. But Histogram implements a number of commonly used Set methods, and in an untyped language like JavaScript, that is often good enough: a formal inheritance relationship is sometimes nice, but often optional.</p>
<blockquote>
<p>åœ¨ç¤ºä¾‹ 9-7 ä¸­ï¼ŒHistogram() æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ª Map å¯¹è±¡ã€‚å¤§å¤šæ•°æ–¹æ³•éƒ½æ˜¯å•è¡Œï¼Œå®ƒä»¬åªæ˜¯å§”æ‰˜ç»™ Map çš„æ–¹æ³•ï¼Œä½¿å¾—å®ç°å˜å¾—éå¸¸ç®€å•ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨å§”æ‰˜è€Œä¸æ˜¯ç»§æ‰¿ï¼Œæ‰€ä»¥ Histogram å¯¹è±¡ä¸æ˜¯ Set æˆ– Map çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼ŒHistogram å®ç°äº†è®¸å¤šå¸¸ç”¨çš„ Set æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è¿‡å¤šçš„ä½¿ç”¨é¢å¤–çš„ JavaScriptï¼Œè¿™é€šå¸¸è¶³å¤Ÿå¥½ï¼šæœ‰æ¡ç†çš„ç»§æ‰¿å…³ç³»æœ‰æ—¶æ˜¯ä¸é”™ï¼Œä½†é€šå¸¸æ˜¯å¯é€‰çš„ã€‚</p>
</blockquote>
<h3 id="9-5-4-Class-Hierarchies-and-Abstract-Classes"><a href="#9-5-4-Class-Hierarchies-and-Abstract-Classes" class="headerlink" title="9.5.4 Class Hierarchies and Abstract Classes"></a>9.5.4 Class Hierarchies and Abstract Classes</h3><p>Example 9-6 demonstrated how we can subclass Map. Example 9-7 demonstrated how we can instead delegate to a Map object without actually subclassing anything. Using JavaScript classes to encapsulate data and modularize your code is often a great technique, and you may find yourself using the class keyword frequently. But you may find that you prefer composition to inheritance and that you rarely need to use extends (except when youâ€™re using a library or framework that requires you to extend its base classes).</p>
<blockquote>
<p>ç¤ºä¾‹ 9-6 æ¼”ç¤ºäº†å¦‚åˆ›å»º Map çš„å­ç±»ã€‚ç¤ºä¾‹ 9-7 æ¼”ç¤ºäº†å¦‚ä½•åœ¨ä¸åˆ›å»ºå­ç±»çš„æƒ…å†µä¸‹å°†å§”æ‰˜ç»™ Map å¯¹è±¡ã€‚ä½¿ç”¨ JavaScript ç±»å°è£…æ•°æ®å’Œæ¨¡å—åŒ–ä»£ç é€šå¸¸æ˜¯ä¸€ç§å¾ˆå¥½çš„æŠ€æœ¯ï¼Œä½ å¯èƒ½ä¼šå‘ç°è‡ªå·±ç»å¸¸ä½¿ç”¨ç±»å…³é”®å­—ã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½ä¼šå‘ç°ï¼Œä½ æ›´å–œæ¬¢ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ï¼Œè€Œä¸”å¾ˆå°‘éœ€è¦ä½¿ç”¨ extendsï¼ˆé™¤éä½¿ç”¨éœ€è¦æ‰©å±•çš„åº“æˆ–æ¡†æ¶ï¼‰ã€‚</p>
</blockquote>
<p>There are some circumstances when multiple levels of subclassing are appropriate, however, and weâ€™ll end this chapter with an extended example that demonstrates a hierarchy of classes representing different kinds of sets. (The set classes defined in Example 9-8 are similar to, but not completely compatible with, JavaScriptâ€™s built-in Set class.)</p>
<blockquote>
<p>ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¤šä¸ªçº§åˆ«çš„å­ç±»æ˜¯åˆé€‚çš„ï¼Œæˆ‘ä»¬å°†ä¸¾ä¸€ä¸ªæ‰©å±•ç¤ºä¾‹æ¥ç»“æŸæœ¬ç« ï¼Œé€šè¿‡æè¿°ä¸åŒç§ç±»çš„é›†åˆæ¥æ¼”ç¤ºç±»çš„å±‚æ¬¡ç»“æ„ã€‚ï¼ˆç¤ºä¾‹ 9-8 ä¸­å®šä¹‰çš„ç±»è·Ÿ JavaScript ä¸­çš„å†…ç½® Set ç±»å¾ˆç›¸ä¼¼ï¼Œä½†ä¸å®Œå…¨å…¼å®¹ã€‚ï¼‰</p>
</blockquote>
<p>Example 9-8 defines lots of subclasses, but it also demonstrates how you can define abstract classesâ€”classes that do not include a complete implementationâ€”to serve as a common superclass for a group of related subclasses. An abstract superclass can define a partial implementation that all subclasses inherit and share. The subclasses, then, only need to define their own unique behavior by implementing the abstract methods definedâ€”but not implementedâ€”by the superclass. Note that JavaScript does not have any formal definition of abstract methods or abstract classes; Iâ€™m simply using that name here for unimplemented methods and incompletely implemented classes.</p>
<blockquote>
<p>ç¤ºä¾‹ 9-8 å®šä¹‰äº†å¤§é‡å­ç±»ï¼Œä½†å®ƒä¹Ÿæ¼”ç¤ºäº†å¦‚ä½•å®šä¹‰æŠ½è±¡ç±»ï¼ˆä¸åŒ…æ‹¬å®Œæ•´å®ç°çš„ç±»ï¼‰ä½œä¸ºä¸€ç»„ç›¸å…³å­ç±»çš„é€šç”¨çˆ¶ç±»ã€‚æŠ½è±¡çˆ¶ç±»å¯ä»¥å®šä¹‰æ‰€æœ‰å­ç±»ç»§æ‰¿å’Œå…±äº«çš„éƒ¨åˆ†å®ç°ã€‚å› æ­¤ï¼Œå­ç±»åªéœ€è¦é€šè¿‡å®ç°çˆ¶ç±»å®šä¹‰çš„æŠ½è±¡æ–¹æ³•ï¼ˆæ²¡æœ‰å®ç°ï¼‰æ¥å®šä¹‰å®ƒä»¬è‡ªå·±çš„ç‹¬ç‰¹è¡Œä¸ºã€‚è¯·æ³¨æ„ï¼ŒJavaScript å¯¹æŠ½è±¡æ–¹æ³•æˆ–æŠ½è±¡ç±»æ²¡æœ‰ä»»ä½•æ­£å¼å®šä¹‰ï¼›æˆ‘åªæ˜¯å°†è¿™ä¸ªåå­—ç”¨äºæœªå®ç°çš„æ–¹æ³•å’Œä¸å®Œå…¨å®ç°çš„ç±»ã€‚</p>
</blockquote>
<p>Example 9-8 is well commented and stands on its own. I encourage you to read it as a capstone example for this chapter on classes. The final class in Example 9-8 does a lot of bit manipulation with the &amp;, |, and ~ operators, which you can review in Â§4.8.3.</p>
<blockquote>
<p>ç¤ºä¾‹ 9-8 è¯„è®ºè‰¯å¥½ï¼Œå¹¶ä¸”ç‹¬ç«‹ã€‚æˆ‘é¼“åŠ±ä½ æŠŠå®ƒä½œä¸ºæœ¬ç« å…³äºç±»çš„é¡¶çº§ç¤ºä¾‹ã€‚ç¤ºä¾‹ 9-8 ç”¨ &amp;ã€| å’Œ ~ è¿ç®—ç¬¦æ‰§è¡Œå¤§é‡ä½æ“ä½œï¼Œå¯ä»¥åœ¨ Â§4.8.3 ä¸­æŸ¥çœ‹è¿™äº›è¿ç®—ç¬¦ã€‚</p>
</blockquote>
<p>Example 9-8. Sets.js: a hierarchy of abstract and concrete set classes</p>
<blockquote>
<p>ç¤ºä¾‹ 9-8ï¼šSets.jsï¼šæŠ½è±¡ç±»å’Œå®ä½“ç±»çš„å±‚æ¬¡</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The AbstractSet class defines a single abstract method, has().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractSet</span> &#123;</span><br><span class="line">    <span class="comment">// Throw an error here so that subclasses are forced</span></span><br><span class="line">    <span class="comment">// to define their own working version of this method.</span></span><br><span class="line">    <span class="title function_">has</span>(<span class="params">x</span>) &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Abstract method&quot;</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * NotSet is a concrete subclass of AbstractSet.</span></span><br><span class="line"><span class="comment"> * The members of this set are all values that are not members of some</span></span><br><span class="line"><span class="comment"> * other set. Because it is defined in terms of another set it is not</span></span><br><span class="line"><span class="comment"> * writable, and because it has infinite members, it is not enumerable.</span></span><br><span class="line"><span class="comment"> * All we can do with it is test for membership and convert it to a</span></span><br><span class="line"><span class="comment"> * string using mathematical notation.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NotSet</span> <span class="keyword">extends</span> <span class="title class_ inherited__">AbstractSet</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">set</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">set</span> = set;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Our implementation of the abstract method we inherited</span></span><br><span class="line">    <span class="title function_">has</span>(<span class="params">x</span>) &#123; <span class="keyword">return</span> !<span class="variable language_">this</span>.<span class="property">set</span>.<span class="title function_">has</span>(x); &#125;</span><br><span class="line">    <span class="comment">// And we also override this Object method</span></span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">`&#123; x| x âˆ‰ <span class="subst">$&#123;<span class="variable language_">this</span>.set.toString()&#125;</span> &#125;`</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Range set is a concrete subclass of AbstractSet. Its members are</span></span><br><span class="line"><span class="comment"> * all values that are between the from and to bounds, inclusive.</span></span><br><span class="line"><span class="comment"> * Since its members can be floating point numbers, it is not</span></span><br><span class="line"><span class="comment"> * enumerable and does not have a meaningful size.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RangeSet</span> <span class="keyword">extends</span> <span class="title class_ inherited__">AbstractSet</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">from</span>, to</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">from</span> = <span class="keyword">from</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">to</span> = to;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">has</span>(<span class="params">x</span>) &#123; <span class="keyword">return</span> x &gt;= <span class="variable language_">this</span>.<span class="property">from</span> &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">to</span>; &#125;</span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">`&#123; x| <span class="subst">$&#123;<span class="variable language_">this</span>.<span class="keyword">from</span>&#125;</span> â‰¤ x â‰¤ <span class="subst">$&#123;<span class="variable language_">this</span>.to&#125;</span> &#125;`</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * AbstractEnumerableSet is an abstract subclass of AbstractSet.  It defines</span></span><br><span class="line"><span class="comment"> * an abstract getter that returns the size of the set and also defines an</span></span><br><span class="line"><span class="comment"> * abstract iterator. And it then implements concrete isEmpty(), toString(),</span></span><br><span class="line"><span class="comment"> * and equals() methods on top of those. Subclasses that implement the</span></span><br><span class="line"><span class="comment"> * iterator, the size getter, and the has() method get these concrete</span></span><br><span class="line"><span class="comment"> * methods for free.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractEnumerableSet</span> <span class="keyword">extends</span> <span class="title class_ inherited__">AbstractSet</span> &#123;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">size</span>() &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Abstract method&quot;</span>); &#125;</span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Abstract method&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">isEmpty</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">size</span> === <span class="number">0</span>; &#125;</span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">`&#123;<span class="subst">$&#123;<span class="built_in">Array</span>.<span class="keyword">from</span>(<span class="variable language_">this</span>).join(<span class="string">&quot;, &quot;</span>)&#125;</span>&#125;`</span>; &#125;</span><br><span class="line">    <span class="title function_">equals</span>(<span class="params">set</span>) &#123;</span><br><span class="line">        <span class="comment">// If the other set is not also Enumerable, it isn&#x27;t equal to this one</span></span><br><span class="line">        <span class="keyword">if</span> (!(set <span class="keyword">instanceof</span> <span class="title class_">AbstractEnumerableSet</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// If they don&#x27;t have the same size, they&#x27;re not equal</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">size</span> !== set.<span class="property">size</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Loop through the elements of this set</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> element <span class="keyword">of</span> <span class="variable language_">this</span>) &#123;</span><br><span class="line">            <span class="comment">// If an element isn&#x27;t in the other set, they aren&#x27;t equal</span></span><br><span class="line">            <span class="keyword">if</span> (!set.<span class="title function_">has</span>(element)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The elements matched, so the sets are equal</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * SingletonSet is a concrete subclass of AbstractEnumerableSet.</span></span><br><span class="line"><span class="comment"> * A singleton set is a read-only set with a single member.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SingletonSet</span> <span class="keyword">extends</span> <span class="title class_ inherited__">AbstractEnumerableSet</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">member</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">member</span> = member;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// We implement these three methods, and inherit isEmpty, equals()</span></span><br><span class="line">    <span class="comment">// and toString() implementations based on these methods.</span></span><br><span class="line">    <span class="title function_">has</span>(<span class="params">x</span>) &#123; <span class="keyword">return</span> x === <span class="variable language_">this</span>.<span class="property">member</span>; &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">size</span>() &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">    *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123; <span class="keyword">yield</span> <span class="variable language_">this</span>.<span class="property">member</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * AbstractWritableSet is an abstract subclass of AbstractEnumerableSet.</span></span><br><span class="line"><span class="comment"> * It defines the abstract methods insert() and remove() that insert and</span></span><br><span class="line"><span class="comment"> * remove individual elements from the set, and then implements concrete</span></span><br><span class="line"><span class="comment"> * add(), subtract(), and intersect() methods on top of those. Note that</span></span><br><span class="line"><span class="comment"> * our API diverges here from the standard JavaScript Set class.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractWritableSet</span> <span class="keyword">extends</span>  <span class="title class_ inherited__">AbstractEnumerableSet</span> &#123;</span><br><span class="line">    <span class="title function_">insert</span>(<span class="params">x</span>) &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Abstract method&quot;</span>); &#125;</span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">x</span>) &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Abstract method&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">add</span>(<span class="params">set</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> element <span class="keyword">of</span> set) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">insert</span>(element);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">subtract</span>(<span class="params">set</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> element <span class="keyword">of</span> set) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">remove</span>(element);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">intersect</span>(<span class="params">set</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> element <span class="keyword">of</span> <span class="variable language_">this</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!set.<span class="title function_">has</span>(element)) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">remove</span>(element);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A BitSet is a concrete subclass of AbstractWritableSet with a</span></span><br><span class="line"><span class="comment"> * very efficient fixed-size set implementation for sets whose</span></span><br><span class="line"><span class="comment"> * elements are non-negative integers less than some maximum size.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BitSet</span> <span class="keyword">extends</span> <span class="title class_ inherited__">AbstractWritableSet</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">max</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">max</span> = max;  <span class="comment">// The maximum integer we can store.</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">n</span> = <span class="number">0</span>;      <span class="comment">// How many integers are in the set</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">numBytes</span> = <span class="title class_">Math</span>.<span class="title function_">floor</span>(max / <span class="number">8</span>) + <span class="number">1</span>;   <span class="comment">// How many bytes we need</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">data</span> = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(<span class="variable language_">this</span>.<span class="property">numBytes</span>); <span class="comment">// The bytes</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Internal method to check if a value is a legal member of this set</span></span><br><span class="line">    <span class="title function_">_valid</span>(<span class="params">x</span>) &#123; <span class="keyword">return</span> <span class="title class_">Number</span>.<span class="title function_">isInteger</span>(x) &amp;&amp; x &gt;= <span class="number">0</span> &amp;&amp; x &lt;= <span class="variable language_">this</span>.<span class="property">max</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Tests whether the specified bit of the specified byte of our</span></span><br><span class="line">    <span class="comment">// data array is set or not. Returns true or false.</span></span><br><span class="line">    <span class="title function_">_has</span>(<span class="params">byte, bit</span>) &#123; <span class="keyword">return</span> (<span class="variable language_">this</span>.<span class="property">data</span>[byte] &amp; <span class="title class_">BitSet</span>.<span class="property">bits</span>[bit]) !== <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Is the value x in this BitSet?</span></span><br><span class="line">    <span class="title function_">has</span>(<span class="params">x</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">_valid</span>(x)) &#123;</span><br><span class="line">            <span class="keyword">let</span> byte = <span class="title class_">Math</span>.<span class="title function_">floor</span>(x / <span class="number">8</span>);</span><br><span class="line">            <span class="keyword">let</span> bit = x % <span class="number">8</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">_has</span>(byte, bit);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Insert the value x into the BitSet</span></span><br><span class="line">    <span class="title function_">insert</span>(<span class="params">x</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">_valid</span>(x)) &#123;               <span class="comment">// If the value is valid</span></span><br><span class="line">            <span class="keyword">let</span> byte = <span class="title class_">Math</span>.<span class="title function_">floor</span>(x / <span class="number">8</span>);   <span class="comment">// convert to byte and bit</span></span><br><span class="line">            <span class="keyword">let</span> bit = x % <span class="number">8</span>;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">_has</span>(byte, bit)) &#123;    <span class="comment">// If that bit is not set yet</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">data</span>[byte] |= <span class="title class_">BitSet</span>.<span class="property">bits</span>[bit]; <span class="comment">// then set it</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">n</span>++;                            <span class="comment">// and increment set size</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&quot;Invalid set element: &quot;</span> + x );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">x</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">_valid</span>(x)) &#123;              <span class="comment">// If the value is valid</span></span><br><span class="line">            <span class="keyword">let</span> byte = <span class="title class_">Math</span>.<span class="title function_">floor</span>(x / <span class="number">8</span>);  <span class="comment">// compute the byte and bit</span></span><br><span class="line">            <span class="keyword">let</span> bit = x % <span class="number">8</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">_has</span>(byte, bit)) &#123;    <span class="comment">// If that bit is already set</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">data</span>[byte] &amp;= <span class="title class_">BitSet</span>.<span class="property">masks</span>[bit];  <span class="comment">// then unset it</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">n</span>--;                              <span class="comment">// and decrement size</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&quot;Invalid set element: &quot;</span> + x );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A getter to return the size of the set</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">size</span>() &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">n</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Iterate the set by just checking each bit in turn.</span></span><br><span class="line">    <span class="comment">// (We could be a lot more clever and optimize this substantially)</span></span><br><span class="line">    *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= <span class="variable language_">this</span>.<span class="property">max</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">has</span>(i)) &#123;</span><br><span class="line">                <span class="keyword">yield</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Some pre-computed values used by the has(), insert() and remove() methods</span></span><br><span class="line"><span class="title class_">BitSet</span>.<span class="property">bits</span> = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>]);</span><br><span class="line"><span class="title class_">BitSet</span>.<span class="property">masks</span> = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>([~<span class="number">1</span>, ~<span class="number">2</span>, ~<span class="number">4</span>, ~<span class="number">8</span>, ~<span class="number">16</span>, ~<span class="number">32</span>, ~<span class="number">64</span>, ~<span class="number">128</span>]);</span><br></pre></td></tr></table></figure>
<h2 id="9-6-Summary"><a href="#9-6-Summary" class="headerlink" title="9.6 Summary"></a>9.6 Summary</h2><p>This chapter has explained the key features of JavaScript classes:</p>
<blockquote>
<p>æœ¬ç« è¯´æ˜äº† JavaScript ç±»çš„ä¸»è¦åŠŸèƒ½ï¼š</p>
</blockquote>
<p>Objects that are members of the same class inherit properties from the same prototype object. The prototype object is the key feature of JavaScript classes, and it is possible to define classes with nothing more than the Object.create() method.</p>
<blockquote>
<p>åŒä¸€ç±»çš„æˆå‘˜å¯¹è±¡ä»åŒä¸€åŸå‹å¯¹è±¡ç»§æ‰¿å±æ€§ã€‚åŸå‹å¯¹è±¡æ˜¯ JavaScript ç±»çš„å…³é”®ç‰¹æ€§ï¼Œåªæœ‰ Object.create() æ–¹æ³•å¯ä»¥å®šä¹‰ç±»ã€‚</p>
</blockquote>
<p>Prior to ES6, classes were more typically defined by first defining a constructor function. Functions created with the function keyword have a prototype property, and the value of this property is an object that is used as the prototype of all objects created when the function is invoked with new as a constructor. By initializing this prototype object, you can define the shared methods of your class. Although the prototype object is the key feature of the class, the constructor function is the public identity of the class.</p>
<blockquote>
<p>åœ¨ ES6 ä¹‹å‰ï¼Œå…¸å‹çš„ç±»å®šä¹‰å…ˆå®šä¹‰æ„é€ å‡½æ•°ã€‚ä½¿ç”¨ function å…³é”®å­—åˆ›å»ºçš„å‡½æ•°å…·æœ‰åŸå‹å±æ€§ï¼Œthis å±æ€§çš„å€¼æ˜¯ä½¿ç”¨ new å°†å‡½æ•°ç”¨ä½œæ„é€ å‡½æ•°è°ƒç”¨æ—¶åˆ›å»ºçš„å¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚é€šè¿‡åˆå§‹åŒ–æ­¤åŸå‹å¯¹è±¡ï¼Œå¯ä»¥å®šä¹‰ç±»çš„å…±äº«æ–¹æ³•ã€‚è™½ç„¶åŸå‹å¯¹è±¡æ˜¯ç±»çš„å…³é”®ç‰¹æ€§ï¼Œä½†æ„é€ å‡½æ•°æ˜¯ç±»çš„å…¬å…±æ ‡è¯†ã€‚</p>
</blockquote>
<p>ES6 introduces a class keyword that makes it easier to define classes, but under the hood, constructor and prototype mechanism remains the same.</p>
<blockquote>
<p>ES6 å¼•å…¥äº†ä¸€ä¸ª class å…³é”®å­—ï¼Œå®ƒä½¿å®šä¹‰ç±»æ›´åŠ å®¹æ˜“ï¼Œä½†å®ƒåªæ˜¯ä¸ªè¯­æ³•ç³–ï¼Œæ„é€ å‡½æ•°å’ŒåŸå‹æœºåˆ¶ä¿æŒä¸å˜ã€‚</p>
</blockquote>
<p>Subclasses are defined using the extends keyword in a class declaration.</p>
<blockquote>
<p>å­ç±»ä½¿ç”¨ç±»å£°æ˜ä¸­çš„ extends å…³é”®å­—å®šä¹‰ã€‚</p>
</blockquote>
<p>Subclasses can invoke the constructor of their superclass or overridden methods of their superclass with the super keyword.</p>
<blockquote>
<p>å­ç±»å¯ä»¥ä½¿ç”¨ super å…³é”®å­—è°ƒç”¨å…¶çˆ¶ç±»çš„æ„é€ å‡½æ•°æˆ–çˆ¶ç±»çš„é‡å†™æ–¹æ³•ã€‚</p>
</blockquote>
<hr>
<ol>
<li><p>Except functions returned by the ES5 Function.bind() method. Bound functions have no prototype property of their own, but they use the prototype of the underlying function if they are invoked as constructors.</p>
</li>
<li><p>See Design Patterns (Addison-Wesley Professional) by Erich Gamma et al. or Effective Java (Addison-Wesley Professional) by Joshua Bloch, for example.</p>
</li>
</ol>
<blockquote>
<ol>
<li>é™¤äº† ES5 Function.bind() æ–¹æ³•è¿”å›çš„å‡½æ•°ã€‚ç»‘å®šå‡½æ•°æ²¡æœ‰è‡ªå·±çš„åŸå‹å±æ€§ï¼Œä½†å¦‚æœå®ƒä»¬ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼Œåˆ™å®ƒä»¬ä½¿ç”¨åŸºç¡€å‡½æ•°çš„åŸå‹ã€‚</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>ä¾‹å¦‚ï¼Œè§ã€ŠDesign Patterns (Addison-Wesley Professional)ã€‹ä½œè€… Erich Gamma ç­‰ï¼Œæˆ–è€…ã€ŠEffective Java (Addison-Wesley Professional)ã€‹ä½œè€… Joshua Blochã€‚</li>
</ol>
</blockquote>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="å¤´åƒ"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img02.anzhiy.cn/adminuploads/1/2022/09/15/63232b7d91d22.jpg" title="å¤´åƒ" alt="å¤´åƒ"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img02.anzhiy.cn/adminuploads/1/2022/09/15/63232b7d91d22.jpg" title="å¤´åƒ" alt="å¤´åƒ"></a><div class="post-copyright__author_name">Jack hou</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®" href="http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch9/">åŸåˆ›</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch9/')">ç¬¬9ç«  ç±»</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="èµèµä½œè€…"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>æ‰“èµä½œè€…</div><div class="reward-main"><div class="reward-all"><span class="reward-title">æ„Ÿè°¢ä½ èµäºˆæˆ‘å‰è¿›çš„åŠ›é‡</span><ul class="reward-group"><li class="reward-item"><a href="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">èµèµè€…åå•</div><div class="reward-dec">å› ä¸ºä½ ä»¬çš„æ”¯æŒè®©æˆ‘æ„è¯†åˆ°å†™æ–‡ç« çš„ä»·å€¼ğŸ™</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/" data-pjax-state=""><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>è¿è¥æ¨¡å¼ä¸è´£ä»»</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch9/"></div><div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=ç¬¬9ç«  ç±»&amp;url=http://www.houyanbin.com/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch9/&amp;pic=https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="å¤åˆ¶é“¾æ¥" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://www.houyanbin.com" target="_blank">Jackhou Blog</a>ï¼</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹<span class="tagsPageCount">17</span></a><a class="post-meta__box__tags" href="/tags/JavaScript/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JavaScript<span class="tagsPageCount">17</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover6.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch10/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover10.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ç¬¬10ç«  æ¨¡å—</div></div></a></div><div class="next-post pull-right"><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch8/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover8.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ç¬¬8ç«  å‡½æ•°</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch1/" title="ç¬¬1ç«  JavaScript æ¦‚è¿°"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬1ç«  JavaScript æ¦‚è¿°</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch10/" title="ç¬¬10ç«  æ¨¡å—"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover10.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬10ç«  æ¨¡å—</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch12/" title="ç¬¬12ç«  è¿­ä»£å™¨å’Œç”Ÿæˆå™¨"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬12ç«  è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch14/" title="ç¬¬14ç«  å…ƒç¼–ç¨‹"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬14ç«  å…ƒç¼–ç¨‹</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch13/" title="ç¬¬13ç«  å¼‚æ­¥ JavaScript"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover3.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬13ç«  å¼‚æ­¥ JavaScript</div></div></a></div><div><a href="/2023/04/26/Books/%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B/ch16/" title="ç¬¬16ç«  æœåŠ¡å™¨ç«¯ JavaScript"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-26</div><div class="title">ç¬¬16ç«  æœåŠ¡å™¨ç«¯ JavaScript</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> è¯„è®º</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">åŒ¿åè¯„è®º</a></div><div class="comment-tips" id="comment-tips"><span>âœ… ä½ æ— éœ€åˆ é™¤ç©ºè¡Œï¼Œç›´æ¥è¯„è®ºä»¥è·å–æœ€ä½³å±•ç¤ºæ•ˆæœ</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-top" title="ç‚¹å‡»å±•å¼€"><div class="card-info-avatar"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img02.anzhiy.cn/adminuploads/1/2022/09/15/63232b7d91d22.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">Hiï¼Œè¿™æ˜¯æˆ‘çš„åšå®¢ç½‘ç«™ï¼Œæ¬¢è¿ä½ èƒ½åˆ°è®¿~</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">æˆ‘ä¼šåœ¨è¿™é‡Œåˆ†äº«æˆ‘çš„<b style="color:#fff">æŠ€æœ¯çŸ¥è¯†</b>ã€<b style="color:#fff">æ—¥å¸¸ç”Ÿæ´»</b>å’Œ<b style="color:#fff">äººç”Ÿç»éªŒã€‚</b></div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Jack hou</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Hou-yanbin" target="_blank" title="Github"><i class="fab fa-github faa-tada"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/478589474" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili faa-tada"></i></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=jackhou921@qq.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/index/wxgzh1.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>æ–‡ç« ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-Classes-and-Prototypes"><span class="toc-text">9.1 Classes and Prototypes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-Classes-and-Constructors"><span class="toc-text">9.2 Classes and Constructors</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-1-Constructors-Class-Identity-and-instanceof"><span class="toc-text">9.2.1 Constructors, Class Identity, and instanceof</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-2-The-constructor-Property"><span class="toc-text">9.2.2 The constructor Property</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-Classes-with-the-class-Keyword"><span class="toc-text">9.3 Classes with the class Keyword</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-1-Static-Methods"><span class="toc-text">9.3.1 Static Methods</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-2-Getters-Setters-and-other-Method-Forms"><span class="toc-text">9.3.2 Getters, Setters, and other Method Forms</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-3-Public-Private-and-Static-Fields"><span class="toc-text">9.3.3 Public, Private, and Static Fields</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-4-Example-A-Complex-Number-Class"><span class="toc-text">9.3.4 Example: A Complex Number Class</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-Adding-Methods-to-Existing-Classes"><span class="toc-text">9.4 Adding Methods to Existing Classes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-5-Subclasses"><span class="toc-text">9.5 Subclasses</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-1-Subclasses-and-Prototypes"><span class="toc-text">9.5.1 Subclasses and Prototypes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-2-Subclasses-with-extends-and-super"><span class="toc-text">9.5.2 Subclasses with extends and super</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-3-Delegation-Instead-of-Inheritance"><span class="toc-text">9.5.3 Delegation Instead of Inheritance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-4-Class-Hierarchies-and-Abstract-Classes"><span class="toc-text">9.5.4 Class Hierarchies and Abstract Classes</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-6-Summary"><span class="toc-text">9.6 Summary</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/07/30/%E5%8C%BF%E5%90%8D/%E4%B8%8D%E7%88%B1%E6%80%8E%E4%B9%88%E8%B5%B0%E4%B8%8B%E5%8E%BB/" title="ä¸çˆ±å‰è¡Œ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ä¸çˆ±å‰è¡Œ"/></a><div class="content"><a class="title" href="/2023/07/30/%E5%8C%BF%E5%90%8D/%E4%B8%8D%E7%88%B1%E6%80%8E%E4%B9%88%E8%B5%B0%E4%B8%8B%E5%8E%BB/" title="ä¸çˆ±å‰è¡Œ">ä¸çˆ±å‰è¡Œ</a><time datetime="2023-07-29T16:00:00.000Z" title="å‘è¡¨äº 2023-07-30 00:00:00">2023-07-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/22/%E5%8C%BF%E5%90%8D/%E7%A7%9F%E6%88%BF%E6%97%B6%E5%85%89/" title="ç§Ÿæˆ¿æ—¶å…‰"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ç§Ÿæˆ¿æ—¶å…‰"/></a><div class="content"><a class="title" href="/2023/07/22/%E5%8C%BF%E5%90%8D/%E7%A7%9F%E6%88%BF%E6%97%B6%E5%85%89/" title="ç§Ÿæˆ¿æ—¶å…‰">ç§Ÿæˆ¿æ—¶å…‰</a><time datetime="2023-07-21T16:00:00.000Z" title="å‘è¡¨äº 2023-07-22 00:00:00">2023-07-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/11/%E6%97%85%E8%A1%8C/%E6%95%85%E5%AE%AB%E8%AE%B0/" title="æ•…å®«è®°"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="æ•…å®«è®°"/></a><div class="content"><a class="title" href="/2023/06/11/%E6%97%85%E8%A1%8C/%E6%95%85%E5%AE%AB%E8%AE%B0/" title="æ•…å®«è®°">æ•…å®«è®°</a><time datetime="2023-06-10T16:00:00.000Z" title="å‘è¡¨äº 2023-06-11 00:00:00">2023-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/29/%E5%AE%89%E5%85%A8/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E9%81%93%E9%81%93%E4%B9%8B%E5%A4%96%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" title="ä¿¡æ¯æ”¶é›†é“é“ä¹‹å¤–ç½‘ä¿¡æ¯æ”¶é›†"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ä¿¡æ¯æ”¶é›†é“é“ä¹‹å¤–ç½‘ä¿¡æ¯æ”¶é›†"/></a><div class="content"><a class="title" href="/2023/05/29/%E5%AE%89%E5%85%A8/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E9%81%93%E9%81%93%E4%B9%8B%E5%A4%96%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" title="ä¿¡æ¯æ”¶é›†é“é“ä¹‹å¤–ç½‘ä¿¡æ¯æ”¶é›†">ä¿¡æ¯æ”¶é›†é“é“ä¹‹å¤–ç½‘ä¿¡æ¯æ”¶é›†</a><time datetime="2023-05-28T16:00:00.000Z" title="å‘è¡¨äº 2023-05-29 00:00:00">2023-05-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/24/%E5%AE%89%E5%85%A8/sqlmap%E4%BD%BF%E7%94%A8/" title="Sqlmapä½¿ç”¨"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagesblog.oss-cn-hangzhou.aliyuncs.com/themes/post/default_cover6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sqlmapä½¿ç”¨"/></a><div class="content"><a class="title" href="/2023/05/24/%E5%AE%89%E5%85%A8/sqlmap%E4%BD%BF%E7%94%A8/" title="Sqlmapä½¿ç”¨">Sqlmapä½¿ç”¨</a><time datetime="2023-05-23T16:00:00.000Z" title="å‘è¡¨äº 2023-05-24 00:00:00">2023-05-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/å®‰çŸ¥é±¼-ä¸Šç­æ‘¸é±¼ä¸­.svg" alt="è·ç¦»æœˆå…¥25kä¹Ÿå°±è¿˜å·®ä¸€ä¸ªå¤§ä½¬å¸¦æˆ‘~" title="è·ç¦»æœˆå…¥25kä¹Ÿå°±è¿˜å·®ä¸€ä¸ªå¤§ä½¬å¸¦æˆ‘~"/><div id="runtimeTextTip"></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 By Jack hou </div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="ä¸»é¢˜">ä¸»é¢˜</a></div></div></div></footer></div></div></div><div id="sidebar"><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img02.anzhiy.cn/adminuploads/1/2022/09/15/63232b7d91d22.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">æ–‡ç« </div><div class="length-num">57</div></a><a href="/tags/" title="tag"><div class="headline">æ ‡ç­¾</div><div class="length-num">19</div></a><a href="/categories/" title="category"><div class="headline">åˆ†ç±»</div><div class="length-num">11</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å‹é“¾</span></a><ul class="menus_item_child" style="left:-31px;"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> ç•™è¨€æ¿</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=8868465080&amp;server=tencent&amp;type=0"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> éŸ³ä¹é¦†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> è¿½ç•ªé¡µ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œé›†</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæœ¬äºº</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> éšä¾¿é€›é€›</span></a></li></ul></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch_commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="å¼€å…³å¼¹å¹•"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">æ’­æ”¾éŸ³ä¹</a><div id="console-music-bg"></div><meting-js id="8868465080" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>å¼•ç”¨åˆ°è¯„è®º</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç«™å†…æœç´¢</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç™¾åº¦æœç´¢</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8868465080&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>åšå®¢åˆ†ç±»</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>æ–‡ç« æ ‡ç­¾</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶åœ°å€</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">å…³é—­çƒ­è¯„</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">æ·±è‰²æ¨¡å¼</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>è½‰ç‚ºç¹é«”</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.14/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.3.1/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// æ¶ˆé™¤æ§åˆ¶å°æ‰“å°
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //åœ¨æ¢å¤å‰è¾“å‡ºæ—¥å¿—
  const grt = new Date("4/15/2023 00:00:00"); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `æ¬¢è¿ä½¿ç”¨å®‰çŸ¥é±¼!`,
    `ç”Ÿæ´»æ˜æœ—, ä¸‡ç‰©å¯çˆ±`,
    `
        
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
      â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â•
        
        `,
    "å·²ä¸Šçº¿",
    dnum,
    "å¤©",
    "Â©2023 By å®‰çŸ¥é±¼ V1.5.3",
  ];
  const ascll2 = [`NCC2-036`, `è°ƒç”¨å‰ç½®æ‘„åƒå¤´æ‹ç…§æˆåŠŸï¼Œè¯†åˆ«ä¸ºã€å°ç¬¨è›‹ã€‘.`, `Photo captured: `, `ğŸ¤ª`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c ä½ å¥½ï¼Œå°ç¬¨è›‹.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c âš¡ Powered by å®‰çŸ¥é±¼ %c ä½ æ­£åœ¨è®¿é—® Jack hou çš„åšå®¢.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c ä½ å·²æ‰“å¼€æ§åˆ¶å°.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c ä½ ç°åœ¨æ­£å¤„äºç›‘æ§ä¸­.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("4/15/2023 00:00:00"); //è®¾ç½®ç½‘ç«™ä¸Šçº¿æ—¶é—´
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // è®¡ç®—å¹¶æ›´æ–°å¤©æ•°ã€å°æ—¶æ•°ã€åˆ†é’Ÿæ•°å’Œç§’æ•°
  function updateTime() {
    now = new Date(); // æ›´æ–° now çš„å€¼
    nowHour = now.getHours(); // æ›´æ–° nowHour çš„å€¼
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // æ›´æ–°ç½‘é¡µä¸­æ˜¾ç¤ºçš„ç½‘ç«™è¿è¡Œæ—¶é—´
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // å¦‚æœæ˜¯ä¸Šç­æ—¶é—´ï¼Œé»˜è®¤å°±æ˜¯"å®‰çŸ¥é±¼-ä¸Šç­æ‘¸é±¼ä¸­.svg"å›¾ç‰‡ï¼Œä¸éœ€è¦æ›´æ”¹
      currentTimeHtml = `æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${dnum} å¤©<span id='runtime'> ${hnum} å°æ—¶ ${mnum} åˆ† ${snum} ç§’ </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // å¦‚æœæ˜¯ä¸‹ç­æ—¶é—´ï¼Œæ’å…¥"å®‰çŸ¥é±¼-ä¸‹ç­å•¦.svg"å›¾ç‰‡
      let img = document.querySelector("#workboard .workSituationImg");
      img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/å®‰çŸ¥é±¼-ä¸‹ç­å•¦.svg";
      img.title = "ä¸‹ç­äº†å°±è¯¥å¼€å¼€å¿ƒå¿ƒçš„ç©è€ï¼Œå˜¿å˜¿~";
      img.alt = "ä¸‹ç­äº†å°±è¯¥å¼€å¼€å¿ƒå¿ƒçš„ç©è€ï¼Œå˜¿å˜¿~";

      currentTimeHtml = `æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${dnum} å¤©<span id='runtime'> ${hnum} å°æ—¶ ${mnum} åˆ† ${snum} ç§’ </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.houyanbin.com/',
      region: '',
      onCommentLoaded: function () {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.houyanbin.com/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init();
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.cbd.int/twikoo@1.6.17/dist/twikoo.all.min.js').then(runFn)
  }
  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[å›¾ç‰‡]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[é“¾æ¥]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[ä»£ç ]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.houyanbin.com/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "æ— æ³•è·å–è¯„è®ºï¼Œè¯·ç¡®è®¤ç›¸å…³é…ç½®æ˜¯å¦æ­£ç¡®"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.17/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick}</span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += 'æ²¡æœ‰è¯„è®º'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@anzhiy.cn";</script><script>//åŠ¨æ€æ ‡é¢˜
let leaveTitle = 'w(ï¾ŸĞ”ï¾Ÿ)w ä¸è¦èµ°ï¼å†çœ‹çœ‹å˜›ï¼';
let backTitle = 'â™ª(^âˆ‡^*)æ¬¢è¿è‚¥æ¥ï¼';
let OriginTitile = document.title
let titleTime
document.addEventListener('visibilitychange', function () {
  if (document.hidden) {
    //ç¦»å¼€å½“å‰é¡µé¢æ—¶æ ‡ç­¾æ˜¾ç¤ºå†…å®¹
    document.title = leaveTitle
    clearTimeout(titleTime)
  } else {
    //è¿”å›å½“å‰é¡µé¢æ—¶æ ‡ç­¾æ˜¾ç¤ºå†…å®¹
    document.title = backTitle + OriginTitile
    //ä¸¤ç§’åå˜å›æ­£å¸¸æ ‡é¢˜
    titleTime = setTimeout(function () {
      document.title = OriginTitile
    }, 2000)
  }
})</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script>// åˆå§‹åŒ–å‡½æ•°
let rm = {};

//ç¦æ­¢å›¾ç‰‡ä¸è¶…é“¾æ¥æ‹–æ‹½
let aElements = document.getElementsByTagName("a");
for (let i = 0; i < aElements.length; i++) {
  aElements[i].setAttribute("draggable", "false");
  let imgElements = aElements[i].getElementsByTagName("img");
  for (let j = 0; j < imgElements.length; j++) {
    imgElements[j].setAttribute("draggable", "false");
  }
}

// æ˜¾ç¤ºèœå•
rm.showRightMenu = function (isTrue, x = 0, y = 0) {
  console.info(x, y)
  let rightMenu = document.getElementById("rightMenu");
  rightMenu.style.top = x + "px";
  rightMenu.style.left = y + "px";
  if (isTrue) {
    rightMenu.style.display = "block";
    stopMaskScroll();
  } else {
    rightMenu.style.display = "none";
  }
};

// éšè—èœå•
rm.hideRightMenu = function () {
  rm.showRightMenu(false);
  let rightMenuMask = document.querySelector("#rightmenu-mask");
  rightMenuMask.style.display = "none";
};

// å°ºå¯¸
let rmWidth = document.getElementById("rightMenu").offsetWidth;
let rmHeight = document.getElementById("rightMenu").offsetHeight;

// é‡æ–°å®šä¹‰å°ºå¯¸
rm.reloadrmSize = function () {
  rightMenu.style.visibility = "hidden";
  rightMenu.style.display = "block";
  // è·å–å®½åº¦å’Œé«˜åº¦
  rmWidth = document.getElementById("rightMenu").offsetWidth;
  rmHeight = document.getElementById("rightMenu").offsetHeight;
  rightMenu.style.visibility = "visible";
};

// è·å–ç‚¹å‡»çš„href
let domhref = "";
let domImgSrc = "";
let globalEvent = null;

var oncontextmenuFunction = function (event) {
  if (document.body.clientWidth > 768) {
    let pageX = event.clientX + 10; //åŠ 10æ˜¯ä¸ºäº†é˜²æ­¢æ˜¾ç¤ºæ—¶é¼ æ ‡é®åœ¨èœå•ä¸Š
    let pageY = event.clientY;

    //å…¶ä»–é¢å¤–èœå•
    const $rightMenuOther = document.querySelector(".rightMenuOther");
    const $rightMenuPlugin = document.querySelector(".rightMenuPlugin");
    const $rightMenuCopyText = document.querySelector("#menu-copytext");
    const $rightMenuPasteText = document.querySelector("#menu-pastetext");
    const $rightMenuCommentText = document.querySelector("#menu-commenttext");
    const $rightMenuNewWindow = document.querySelector("#menu-newwindow");
    const $rightMenuNewWindowImg = document.querySelector("#menu-newwindowimg");
    const $rightMenuCopyLink = document.querySelector("#menu-copylink");
    const $rightMenuCopyImg = document.querySelector("#menu-copyimg");
    const $rightMenuDownloadImg = document.querySelector("#menu-downloadimg");
    const $rightMenuSearch = document.querySelector("#menu-search");
    const $rightMenuSearchBaidu = document.querySelector("#menu-searchBaidu");
    const $rightMenuMusicToggle = document.querySelector("#menu-music-toggle");
    const $rightMenuMusicBack = document.querySelector("#menu-music-back");
    const $rightMenuMusicForward = document.querySelector("#menu-music-forward");
    const $rightMenuMusicPlaylist = document.querySelector("#menu-music-playlist");
    const $rightMenuMusicCopyMusicName = document.querySelector("#menu-music-copyMusicName");

    let href = event.target.href;
    let imgsrc = event.target.currentSrc;

    // åˆ¤æ–­æ¨¡å¼ æ‰©å±•æ¨¡å¼ä¸ºæœ‰äº‹ä»¶
    let pluginMode = false;
    $rightMenuOther.style.display = "block";
    globalEvent = event;

    // æ£€æŸ¥æ˜¯å¦éœ€è¦å¤åˆ¶ æ˜¯å¦æœ‰é€‰ä¸­æ–‡æœ¬
    if (selectTextNow && window.getSelection()) {
      pluginMode = true;
      $rightMenuCopyText.style.display = "block";
      $rightMenuCommentText.style.display = "block";
      $rightMenuSearch.style.display = "block";
      $rightMenuSearchBaidu.style.display = "block";
    } else {
      $rightMenuCopyText.style.display = "none";
      $rightMenuCommentText.style.display = "none";
      $rightMenuSearchBaidu.style.display = "none";
      $rightMenuSearch.style.display = "none";
    }

    //æ£€æŸ¥æ˜¯å¦å³é”®ç‚¹å‡»äº†é“¾æ¥aæ ‡ç­¾
    if (href) {
      pluginMode = true;
      $rightMenuNewWindow.style.display = "block";
      $rightMenuCopyLink.style.display = "block";
      domhref = href;
    } else {
      $rightMenuNewWindow.style.display = "none";
      $rightMenuCopyLink.style.display = "none";
    }

    //æ£€æŸ¥æ˜¯å¦éœ€è¦å¤åˆ¶å›¾ç‰‡
    if (imgsrc) {
      pluginMode = true;
      $rightMenuCopyImg.style.display = "block";
      $rightMenuDownloadImg.style.display = "block";
      $rightMenuNewWindowImg.style.display = "block";
      document.getElementById("rightMenu").style.width="12rem"
      domImgSrc = imgsrc;
    } else {
      $rightMenuCopyImg.style.display = "none";
      $rightMenuDownloadImg.style.display = "none";
      $rightMenuNewWindowImg.style.display = "none";
    }

    // åˆ¤æ–­æ˜¯å¦ä¸ºè¾“å…¥æ¡†
    if (event.target.tagName.toLowerCase() === "input" || event.target.tagName.toLowerCase() === "textarea") {
      pluginMode = true;
      $rightMenuPasteText.style.display = "block";
    } else {
      $rightMenuPasteText.style.display = "none";
    }
    const navMusicEl = document.querySelector("#nav-music");
    //åˆ¤æ–­æ˜¯å¦æ˜¯éŸ³ä¹
    if (navMusicEl && navMusicEl.contains(event.target)) {
      pluginMode = true;
      $rightMenuMusicToggle.style.display = "block";
      $rightMenuMusicBack.style.display = "block";
      $rightMenuMusicForward.style.display = "block";
      $rightMenuMusicPlaylist.style.display = "block";
      $rightMenuMusicCopyMusicName.style.display = "block";
    } else {
      $rightMenuMusicToggle.style.display = "none";
      $rightMenuMusicBack.style.display = "none";
      $rightMenuMusicForward.style.display = "none";
      $rightMenuMusicPlaylist.style.display = "none";
      $rightMenuMusicCopyMusicName.style.display = "none";
    }

    // å¦‚æœä¸æ˜¯æ‰©å±•æ¨¡å¼åˆ™éšè—æ‰©å±•æ¨¡å—
    if (pluginMode) {
      $rightMenuOther.style.display = "none";
      $rightMenuPlugin.style.display = "block";
    } else {
      $rightMenuPlugin.style.display = "none";
    }

    rm.reloadrmSize();

    // é¼ æ ‡é»˜è®¤æ˜¾ç¤ºåœ¨é¼ æ ‡å³ä¸‹æ–¹ï¼Œå½“é¼ æ ‡é å³æˆ–é ä¸‹æ—¶ï¼Œå°†èœå•æ˜¾ç¤ºåœ¨é¼ æ ‡å·¦æ–¹\ä¸Šæ–¹
    if (pageX + rmWidth > window.innerWidth) {
      pageX -= rmWidth + 10;
    }
    if (pageY + rmHeight > window.innerHeight) {
      pageY -= pageY + rmHeight - window.innerHeight;
    }

    rm.showRightMenu(true, pageY, pageX);
    document.getElementById("rightmenu-mask").style.display = "flex";
    return false;
  }
};

// ç›‘å¬å³é”®åˆå§‹åŒ–
window.oncontextmenu = oncontextmenuFunction

// ä¸‹è½½å›¾ç‰‡çŠ¶æ€
rm.downloadimging = false;

// å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿
rm.writeClipImg = function (imgsrc) {
  console.log("æŒ‰ä¸‹å¤åˆ¶");
  rm.hideRightMenu();
  anzhiyu.snackbarShow("æ­£åœ¨ä¸‹è½½ä¸­ï¼Œè¯·ç¨å", false, 10000);
  if (rm.downloadimging == false) {
    rm.downloadimging = true;
    setTimeout(function () {
      copyImage(imgsrc);
      anzhiyu.snackbarShow("å¤åˆ¶æˆåŠŸï¼å›¾ç‰‡å·²æ·»åŠ ç›²æ°´å°ï¼Œè¯·éµå®ˆç‰ˆæƒåè®®");
      rm.downloadimging = false;
    }, "10000");
  }
};

function imageToBlob(imageURL) {
  const img = new Image();
  const c = document.createElement("canvas");
  const ctx = c.getContext("2d");
  img.crossOrigin = "";
  img.src = imageURL;
  return new Promise(resolve => {
    img.onload = function () {
      c.width = this.naturalWidth;
      c.height = this.naturalHeight;
      ctx.drawImage(this, 0, 0);
      c.toBlob(
        blob => {
          // here the image is a blob
          resolve(blob);
        },
        "image/png",
        0.75
      );
    };
  });
}

async function copyImage(imageURL) {
  const blob = await imageToBlob(imageURL);
  const item = new ClipboardItem({ "image/png": blob });
  navigator.clipboard.write([item]);
}

rm.copyUrl = function (id) {
  const input = document.createElement("input"); // Create a new <input> element
  input.id = "copyVal"; // Set the id of the new element to "copyVal"
  document.body.appendChild(input); // Append the new element to the end of the <body> element
  
  const text = id;
  input.value = text;
  input.select();
  input.setSelectionRange(0, input.value.length);
  document.execCommand("copy");
  
  input.remove(); // Remove the <input> element from the DOM
};

function stopMaskScroll() {
  if (document.getElementById("rightmenu-mask")) {
    let xscroll = document.getElementById("rightmenu-mask");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //é˜»æ­¢æµè§ˆå™¨é»˜è®¤æ–¹æ³•
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
  if (document.getElementById("rightMenu")) {
    let xscroll = document.getElementById("rightMenu");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //é˜»æ­¢æµè§ˆå™¨é»˜è®¤æ–¹æ³•
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
}

rm.rightmenuCopyText = function (txt) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(txt);
  }
  rm.hideRightMenu();
};

rm.copyPageUrl = function (url) {
  if (!url) {
    url = window.location.href;
  }
  rm.copyUrl(url);
  anzhiyu.snackbarShow("å¤åˆ¶é“¾æ¥åœ°å€æˆåŠŸ", false, 2000);
  rm.hideRightMenu();
};

rm.sharePage = function () {
  var content = window.location.href;
  rm.copyUrl(url);
  anzhiyu.snackbarShow("å¤åˆ¶é“¾æ¥åœ°å€æˆåŠŸ", false, 2000);
  rm.hideRightMenu();
};

// å¤åˆ¶å½“å‰é€‰ä¸­æ–‡æœ¬
var selectTextNow = "";
document.onmouseup = document.ondblclick = selceText;

function selceText() {
  var txt;
  if (document.selection) {
    txt = document.selection.createRange().text;
  } else {
    txt = window.getSelection().toString();
  }
  selectTextNow = txt !== "" ? txt : "";
}

// è¯»å–å‰ªåˆ‡æ¿
rm.readClipboard = function () {
  if (navigator.clipboard) {
    navigator.clipboard.readText().then(clipText => rm.insertAtCaret(globalEvent.target, clipText));
  }
};

// ç²˜è´´æ–‡æœ¬åˆ°ç„¦ç‚¹
rm.insertAtCaret = function (elemt, value) {
  const startPos = elemt.selectionStart,
    endPos = elemt.selectionEnd;
  if (document.selection) {
    elemt.focus();
    var sel = document.selection.createRange();
    sel.text = value;
    elemt.focus();
  } else {
    if (startPos || startPos == "0") {
      var scrollTop = elemt.scrollTop;
      elemt.value = elemt.value.substring(0, startPos) + value + elemt.value.substring(endPos, elemt.value.length);
      elemt.focus();
      elemt.selectionStart = startPos + value.length;
      elemt.selectionEnd = startPos + value.length;
      elemt.scrollTop = scrollTop;
    } else {
      elemt.value += value;
      elemt.focus();
    }
  }
};

//ç²˜è´´æ–‡æœ¬
rm.pasteText = function () {
  const result = rm.readClipboard() || "";
  rm.hideRightMenu();
};

//å¼•ç”¨åˆ°è¯„è®º
rm.rightMenuCommentText = function (txt) {
  rm.hideRightMenu();
  const postCommentDom = document.getElementById("post-comment");
  var domTop = postCommentDom.offsetTop;
  window.scrollTo(0, domTop - 80);
  if (txt == "undefined" || txt == "null") txt = "å¥½æ£’ï¼";
  function setText() {
    setTimeout(() => {
      var input = document.getElementsByClassName("el-textarea__inner")[0];
      if (!input) setText();
      let evt = document.createEvent("HTMLEvents");
      evt.initEvent("input", true, true);
      let inputValue = replaceAll(txt, "\n", "\n> ");
      input.value = "> " + inputValue + "\n\n";
      input.dispatchEvent(evt);
      input.focus();
      input.setSelectionRange(-1, -1);
      if (document.getElementById("comment-tips")) {
        document.getElementById("comment-tips").classList.add("show");
      }
    }, 100);
  }
  setText();
};

//æ›¿æ¢æ‰€æœ‰å†…å®¹
function replaceAll(string, search, replace) {
  return string.split(search).join(replace);
}

// ç™¾åº¦æœç´¢
rm.searchBaidu = function () {
  anzhiyu.snackbarShow("å³å°†è·³è½¬åˆ°ç™¾åº¦æœç´¢", false, 2000);
  setTimeout(function () {
    window.open("https://www.baidu.com/s?wd=" + selectTextNow);
  }, "2000");
  rm.hideRightMenu();
};

//åˆ†äº«é“¾æ¥
rm.copyLink = function () {
  rm.rightmenuCopyText(domhref);
  anzhiyu.snackbarShow("å·²å¤åˆ¶é“¾æ¥åœ°å€");
};

function addRightMenuClickEvent() {
  // æ·»åŠ ç‚¹å‡»äº‹ä»¶
  document.getElementById("menu-backward").addEventListener("click", function () {
  window.history.back();
    rm.hideRightMenu();
  });

  document.getElementById("menu-forward").addEventListener("click", function () {
    window.history.forward();
    rm.hideRightMenu();
  });

  document.getElementById("menu-refresh").addEventListener("click", function () {
    window.location.reload();
  });

  document.getElementById("menu-top").addEventListener("click", function () {
    anzhiyu.scrollToDest(0, 500);
    rm.hideRightMenu();
  });

  const menuLinks = document.querySelectorAll(".menu-link");
  menuLinks.forEach(function (link) {
    link.addEventListener("click", rm.hideRightMenu);
  });

  document.getElementById("menu-darkmode").addEventListener("click", anzhiyu.switchDarkMode);

  document.getElementById("menu-home") && document.getElementById("menu-home").addEventListener("click", function () {
    window.location.href = window.location.origin;
  });

  document.getElementById("menu-randomPost").addEventListener("click", function () {
    toRandomPost();
  });

  document.getElementById("menu-commentBarrage").addEventListener("click", anzhiyu.switchCommentBarrage);

  document.getElementById("rightmenu-mask").addEventListener("click", rm.hideRightMenu);

  document.getElementById("rightmenu-mask").addEventListener("contextmenu", function (event) {
    rm.hideRightMenu();
    event.preventDefault(); // Prevent the default context menu from appearing
  });

  document.getElementById("menu-copy").addEventListener("click", rm.copyPageUrl);

  document.getElementById("menu-pastetext").addEventListener("click", rm.pasteText);

  document.getElementById("menu-copytext").addEventListener("click", function () {
    rm.rightmenuCopyText(selectTextNow);
    anzhiyu.snackbarShow("å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€");
  });

  document.getElementById("menu-commenttext").addEventListener("click", function () {
    rm.rightMenuCommentText(selectTextNow);
  });

  document.getElementById("menu-newwindow").addEventListener("click", function () {
    window.open(domhref, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copylink").addEventListener("click", rm.copyLink);

  document.getElementById("menu-downloadimg").addEventListener("click", function () {
    anzhiyu.downloadImage(domImgSrc, "anzhiyu");
  });

  document.getElementById("menu-newwindowimg").addEventListener("click", function () {
    window.open(domImgSrc, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copyimg").addEventListener("click", function () {
    rm.writeClipImg(domImgSrc);
  });

  document.getElementById("menu-searchBaidu").addEventListener("click", rm.searchBaidu);

  //éŸ³ä¹
  document.getElementById("menu-music-toggle").addEventListener("click", anzhiyu.musicToggle);

  document.getElementById("menu-music-back").addEventListener("click", anzhiyu.musicSkipBack);

  document.getElementById("menu-music-forward").addEventListener("click", anzhiyu.musicSkipForward);

  document.getElementById("menu-music-copyMusicName").addEventListener("click", function () {
    rm.rightmenuCopyText(anzhiyu.musicGetName());
    anzhiyu.snackbarShow("å¤åˆ¶æ­Œæ›²åç§°æˆåŠŸ", false, 3000);
  });

}

addRightMenuClickEvent();</script><script data-pjax>var themeColorMeta = document.querySelector('meta[name="theme-color"]');
var pageHeaderEl = document.getElementById("page-header");
var navMusicEl = document.getElementById("nav-music");
var consoleEl = document.getElementById("console");
// å·²éšæœºçš„æ­Œæ›²
var selectRandomSong = [];
// éŸ³ä¹é»˜è®¤å£°éŸ³å¤§å°
var musicVolume = 0.8;
// æ˜¯å¦åˆ‡æ¢äº†å‘¨æ°ä¼¦éŸ³ä¹åˆ—è¡¨
var changeMusicListFlag = false;
// å½“å‰é»˜è®¤æ’­æ”¾åˆ—è¡¨
var defaultPlayMusicList = [];

document.getElementById("page-name").innerText = document.title.split(" | Jackhou Blog")[0];
anzhiyu.initIndexEssay();
anzhiyu.changeTimeInEssay();
anzhiyu.removeBodyPaceClass();
anzhiyu.qrcodeCreate();
anzhiyu.changeTimeInAlbumDetail();
anzhiyu.reflashEssayWaterFall();
anzhiyu.sayhi();
anzhiyu.stopImgRightDrag();
anzhiyu.addNavBackgroundInit();
anzhiyu.setValueToBodyType();
anzhiyu.catalogActive();
anzhiyu.tagsPageActive();
anzhiyu.categoriesBarActive();
anzhiyu.topCategoriesBarScroll();
anzhiyu.switchRightClickMenuHotReview();
anzhiyu.getCustomPlayList();
anzhiyu.addEventListenerConsoleMusicList(false);
setTimeout(() => {if (typeof addFriendLinksInFooter === "function") {addFriendLinksInFooter();}}, 200)</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div></body></html>